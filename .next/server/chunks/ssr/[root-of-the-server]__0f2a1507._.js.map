{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 5, "column": 0}, "map": {"version":3,"sources":["file:///Users/ruangalvao/ProjetosVS/Projetos%20Pessoais/stud.ai-app/app-stud.ai/src/lib/studyMaterialStore.ts"],"sourcesContent":["// src/lib/studyMaterialStore.ts\nexport type Flashcard = {\n  id: number;\n  question: string;\n  answer: string;\n};\n\nexport type SummaryTopic = {\n  id: number;\n  title: string;\n  content: string;\n  icon: string;\n};\n\nexport type StudySummary = {\n  title: string;\n  mainTopics: SummaryTopic[];\n  keyPoints: string[];\n};\n\nexport type StudyMaterial = {\n  topic: string;\n  flashcards: Flashcard[];\n  summary: StudySummary;\n  // opcionais (se voc√™ quiser usar depois)\n  materialId?: string;\n  createdAt?: string;\n};\n\nconst STORAGE_KEY = \"studai:lastMaterial:v1\";\nconst EVENT_NAME = \"studai:material_updated\";\n\nexport function normalizeFromApi(payload: any): StudyMaterial | null {\n  // aceita:\n  // - { success:true, data:{...} }\n  // - { topic, flashcards, summary }\n  const data = payload?.data ?? payload;\n\n  const topic = data?.topic;\n  const flashcards = data?.flashcards;\n  const summary = data?.summary;\n\n  if (!topic || !Array.isArray(flashcards) || !summary) return null;\n\n  if (\n    typeof summary?.title !== \"string\" ||\n    !Array.isArray(summary?.mainTopics) ||\n    !Array.isArray(summary?.keyPoints)\n  ) {\n    return null;\n  }\n\n  return {\n    topic,\n    flashcards,\n    summary,\n    materialId: payload?.meta?.materialId ?? payload?.materialId ?? data?.materialId,\n    createdAt: new Date().toISOString(),\n  };\n}\n\nexport function saveMaterial(material: StudyMaterial) {\n  if (typeof window === \"undefined\") return;\n  localStorage.setItem(STORAGE_KEY, JSON.stringify(material));\n  window.dispatchEvent(new Event(EVENT_NAME));\n}\n\nexport function loadMaterial(): StudyMaterial | null {\n  if (typeof window === \"undefined\") return null;\n  const raw = localStorage.getItem(STORAGE_KEY);\n  if (!raw) return null;\n\n  try {\n    return JSON.parse(raw) as StudyMaterial;\n  } catch {\n    return null;\n  }\n}\n\nexport function clearMaterial() {\n  if (typeof window === \"undefined\") return;\n  localStorage.removeItem(STORAGE_KEY);\n  window.dispatchEvent(new Event(EVENT_NAME));\n}\n\nexport function onMaterialUpdated(cb: () => void) {\n  if (typeof window === \"undefined\") return () => {};\n\n  const handler = () => cb();\n  window.addEventListener(EVENT_NAME, handler);\n\n  // tamb√©m reage quando outro tab atualiza\n  const storageHandler = (e: StorageEvent) => {\n    if (e.key === STORAGE_KEY) cb();\n  };\n  window.addEventListener(\"storage\", storageHandler);\n\n  return () => {\n    window.removeEventListener(EVENT_NAME, handler);\n    window.removeEventListener(\"storage\", storageHandler);\n  };\n}\n"],"names":[],"mappings":"AAAA,gCAAgC;;;;;;;;AA6BhC,MAAM,cAAc;AACpB,MAAM,aAAa;AAEZ,SAAS,iBAAiB,OAAY;IAC3C,UAAU;IACV,iCAAiC;IACjC,mCAAmC;IACnC,MAAM,OAAO,SAAS,QAAQ;IAE9B,MAAM,QAAQ,MAAM;IACpB,MAAM,aAAa,MAAM;IACzB,MAAM,UAAU,MAAM;IAEtB,IAAI,CAAC,SAAS,CAAC,MAAM,OAAO,CAAC,eAAe,CAAC,SAAS,OAAO;IAE7D,IACE,OAAO,SAAS,UAAU,YAC1B,CAAC,MAAM,OAAO,CAAC,SAAS,eACxB,CAAC,MAAM,OAAO,CAAC,SAAS,YACxB;QACA,OAAO;IACT;IAEA,OAAO;QACL;QACA;QACA;QACA,YAAY,SAAS,MAAM,cAAc,SAAS,cAAc,MAAM;QACtE,WAAW,IAAI,OAAO,WAAW;IACnC;AACF;AAEO,SAAS,aAAa,QAAuB;IAClD,wCAAmC;;;AAGrC;AAEO,SAAS;IACd,wCAAmC,OAAO;;;IAC1C,MAAM;AAQR;AAEO,SAAS;IACd,wCAAmC;;;AAGrC;AAEO,SAAS,kBAAkB,EAAc;IAC9C,wCAAmC,OAAO,KAAO;;;IAEjD,MAAM;IAGN,yCAAyC;IACzC,MAAM;AASR","debugId":null}},
    {"offset": {"line": 63, "column": 0}, "map": {"version":3,"sources":["file:///Users/ruangalvao/ProjetosVS/Projetos%20Pessoais/stud.ai-app/app-stud.ai/src/app/components/UploadSection.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useMemo, useRef, useState } from \"react\";\nimport { Upload, Sparkles, RotateCcw, BookOpen, FileText } from \"lucide-react\";\nimport { loadMaterial, saveMaterial } from \"@/lib/studyMaterialStore\";\n\ntype SummaryStyle = \"bullet\" | \"explained\";\ntype Difficulty = \"easy\" | \"medium\" | \"hard\";\n\nfunction cn(...s: Array<string | false | null | undefined>) {\n  return s.filter(Boolean).join(\" \");\n}\n\nexport default function UploadSection({\n  onDataProcessed,\n  onGoFlashcards,\n  onGoSummary,\n}: {\n  onDataProcessed?: (data: any) => void;\n  onGoFlashcards?: () => void;\n  onGoSummary?: () => void;\n}) {\n  const inputRef = useRef<HTMLInputElement | null>(null);\n\n  const [file, setFile] = useState<File | null>(null);\n  const [fileLabel, setFileLabel] = useState<string>(\"\");\n\n  const [summaryStyle, setSummaryStyle] = useState<SummaryStyle>(\"bullet\");\n  const [difficulty, setDifficulty] = useState<Difficulty>(\"medium\");\n  const [flashcardsCount, setFlashcardsCount] = useState<number>(10);\n\n  const [isUploading, setIsUploading] = useState(false);\n  const [success, setSuccess] = useState(false);\n\n  const [error, setError] = useState<string | null>(null);\n  const [apiRemaining, setApiRemaining] = useState<number | null>(null);\n  const [provider, setProvider] = useState<string | null>(null);\n\n  // carrega √∫ltimo material salvo (n√£o some ao trocar de se√ß√£o/p√°gina)\n  useEffect(() => {\n    const last = loadMaterial();\n    if (last) {\n      setSuccess(true);\n      onDataProcessed?.(last);\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  const canGenerate = useMemo(() => !!file && !isUploading, [file, isUploading]);\n\n  function onPickFile() {\n    inputRef.current?.click();\n  }\n\n  async function handleUpload(selectedFile: File) {\n    setError(null);\n    setIsUploading(true);\n    setSuccess(false);\n\n    try {\n      const formData = new FormData();\n      formData.append(\"file\", selectedFile);\n\n      // ‚úÖ op√ß√µes do usu√°rio\n      formData.append(\"summaryStyle\", summaryStyle);\n      formData.append(\"difficulty\", difficulty);\n      formData.append(\"flashcardsCount\", String(flashcardsCount));\n\n      const response = await fetch(\"/api/process-study-material\", {\n        method: \"POST\",\n        body: formData,\n      });\n\n      const json = await response.json().catch(() => null);\n\n      if (!response.ok || !json?.success) {\n        // erros ‚Äúbons‚Äù do backend\n        const msg =\n          json?.error ||\n          json?.details ||\n          (response.status === 402\n            ? \"Voc√™ atingiu o limite do plano gr√°tis.\"\n            : response.status === 401\n            ? \"Voc√™ precisa estar logado para gerar.\"\n            : response.status === 503\n            ? \"Modelo sobrecarregado. Tente novamente.\"\n            : \"Falha ao processar arquivo.\");\n\n        throw new Error(msg);\n      }\n\n      setProvider(json?.provider || null);\n      setApiRemaining(typeof json?.remaining === \"number\" ? json.remaining : null);\n\n      // backend retorna { success:true, data:{...} }\n      const material = json?.data;\n\n      if (!material?.topic || !material?.flashcards || !material?.summary) {\n        throw new Error(\"Resposta inv√°lida: faltou topic/flashcards/summary.\");\n      }\n\n      // ‚úÖ persiste para n√£o sumir ao mudar de p√°gina/se√ß√£o\n      saveMaterial(material);\n      onDataProcessed?.(material);\n\n      setSuccess(true);\n    } catch (e: any) {\n      setSuccess(false);\n      setError(e?.message || \"Erro inesperado\");\n    } finally {\n      setIsUploading(false);\n    }\n  }\n\n  async function onFileChange(e: React.ChangeEvent<HTMLInputElement>) {\n    const f = e.target.files?.[0];\n    if (!f) return;\n\n    setFile(f);\n    setFileLabel(`${f.name} ‚Ä¢ ${(f.size / 1024 / 1024).toFixed(2)} MB`);\n\n    await handleUpload(f);\n\n    // limpa input para permitir escolher o mesmo arquivo novamente\n    e.target.value = \"\";\n  }\n\n  async function onDrop(e: React.DragEvent<HTMLDivElement>) {\n    e.preventDefault();\n    const f = e.dataTransfer.files?.[0];\n    if (!f) return;\n\n    setFile(f);\n    setFileLabel(`${f.name} ‚Ä¢ ${(f.size / 1024 / 1024).toFixed(2)} MB`);\n\n    await handleUpload(f);\n  }\n\n  function onDragOver(e: React.DragEvent<HTMLDivElement>) {\n    e.preventDefault();\n  }\n\n  async function onGenerateAgain() {\n    if (!file) {\n      setError(\"Selecione um arquivo novamente para gerar.\");\n      return;\n    }\n    await handleUpload(file);\n  }\n\n  return (\n    <section className=\"w-full\">\n      {/* input */}\n      <input\n        ref={inputRef}\n        type=\"file\"\n        className=\"hidden\"\n        onChange={onFileChange}\n        accept=\"image/*,application/pdf,text/plain\"\n      />\n\n      {/* card */}\n      <div className=\"rounded-2xl border border-[#1A1A1A] bg-[#0F0F0F] p-6 sm:p-8\">\n        <div className=\"flex items-start justify-between gap-4\">\n          <div>\n            <div className=\"flex items-center gap-2\">\n              <div className=\"h-9 w-9 rounded-xl bg-[#00FF8B]/10 flex items-center justify-center border border-[#00FF8B]/20\">\n                <Upload className=\"h-5 w-5 text-[#00FF8B]\" />\n              </div>\n              <h2 className=\"text-lg sm:text-xl font-semibold\">Upload do material</h2>\n            </div>\n            <p className=\"mt-2 text-sm text-gray-400\">\n              Envie uma imagem, PDF ou texto para gerar flashcards e resumo automaticamente.\n            </p>\n          </div>\n\n          {provider ? (\n            <div className=\"hidden sm:flex items-center gap-2 text-xs px-3 py-2 rounded-full border border-[#1A1A1A] text-gray-400\">\n              <Sparkles className=\"h-4 w-4 text-[#00FF8B]\" />\n              <span>IA: {provider}</span>\n              {typeof apiRemaining === \"number\" ? (\n                <span className=\"text-gray-500\">‚Ä¢ restante: {apiRemaining}</span>\n              ) : null}\n            </div>\n          ) : null}\n        </div>\n\n        {/* op√ß√µes */}\n        <div className=\"mt-6 grid grid-cols-1 md:grid-cols-3 gap-4\">\n          <div className=\"rounded-xl border border-[#1A1A1A] bg-[#0D0D0D] p-4\">\n            <div className=\"text-sm font-medium mb-2\">Tipo de resumo</div>\n            <select\n              value={summaryStyle}\n              onChange={(e) => setSummaryStyle(e.target.value as SummaryStyle)}\n              className=\"w-full rounded-lg bg-[#0B0B0B] border border-[#1A1A1A] px-3 py-2 text-sm\"\n              disabled={isUploading}\n            >\n              <option value=\"bullet\">Bullet (t√≥picos)</option>\n              <option value=\"explained\">Explicado</option>\n            </select>\n          </div>\n\n          <div className=\"rounded-xl border border-[#1A1A1A] bg-[#0D0D0D] p-4\">\n            <div className=\"text-sm font-medium mb-2\">Dificuldade dos flashcards</div>\n            <select\n              value={difficulty}\n              onChange={(e) => setDifficulty(e.target.value as Difficulty)}\n              className=\"w-full rounded-lg bg-[#0B0B0B] border border-[#1A1A1A] px-3 py-2 text-sm\"\n              disabled={isUploading}\n            >\n              <option value=\"easy\">F√°cil</option>\n              <option value=\"medium\">M√©dia</option>\n              <option value=\"hard\">Dif√≠cil</option>\n            </select>\n          </div>\n\n          <div className=\"rounded-xl border border-[#1A1A1A] bg-[#0D0D0D] p-4\">\n            <div className=\"text-sm font-medium mb-2\">Quantidade de flashcards</div>\n            <div className=\"flex items-center gap-3\">\n              <input\n                type=\"range\"\n                min={1}\n                max={30}\n                value={flashcardsCount}\n                onChange={(e) => setFlashcardsCount(Number(e.target.value))}\n                className=\"w-full\"\n                disabled={isUploading}\n              />\n              <div className=\"min-w-[44px] text-center text-sm font-semibold text-[#00FF8B]\">\n                {flashcardsCount}\n              </div>\n            </div>\n            <div className=\"mt-1 text-xs text-gray-500\">\n              (1 a 30 ‚Äî depois a gente libera mais no PRO)\n            </div>\n          </div>\n        </div>\n\n        {/* dropzone */}\n        <div\n          onDrop={onDrop}\n          onDragOver={onDragOver}\n          className={cn(\n            \"mt-6 rounded-2xl border border-dashed p-8 sm:p-10 text-center transition\",\n            \"border-[#2A2A2A] bg-[#0B0B0B]\",\n            isUploading ? \"opacity-70\" : \"hover:border-[#00FF8B]/40\"\n          )}\n        >\n          <div className=\"mx-auto flex h-12 w-12 items-center justify-center rounded-2xl border border-[#1A1A1A] bg-[#0F0F0F]\">\n            <FileText className=\"h-6 w-6 text-gray-300\" />\n          </div>\n\n          <div className=\"mt-4 text-base sm:text-lg font-semibold\">\n            Arraste e solte seu arquivo aqui\n          </div>\n          <div className=\"mt-2 text-sm text-gray-400\">ou clique para selecionar</div>\n\n          <button\n            onClick={onPickFile}\n            disabled={isUploading}\n            className={cn(\n              \"mt-6 inline-flex items-center justify-center rounded-xl px-5 py-2 text-sm font-medium transition border\",\n              \"border-[#1A1A1A] bg-[#121212] hover:bg-[#161616]\",\n              \"disabled:opacity-60\"\n            )}\n          >\n            {isUploading ? \"Processando...\" : \"Selecionar arquivo\"}\n          </button>\n\n          {fileLabel ? (\n            <div className=\"mt-4 text-xs text-gray-400\">{fileLabel}</div>\n          ) : null}\n\n          {error ? <div className=\"mt-4 text-sm text-red-400\">{error}</div> : null}\n        </div>\n\n        {/* sucesso + a√ß√µes */}\n        <div className=\"mt-6 flex flex-col sm:flex-row sm:items-center justify-between gap-3\">\n          <div className=\"text-sm text-gray-400\">\n            {success ? (\n              <span className=\"text-[#00FF8B] font-medium\">‚úÖ Conclu√≠do! Material gerado.</span>\n            ) : isUploading ? (\n              <span>Gerando‚Ä¶ isso pode levar alguns segundos.</span>\n            ) : (\n              <span>Depois de gerar, voc√™ pode ir direto para flashcards ou resumo.</span>\n            )}\n          </div>\n\n          <div className=\"flex flex-wrap gap-2\">\n            <button\n              onClick={onGenerateAgain}\n              disabled={!canGenerate}\n              className={cn(\n                \"inline-flex items-center gap-2 rounded-xl px-4 py-2 text-sm font-medium border transition\",\n                \"border-[#1A1A1A] bg-[#121212] hover:bg-[#161616]\",\n                \"disabled:opacity-60\"\n              )}\n              title=\"Gerar novamente com novas op√ß√µes\"\n            >\n              <RotateCcw className=\"h-4 w-4\" />\n              Gerar novamente\n            </button>\n\n            <button\n              onClick={onGoFlashcards}\n              disabled={!success}\n              className={cn(\n                \"inline-flex items-center gap-2 rounded-xl px-4 py-2 text-sm font-medium transition border\",\n                success\n                  ? \"border-[#00FF8B]/30 bg-[#00FF8B]/10 text-[#00FF8B] hover:bg-[#00FF8B]/15\"\n                  : \"border-[#1A1A1A] bg-[#121212] text-gray-500\",\n                \"disabled:opacity-60\"\n              )}\n            >\n              <BookOpen className=\"h-4 w-4\" />\n              Ir para flashcards\n            </button>\n\n            <button\n              onClick={onGoSummary}\n              disabled={!success}\n              className={cn(\n                \"inline-flex items-center gap-2 rounded-xl px-4 py-2 text-sm font-medium transition border\",\n                success\n                  ? \"border-[#00FF8B]/30 bg-[#00FF8B]/10 text-[#00FF8B] hover:bg-[#00FF8B]/15\"\n                  : \"border-[#1A1A1A] bg-[#121212] text-gray-500\",\n                \"disabled:opacity-60\"\n              )}\n            >\n              <Sparkles className=\"h-4 w-4\" />\n              Ir para resumo\n            </button>\n          </div>\n        </div>\n      </div>\n    </section>\n  );\n}\n"],"names":[],"mappings":";;;;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAJA;;;;;AASA,SAAS,GAAG,GAAG,CAA2C;IACxD,OAAO,EAAE,MAAM,CAAC,SAAS,IAAI,CAAC;AAChC;AAEe,SAAS,cAAc,EACpC,eAAe,EACf,cAAc,EACd,WAAW,EAKZ;IACC,MAAM,WAAW,CAAA,GAAA,qMAAA,CAAA,SAAM,AAAD,EAA2B;IAEjD,MAAM,CAAC,MAAM,QAAQ,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAe;IAC9C,MAAM,CAAC,WAAW,aAAa,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAU;IAEnD,MAAM,CAAC,cAAc,gBAAgB,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAgB;IAC/D,MAAM,CAAC,YAAY,cAAc,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAc;IACzD,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAU;IAE/D,MAAM,CAAC,aAAa,eAAe,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAC/C,MAAM,CAAC,SAAS,WAAW,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAEvC,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAiB;IAClD,MAAM,CAAC,cAAc,gBAAgB,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAiB;IAChE,MAAM,CAAC,UAAU,YAAY,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAiB;IAExD,qEAAqE;IACrE,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,MAAM,OAAO,CAAA,GAAA,gIAAA,CAAA,eAAY,AAAD;QACxB,IAAI,MAAM;YACR,WAAW;YACX,kBAAkB;QACpB;IACA,uDAAuD;IACzD,GAAG,EAAE;IAEL,MAAM,cAAc,CAAA,GAAA,qMAAA,CAAA,UAAO,AAAD,EAAE,IAAM,CAAC,CAAC,QAAQ,CAAC,aAAa;QAAC;QAAM;KAAY;IAE7E,SAAS;QACP,SAAS,OAAO,EAAE;IACpB;IAEA,eAAe,aAAa,YAAkB;QAC5C,SAAS;QACT,eAAe;QACf,WAAW;QAEX,IAAI;YACF,MAAM,WAAW,IAAI;YACrB,SAAS,MAAM,CAAC,QAAQ;YAExB,sBAAsB;YACtB,SAAS,MAAM,CAAC,gBAAgB;YAChC,SAAS,MAAM,CAAC,cAAc;YAC9B,SAAS,MAAM,CAAC,mBAAmB,OAAO;YAE1C,MAAM,WAAW,MAAM,MAAM,+BAA+B;gBAC1D,QAAQ;gBACR,MAAM;YACR;YAEA,MAAM,OAAO,MAAM,SAAS,IAAI,GAAG,KAAK,CAAC,IAAM;YAE/C,IAAI,CAAC,SAAS,EAAE,IAAI,CAAC,MAAM,SAAS;gBAClC,0BAA0B;gBAC1B,MAAM,MACJ,MAAM,SACN,MAAM,WACN,CAAC,SAAS,MAAM,KAAK,MACjB,2CACA,SAAS,MAAM,KAAK,MACpB,0CACA,SAAS,MAAM,KAAK,MACpB,4CACA,6BAA6B;gBAEnC,MAAM,IAAI,MAAM;YAClB;YAEA,YAAY,MAAM,YAAY;YAC9B,gBAAgB,OAAO,MAAM,cAAc,WAAW,KAAK,SAAS,GAAG;YAEvE,+CAA+C;YAC/C,MAAM,WAAW,MAAM;YAEvB,IAAI,CAAC,UAAU,SAAS,CAAC,UAAU,cAAc,CAAC,UAAU,SAAS;gBACnE,MAAM,IAAI,MAAM;YAClB;YAEA,qDAAqD;YACrD,CAAA,GAAA,gIAAA,CAAA,eAAY,AAAD,EAAE;YACb,kBAAkB;YAElB,WAAW;QACb,EAAE,OAAO,GAAQ;YACf,WAAW;YACX,SAAS,GAAG,WAAW;QACzB,SAAU;YACR,eAAe;QACjB;IACF;IAEA,eAAe,aAAa,CAAsC;QAChE,MAAM,IAAI,EAAE,MAAM,CAAC,KAAK,EAAE,CAAC,EAAE;QAC7B,IAAI,CAAC,GAAG;QAER,QAAQ;QACR,aAAa,GAAG,EAAE,IAAI,CAAC,GAAG,EAAE,CAAC,EAAE,IAAI,GAAG,OAAO,IAAI,EAAE,OAAO,CAAC,GAAG,GAAG,CAAC;QAElE,MAAM,aAAa;QAEnB,+DAA+D;QAC/D,EAAE,MAAM,CAAC,KAAK,GAAG;IACnB;IAEA,eAAe,OAAO,CAAkC;QACtD,EAAE,cAAc;QAChB,MAAM,IAAI,EAAE,YAAY,CAAC,KAAK,EAAE,CAAC,EAAE;QACnC,IAAI,CAAC,GAAG;QAER,QAAQ;QACR,aAAa,GAAG,EAAE,IAAI,CAAC,GAAG,EAAE,CAAC,EAAE,IAAI,GAAG,OAAO,IAAI,EAAE,OAAO,CAAC,GAAG,GAAG,CAAC;QAElE,MAAM,aAAa;IACrB;IAEA,SAAS,WAAW,CAAkC;QACpD,EAAE,cAAc;IAClB;IAEA,eAAe;QACb,IAAI,CAAC,MAAM;YACT,SAAS;YACT;QACF;QACA,MAAM,aAAa;IACrB;IAEA,qBACE,8OAAC;QAAQ,WAAU;;0BAEjB,8OAAC;gBACC,KAAK;gBACL,MAAK;gBACL,WAAU;gBACV,UAAU;gBACV,QAAO;;;;;;0BAIT,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;;kDACC,8OAAC;wCAAI,WAAU;;0DACb,8OAAC;gDAAI,WAAU;0DACb,cAAA,8OAAC,sMAAA,CAAA,SAAM;oDAAC,WAAU;;;;;;;;;;;0DAEpB,8OAAC;gDAAG,WAAU;0DAAmC;;;;;;;;;;;;kDAEnD,8OAAC;wCAAE,WAAU;kDAA6B;;;;;;;;;;;;4BAK3C,yBACC,8OAAC;gCAAI,WAAU;;kDACb,8OAAC,0MAAA,CAAA,WAAQ;wCAAC,WAAU;;;;;;kDACpB,8OAAC;;4CAAK;4CAAK;;;;;;;oCACV,OAAO,iBAAiB,yBACvB,8OAAC;wCAAK,WAAU;;4CAAgB;4CAAa;;;;;;+CAC3C;;;;;;uCAEJ;;;;;;;kCAIN,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAI,WAAU;;kDACb,8OAAC;wCAAI,WAAU;kDAA2B;;;;;;kDAC1C,8OAAC;wCACC,OAAO;wCACP,UAAU,CAAC,IAAM,gBAAgB,EAAE,MAAM,CAAC,KAAK;wCAC/C,WAAU;wCACV,UAAU;;0DAEV,8OAAC;gDAAO,OAAM;0DAAS;;;;;;0DACvB,8OAAC;gDAAO,OAAM;0DAAY;;;;;;;;;;;;;;;;;;0CAI9B,8OAAC;gCAAI,WAAU;;kDACb,8OAAC;wCAAI,WAAU;kDAA2B;;;;;;kDAC1C,8OAAC;wCACC,OAAO;wCACP,UAAU,CAAC,IAAM,cAAc,EAAE,MAAM,CAAC,KAAK;wCAC7C,WAAU;wCACV,UAAU;;0DAEV,8OAAC;gDAAO,OAAM;0DAAO;;;;;;0DACrB,8OAAC;gDAAO,OAAM;0DAAS;;;;;;0DACvB,8OAAC;gDAAO,OAAM;0DAAO;;;;;;;;;;;;;;;;;;0CAIzB,8OAAC;gCAAI,WAAU;;kDACb,8OAAC;wCAAI,WAAU;kDAA2B;;;;;;kDAC1C,8OAAC;wCAAI,WAAU;;0DACb,8OAAC;gDACC,MAAK;gDACL,KAAK;gDACL,KAAK;gDACL,OAAO;gDACP,UAAU,CAAC,IAAM,mBAAmB,OAAO,EAAE,MAAM,CAAC,KAAK;gDACzD,WAAU;gDACV,UAAU;;;;;;0DAEZ,8OAAC;gDAAI,WAAU;0DACZ;;;;;;;;;;;;kDAGL,8OAAC;wCAAI,WAAU;kDAA6B;;;;;;;;;;;;;;;;;;kCAOhD,8OAAC;wBACC,QAAQ;wBACR,YAAY;wBACZ,WAAW,GACT,4EACA,iCACA,cAAc,eAAe;;0CAG/B,8OAAC;gCAAI,WAAU;0CACb,cAAA,8OAAC,8MAAA,CAAA,WAAQ;oCAAC,WAAU;;;;;;;;;;;0CAGtB,8OAAC;gCAAI,WAAU;0CAA0C;;;;;;0CAGzD,8OAAC;gCAAI,WAAU;0CAA6B;;;;;;0CAE5C,8OAAC;gCACC,SAAS;gCACT,UAAU;gCACV,WAAW,GACT,2GACA,oDACA;0CAGD,cAAc,mBAAmB;;;;;;4BAGnC,0BACC,8OAAC;gCAAI,WAAU;0CAA8B;;;;;uCAC3C;4BAEH,sBAAQ,8OAAC;gCAAI,WAAU;0CAA6B;;;;;uCAAe;;;;;;;kCAItE,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAI,WAAU;0CACZ,wBACC,8OAAC;oCAAK,WAAU;8CAA6B;;;;;2CAC3C,4BACF,8OAAC;8CAAK;;;;;yDAEN,8OAAC;8CAAK;;;;;;;;;;;0CAIV,8OAAC;gCAAI,WAAU;;kDACb,8OAAC;wCACC,SAAS;wCACT,UAAU,CAAC;wCACX,WAAW,GACT,6FACA,oDACA;wCAEF,OAAM;;0DAEN,8OAAC,gNAAA,CAAA,YAAS;gDAAC,WAAU;;;;;;4CAAY;;;;;;;kDAInC,8OAAC;wCACC,SAAS;wCACT,UAAU,CAAC;wCACX,WAAW,GACT,6FACA,UACI,6EACA,+CACJ;;0DAGF,8OAAC,8MAAA,CAAA,WAAQ;gDAAC,WAAU;;;;;;4CAAY;;;;;;;kDAIlC,8OAAC;wCACC,SAAS;wCACT,UAAU,CAAC;wCACX,WAAW,GACT,6FACA,UACI,6EACA,+CACJ;;0DAGF,8OAAC,0MAAA,CAAA,WAAQ;gDAAC,WAAU;;;;;;4CAAY;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAQ9C","debugId":null}},
    {"offset": {"line": 635, "column": 0}, "map": {"version":3,"sources":["file:///Users/ruangalvao/ProjetosVS/Projetos%20Pessoais/stud.ai-app/app-stud.ai/src/lib/studyProgressStore.ts"],"sourcesContent":["\"use client\";\n\n/**\n * Store simples de progresso (localStorage) + \"events\" para atualizar UI.\n * Compat√≠vel com:\n * - makeProgressKey\n * - makeProgressKeyForDoc\n * - loadProgress\n * - saveProgress\n * - clearProgress\n * - onProgressUpdated\n */\n\ntype ProgressItem = {\n  knownIds: number[];   // ids marcados como \"sei\"\n  reviewIds: number[];  // ids marcados como \"n√£o sei\"\n  currentIndex: number; // √≠ndice atual no deck\n  updatedAt: number;    // timestamp\n};\n\nconst LS_PREFIX = \"studai:progress:v1:\";\n\nfunction safeParse<T>(s: string | null): T | null {\n  if (!s) return null;\n  try {\n    return JSON.parse(s) as T;\n  } catch {\n    return null;\n  }\n}\n\nfunction emit(key: string) {\n  // evento custom local + evento nativo storage\n  window.dispatchEvent(new CustomEvent(\"studai:progress-updated\", { detail: { key } }));\n}\n\nexport function makeProgressKey(userId: string, materialId: string) {\n  return `${LS_PREFIX}${userId}:${materialId}`;\n}\n\n/**\n * Caso seu app trate material como \"docId\" (ou slug/uuid),\n * esse helper mant√©m compatibilidade com imports antigos.\n */\nexport function makeProgressKeyForDoc(userId: string, docId: string) {\n  return `${LS_PREFIX}${userId}:doc:${docId}`;\n}\n\nexport function loadProgress(key: string): ProgressItem | null {\n  if (typeof window === \"undefined\") return null;\n  return safeParse<ProgressItem>(localStorage.getItem(key));\n}\n\nexport function saveProgress(key: string, progress: ProgressItem) {\n  if (typeof window === \"undefined\") return;\n  localStorage.setItem(\n    key,\n    JSON.stringify({\n      knownIds: Array.from(new Set(progress.knownIds || [])),\n      reviewIds: Array.from(new Set(progress.reviewIds || [])),\n      currentIndex: Number.isFinite(progress.currentIndex) ? progress.currentIndex : 0,\n      updatedAt: Date.now(),\n    } satisfies ProgressItem)\n  );\n  emit(key);\n}\n\nexport function clearProgress(key: string) {\n  if (typeof window === \"undefined\") return;\n  localStorage.removeItem(key);\n  emit(key);\n}\n\n/**\n * Listener para componentes reagirem a mudan√ßas de progresso.\n * Retorna um \"unsubscribe\".\n */\nexport function onProgressUpdated(cb: (key: string) => void) {\n  if (typeof window === \"undefined\") return () => {};\n\n  const handler = (ev: Event) => {\n    const anyEv = ev as any;\n    const key = anyEv?.detail?.key;\n    if (typeof key === \"string\") cb(key);\n  };\n\n  window.addEventListener(\"studai:progress-updated\", handler as any);\n\n  // tamb√©m escuta mudan√ßas do localStorage (outra aba)\n  const storageHandler = (ev: StorageEvent) => {\n    if (!ev.key) return;\n    if (ev.key.startsWith(LS_PREFIX)) cb(ev.key);\n  };\n  window.addEventListener(\"storage\", storageHandler);\n\n  return () => {\n    window.removeEventListener(\"studai:progress-updated\", handler as any);\n    window.removeEventListener(\"storage\", storageHandler);\n  };\n}\n"],"names":[],"mappings":";;;;;;;;AAAA;AAoBA,MAAM,YAAY;AAElB,SAAS,UAAa,CAAgB;IACpC,IAAI,CAAC,GAAG,OAAO;IACf,IAAI;QACF,OAAO,KAAK,KAAK,CAAC;IACpB,EAAE,OAAM;QACN,OAAO;IACT;AACF;AAEA,SAAS,KAAK,GAAW;IACvB,8CAA8C;IAC9C,OAAO,aAAa,CAAC,IAAI,YAAY,2BAA2B;QAAE,QAAQ;YAAE;QAAI;IAAE;AACpF;AAEO,SAAS,gBAAgB,MAAc,EAAE,UAAkB;IAChE,OAAO,GAAG,YAAY,OAAO,CAAC,EAAE,YAAY;AAC9C;AAMO,SAAS,sBAAsB,MAAc,EAAE,KAAa;IACjE,OAAO,GAAG,YAAY,OAAO,KAAK,EAAE,OAAO;AAC7C;AAEO,SAAS,aAAa,GAAW;IACtC,wCAAmC,OAAO;;;AAE5C;AAEO,SAAS,aAAa,GAAW,EAAE,QAAsB;IAC9D,wCAAmC;;;AAWrC;AAEO,SAAS,cAAc,GAAW;IACvC,wCAAmC;;;AAGrC;AAMO,SAAS,kBAAkB,EAAyB;IACzD,wCAAmC,OAAO,KAAO;;;IAEjD,MAAM;IAQN,qDAAqD;IACrD,MAAM;AAUR","debugId":null}},
    {"offset": {"line": 694, "column": 0}, "map": {"version":3,"sources":["file:///Users/ruangalvao/ProjetosVS/Projetos%20Pessoais/stud.ai-app/app-stud.ai/src/app/components/FlashcardsSection.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useMemo, useState } from \"react\";\nimport { CheckCircle2, XCircle, ChevronLeft, ChevronRight } from \"lucide-react\";\nimport {\n  loadProgress,\n  saveProgress,\n  makeProgressKey,\n  onProgressUpdated,\n} from \"@/lib/studyProgressStore\";\n\ntype Props = {\n  data?: any | null;\n};\n\ntype Material = {\n  materialId?: string;\n  topic?: string;\n  flashcards?: Array<{ id: number; question: string; answer: string }>;\n  summary?: any;\n};\n\nfunction cn(...s: Array<string | false | null | undefined>) {\n  return s.filter(Boolean).join(\" \");\n}\n\nasync function fetchLatestMaterial(): Promise<Material | null> {\n  const res = await fetch(\"/api/materials/latest\", { method: \"GET\" });\n  const json = await res.json();\n\n  if (!res.ok || !json?.success) return null;\n  const latest = json?.data;\n  if (!latest) return null;\n\n  // latest.data √© o Json com topic/flashcards/summary\n  const payload = latest?.data && typeof latest.data === \"object\" ? latest.data : null;\n  if (!payload) return null;\n\n  const material: Material = {\n    ...payload,\n    materialId: latest.id,\n    topic: payload.topic || latest.topic || \"Material\",\n  };\n\n  // salva espelho no localStorage (ajuda quando navegar)\n  try {\n    localStorage.setItem(\"studai:lastMaterialData:v1\", JSON.stringify(material));\n  } catch {}\n\n  return material;\n}\n\nasync function fetchMeId(): Promise<string | null> {\n  try {\n    const res = await fetch(\"/api/auth/me\");\n    const json = await res.json();\n    if (!res.ok || !json?.success) return null;\n    return json?.data?.id || null;\n  } catch {\n    return null;\n  }\n}\n\nexport default function FlashcardsSection({ data }: Props) {\n  const [material, setMaterial] = useState<Material | null>(data || null);\n  const [loading, setLoading] = useState<boolean>(!data);\n  const [error, setError] = useState<string | null>(null);\n\n  const [userId, setUserId] = useState<string | null>(null);\n\n  const [index, setIndex] = useState<number>(0);\n  const [flipped, setFlipped] = useState<boolean>(false);\n  const [knownIds, setKnownIds] = useState<Set<number>>(new Set());\n  const [reviewIds, setReviewIds] = useState<Set<number>>(new Set());\n\n  // 1) pega userId (pra chave do progresso)\n  useEffect(() => {\n    fetchMeId().then(setUserId);\n  }, []);\n\n  // 2) se n√£o veio data por prop, busca do DB\n  useEffect(() => {\n    let alive = true;\n\n    async function load() {\n      if (data) {\n        setMaterial(data);\n        setLoading(false);\n        return;\n      }\n\n      setLoading(true);\n      const latest = await fetchLatestMaterial();\n      if (!alive) return;\n\n      if (!latest) {\n        setError(\"Nenhum material encontrado. Fa√ßa um upload primeiro.\");\n        setMaterial(null);\n      } else {\n        setError(null);\n        setMaterial(latest);\n      }\n\n      setLoading(false);\n    }\n\n    load();\n    return () => {\n      alive = false;\n    };\n  }, [data]);\n\n  const cards = useMemo(() => {\n    const list = material?.flashcards || [];\n    return Array.isArray(list) ? list : [];\n  }, [material]);\n\n  const materialId = material?.materialId || \"latest\";\n  const progressKey = useMemo(() => {\n    // se n√£o tiver userId ainda, usa \"me\" pra n√£o quebrar\n    return makeProgressKey(userId || \"me\", materialId);\n  }, [userId, materialId]);\n\n  // 3) carrega progresso quando tiver cards\n  useEffect(() => {\n    if (!cards.length) return;\n\n    const p = loadProgress(progressKey);\n    if (p) {\n      setIndex(Math.min(p.currentIndex || 0, Math.max(0, cards.length - 1)));\n      setKnownIds(new Set(p.knownIds || []));\n      setReviewIds(new Set(p.reviewIds || []));\n    } else {\n      setIndex(0);\n      setKnownIds(new Set());\n      setReviewIds(new Set());\n    }\n\n    // escuta atualiza√ß√µes do progresso\n    const unsub = onProgressUpdated((key) => {\n      if (key !== progressKey) return;\n      const next = loadProgress(progressKey);\n      if (!next) return;\n\n      setIndex(Math.min(next.currentIndex || 0, Math.max(0, cards.length - 1)));\n      setKnownIds(new Set(next.knownIds || []));\n      setReviewIds(new Set(next.reviewIds || []));\n    });\n\n    return () => unsub();\n  }, [cards.length, progressKey]);\n\n  function persist(nextIndex: number, nextKnown: Set<number>, nextReview: Set<number>) {\n    saveProgress(progressKey, {\n      currentIndex: nextIndex,\n      knownIds: Array.from(nextKnown),\n      reviewIds: Array.from(nextReview),\n      updatedAt: Date.now(),\n    });\n  }\n\n  function prev() {\n    const next = Math.max(0, index - 1);\n    setIndex(next);\n    setFlipped(false);\n    persist(next, knownIds, reviewIds);\n  }\n\n  function next() {\n    const next = Math.min(cards.length - 1, index + 1);\n    setIndex(next);\n    setFlipped(false);\n    persist(next, knownIds, reviewIds);\n  }\n\n  function markKnown() {\n    const id = cards[index]?.id;\n    if (!id) return;\n\n    const k = new Set(knownIds);\n    const r = new Set(reviewIds);\n    k.add(id);\n    r.delete(id);\n\n    setKnownIds(k);\n    setReviewIds(r);\n\n    const nextIndex = Math.min(cards.length - 1, index + 1);\n    setIndex(nextIndex);\n    setFlipped(false);\n\n    persist(nextIndex, k, r);\n  }\n\n  function markReview() {\n    const id = cards[index]?.id;\n    if (!id) return;\n\n    const k = new Set(knownIds);\n    const r = new Set(reviewIds);\n    r.add(id);\n    k.delete(id);\n\n    setKnownIds(k);\n    setReviewIds(r);\n\n    const nextIndex = Math.min(cards.length - 1, index + 1);\n    setIndex(nextIndex);\n    setFlipped(false);\n\n    persist(nextIndex, k, r);\n  }\n\n  const total = cards.length;\n  const done = knownIds.size + reviewIds.size;\n  const pct = total > 0 ? Math.round((done / total) * 100) : 0;\n\n  if (loading) {\n    return (\n      <section className=\"w-full\">\n        <div className=\"rounded-2xl border border-[#1A1A1A] bg-[#0D0D0D] p-6 text-gray-300\">\n          Carregando flashcards...\n        </div>\n      </section>\n    );\n  }\n\n  if (error) {\n    return (\n      <section className=\"w-full\">\n        <div className=\"rounded-2xl border border-[#1A1A1A] bg-[#0D0D0D] p-6 text-red-300\">\n          {error}\n        </div>\n      </section>\n    );\n  }\n\n  if (!total) {\n    return (\n      <section className=\"w-full\">\n        <div className=\"rounded-2xl border border-[#1A1A1A] bg-[#0D0D0D] p-6 text-gray-300\">\n          Nenhum flashcard encontrado neste material.\n        </div>\n      </section>\n    );\n  }\n\n  const card = cards[index];\n\n  return (\n    <section className=\"w-full\">\n      <div className=\"mb-5 flex flex-col gap-3\">\n        <div className=\"flex items-end justify-between gap-3\">\n          <div>\n            <div className=\"text-2xl font-bold text-white\">FlashCards</div>\n            <div className=\"text-sm text-gray-400\">\n              {material?.topic || \"Material\"} ‚Ä¢ {done}/{total} estudados\n            </div>\n          </div>\n\n          <div className=\"text-sm text-gray-400\">{pct}%</div>\n        </div>\n\n        {/* Barra de progresso */}\n        <div className=\"h-2 w-full rounded-full bg-[#1A1A1A] overflow-hidden\">\n          <div\n            className=\"h-full bg-[#00FF8B]\"\n            style={{ width: `${pct}%` }}\n          />\n        </div>\n\n        {/* Contadores */}\n        <div className=\"grid grid-cols-2 gap-3\">\n          <div className=\"rounded-2xl border border-[#1A1A1A] bg-[#0D0D0D] p-4\">\n            <div className=\"text-xs text-gray-400\">Conhecidos</div>\n            <div className=\"text-2xl font-semibold text-white\">{knownIds.size}</div>\n          </div>\n          <div className=\"rounded-2xl border border-[#1A1A1A] bg-[#0D0D0D] p-4\">\n            <div className=\"text-xs text-gray-400\">Para revisar</div>\n            <div className=\"text-2xl font-semibold text-white\">{reviewIds.size}</div>\n          </div>\n        </div>\n      </div>\n\n      {/* Card (flip) */}\n      <div className=\"rounded-2xl border border-[#1A1A1A] bg-[#0D0D0D] p-5\">\n        <div className=\"mb-4 flex items-center justify-between text-sm text-gray-400\">\n          <span>\n            Pergunta {index + 1}/{total}\n          </span>\n          <button\n            onClick={() => setFlipped((v) => !v)}\n            className=\"rounded-lg border border-[#1A1A1A] px-3 py-1 hover:bg-[#1A1A1A]\"\n          >\n            {flipped ? \"Ver pergunta\" : \"Ver resposta\"}\n          </button>\n        </div>\n\n        <div\n          className=\"relative w-full\"\n          style={{ perspective: 1200 }}\n        >\n          <button\n            type=\"button\"\n            onClick={() => setFlipped((v) => !v)}\n            className=\"w-full text-left\"\n            aria-label=\"Virar flashcard\"\n          >\n            <div\n              className={cn(\n                \"relative w-full rounded-2xl border border-[#00FF8B]/25 bg-[#0D0D0D] p-6 transition-transform duration-500\",\n                \"shadow-[0_0_0_1px_rgba(0,255,139,0.08)]\",\n              )}\n              style={{\n                transformStyle: \"preserve-3d\",\n                transform: flipped ? \"rotateY(180deg)\" : \"rotateY(0deg)\",\n                minHeight: 220,\n              }}\n            >\n              {/* Frente */}\n              <div\n                className=\"absolute inset-0 p-6\"\n                style={{ backfaceVisibility: \"hidden\" }}\n              >\n                <div className=\"text-xs text-[#00FF8B] font-semibold\">PERGUNTA</div>\n                <div className=\"mt-3 text-lg sm:text-xl font-semibold text-white\">\n                  {card?.question}\n                </div>\n                <div className=\"mt-6 text-sm text-gray-400\">\n                  Clique no card para virar.\n                </div>\n              </div>\n\n              {/* Verso */}\n              <div\n                className=\"absolute inset-0 p-6\"\n                style={{\n                  backfaceVisibility: \"hidden\",\n                  transform: \"rotateY(180deg)\",\n                }}\n              >\n                <div className=\"text-xs text-[#00FF8B] font-semibold\">RESPOSTA</div>\n                <div className=\"mt-3 text-base sm:text-lg text-gray-100 whitespace-pre-wrap\">\n                  {card?.answer}\n                </div>\n                <div className=\"mt-6 text-sm text-gray-400\">\n                  Clique no card para voltar.\n                </div>\n              </div>\n            </div>\n          </button>\n        </div>\n\n        {/* A√ß√µes */}\n        <div className=\"mt-5 flex flex-col sm:flex-row items-center justify-between gap-3\">\n          <button\n            onClick={prev}\n            disabled={index === 0}\n            className=\"w-full sm:w-auto inline-flex items-center justify-center gap-2 rounded-xl border border-[#1A1A1A] px-4 py-2 text-sm text-gray-300 disabled:opacity-40 hover:bg-[#1A1A1A]\"\n          >\n            <ChevronLeft className=\"w-4 h-4\" />\n            Anterior\n          </button>\n\n          <div className=\"flex w-full sm:w-auto gap-2\">\n            <button\n              onClick={markReview}\n              className=\"flex-1 sm:flex-none inline-flex items-center justify-center gap-2 rounded-xl bg-red-600/15 border border-red-500/30 px-4 py-2 text-sm font-semibold text-red-200 hover:bg-red-600/20\"\n            >\n              <XCircle className=\"w-4 h-4\" />\n              N√£o sei\n            </button>\n\n            <button\n              onClick={markKnown}\n              className=\"flex-1 sm:flex-none inline-flex items-center justify-center gap-2 rounded-xl bg-[#00FF8B] px-4 py-2 text-sm font-semibold text-[#0D0D0D] hover:opacity-90\"\n            >\n              <CheckCircle2 className=\"w-4 h-4\" />\n              Sei\n            </button>\n          </div>\n\n          <button\n            onClick={next}\n            disabled={index >= total - 1}\n            className=\"w-full sm:w-auto inline-flex items-center justify-center gap-2 rounded-xl border border-[#1A1A1A] px-4 py-2 text-sm text-gray-300 disabled:opacity-40 hover:bg-[#1A1A1A]\"\n          >\n            Pr√≥ximo\n            <ChevronRight className=\"w-4 h-4\" />\n          </button>\n        </div>\n      </div>\n    </section>\n  );\n}\n"],"names":[],"mappings":";;;;AAEA;AACA;AAAA;AAAA;AAAA;AACA;AAJA;;;;;AAsBA,SAAS,GAAG,GAAG,CAA2C;IACxD,OAAO,EAAE,MAAM,CAAC,SAAS,IAAI,CAAC;AAChC;AAEA,eAAe;IACb,MAAM,MAAM,MAAM,MAAM,yBAAyB;QAAE,QAAQ;IAAM;IACjE,MAAM,OAAO,MAAM,IAAI,IAAI;IAE3B,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,MAAM,SAAS,OAAO;IACtC,MAAM,SAAS,MAAM;IACrB,IAAI,CAAC,QAAQ,OAAO;IAEpB,oDAAoD;IACpD,MAAM,UAAU,QAAQ,QAAQ,OAAO,OAAO,IAAI,KAAK,WAAW,OAAO,IAAI,GAAG;IAChF,IAAI,CAAC,SAAS,OAAO;IAErB,MAAM,WAAqB;QACzB,GAAG,OAAO;QACV,YAAY,OAAO,EAAE;QACrB,OAAO,QAAQ,KAAK,IAAI,OAAO,KAAK,IAAI;IAC1C;IAEA,uDAAuD;IACvD,IAAI;QACF,aAAa,OAAO,CAAC,8BAA8B,KAAK,SAAS,CAAC;IACpE,EAAE,OAAM,CAAC;IAET,OAAO;AACT;AAEA,eAAe;IACb,IAAI;QACF,MAAM,MAAM,MAAM,MAAM;QACxB,MAAM,OAAO,MAAM,IAAI,IAAI;QAC3B,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,MAAM,SAAS,OAAO;QACtC,OAAO,MAAM,MAAM,MAAM;IAC3B,EAAE,OAAM;QACN,OAAO;IACT;AACF;AAEe,SAAS,kBAAkB,EAAE,IAAI,EAAS;IACvD,MAAM,CAAC,UAAU,YAAY,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAmB,QAAQ;IAClE,MAAM,CAAC,SAAS,WAAW,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAW,CAAC;IACjD,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAiB;IAElD,MAAM,CAAC,QAAQ,UAAU,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAiB;IAEpD,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAU;IAC3C,MAAM,CAAC,SAAS,WAAW,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAW;IAChD,MAAM,CAAC,UAAU,YAAY,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAe,IAAI;IAC1D,MAAM,CAAC,WAAW,aAAa,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAe,IAAI;IAE5D,0CAA0C;IAC1C,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,YAAY,IAAI,CAAC;IACnB,GAAG,EAAE;IAEL,4CAA4C;IAC5C,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,IAAI,QAAQ;QAEZ,eAAe;YACb,IAAI,MAAM;gBACR,YAAY;gBACZ,WAAW;gBACX;YACF;YAEA,WAAW;YACX,MAAM,SAAS,MAAM;YACrB,IAAI,CAAC,OAAO;YAEZ,IAAI,CAAC,QAAQ;gBACX,SAAS;gBACT,YAAY;YACd,OAAO;gBACL,SAAS;gBACT,YAAY;YACd;YAEA,WAAW;QACb;QAEA;QACA,OAAO;YACL,QAAQ;QACV;IACF,GAAG;QAAC;KAAK;IAET,MAAM,QAAQ,CAAA,GAAA,qMAAA,CAAA,UAAO,AAAD,EAAE;QACpB,MAAM,OAAO,UAAU,cAAc,EAAE;QACvC,OAAO,MAAM,OAAO,CAAC,QAAQ,OAAO,EAAE;IACxC,GAAG;QAAC;KAAS;IAEb,MAAM,aAAa,UAAU,cAAc;IAC3C,MAAM,cAAc,CAAA,GAAA,qMAAA,CAAA,UAAO,AAAD,EAAE;QAC1B,sDAAsD;QACtD,OAAO,CAAA,GAAA,gIAAA,CAAA,kBAAe,AAAD,EAAE,UAAU,MAAM;IACzC,GAAG;QAAC;QAAQ;KAAW;IAEvB,0CAA0C;IAC1C,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,IAAI,CAAC,MAAM,MAAM,EAAE;QAEnB,MAAM,IAAI,CAAA,GAAA,gIAAA,CAAA,eAAY,AAAD,EAAE;QACvB,IAAI,GAAG;YACL,SAAS,KAAK,GAAG,CAAC,EAAE,YAAY,IAAI,GAAG,KAAK,GAAG,CAAC,GAAG,MAAM,MAAM,GAAG;YAClE,YAAY,IAAI,IAAI,EAAE,QAAQ,IAAI,EAAE;YACpC,aAAa,IAAI,IAAI,EAAE,SAAS,IAAI,EAAE;QACxC,OAAO;YACL,SAAS;YACT,YAAY,IAAI;YAChB,aAAa,IAAI;QACnB;QAEA,mCAAmC;QACnC,MAAM,QAAQ,CAAA,GAAA,gIAAA,CAAA,oBAAiB,AAAD,EAAE,CAAC;YAC/B,IAAI,QAAQ,aAAa;YACzB,MAAM,OAAO,CAAA,GAAA,gIAAA,CAAA,eAAY,AAAD,EAAE;YAC1B,IAAI,CAAC,MAAM;YAEX,SAAS,KAAK,GAAG,CAAC,KAAK,YAAY,IAAI,GAAG,KAAK,GAAG,CAAC,GAAG,MAAM,MAAM,GAAG;YACrE,YAAY,IAAI,IAAI,KAAK,QAAQ,IAAI,EAAE;YACvC,aAAa,IAAI,IAAI,KAAK,SAAS,IAAI,EAAE;QAC3C;QAEA,OAAO,IAAM;IACf,GAAG;QAAC,MAAM,MAAM;QAAE;KAAY;IAE9B,SAAS,QAAQ,SAAiB,EAAE,SAAsB,EAAE,UAAuB;QACjF,CAAA,GAAA,gIAAA,CAAA,eAAY,AAAD,EAAE,aAAa;YACxB,cAAc;YACd,UAAU,MAAM,IAAI,CAAC;YACrB,WAAW,MAAM,IAAI,CAAC;YACtB,WAAW,KAAK,GAAG;QACrB;IACF;IAEA,SAAS;QACP,MAAM,OAAO,KAAK,GAAG,CAAC,GAAG,QAAQ;QACjC,SAAS;QACT,WAAW;QACX,QAAQ,MAAM,UAAU;IAC1B;IAEA,SAAS;QACP,MAAM,OAAO,KAAK,GAAG,CAAC,MAAM,MAAM,GAAG,GAAG,QAAQ;QAChD,SAAS;QACT,WAAW;QACX,QAAQ,MAAM,UAAU;IAC1B;IAEA,SAAS;QACP,MAAM,KAAK,KAAK,CAAC,MAAM,EAAE;QACzB,IAAI,CAAC,IAAI;QAET,MAAM,IAAI,IAAI,IAAI;QAClB,MAAM,IAAI,IAAI,IAAI;QAClB,EAAE,GAAG,CAAC;QACN,EAAE,MAAM,CAAC;QAET,YAAY;QACZ,aAAa;QAEb,MAAM,YAAY,KAAK,GAAG,CAAC,MAAM,MAAM,GAAG,GAAG,QAAQ;QACrD,SAAS;QACT,WAAW;QAEX,QAAQ,WAAW,GAAG;IACxB;IAEA,SAAS;QACP,MAAM,KAAK,KAAK,CAAC,MAAM,EAAE;QACzB,IAAI,CAAC,IAAI;QAET,MAAM,IAAI,IAAI,IAAI;QAClB,MAAM,IAAI,IAAI,IAAI;QAClB,EAAE,GAAG,CAAC;QACN,EAAE,MAAM,CAAC;QAET,YAAY;QACZ,aAAa;QAEb,MAAM,YAAY,KAAK,GAAG,CAAC,MAAM,MAAM,GAAG,GAAG,QAAQ;QACrD,SAAS;QACT,WAAW;QAEX,QAAQ,WAAW,GAAG;IACxB;IAEA,MAAM,QAAQ,MAAM,MAAM;IAC1B,MAAM,OAAO,SAAS,IAAI,GAAG,UAAU,IAAI;IAC3C,MAAM,MAAM,QAAQ,IAAI,KAAK,KAAK,CAAC,AAAC,OAAO,QAAS,OAAO;IAE3D,IAAI,SAAS;QACX,qBACE,8OAAC;YAAQ,WAAU;sBACjB,cAAA,8OAAC;gBAAI,WAAU;0BAAqE;;;;;;;;;;;IAK1F;IAEA,IAAI,OAAO;QACT,qBACE,8OAAC;YAAQ,WAAU;sBACjB,cAAA,8OAAC;gBAAI,WAAU;0BACZ;;;;;;;;;;;IAIT;IAEA,IAAI,CAAC,OAAO;QACV,qBACE,8OAAC;YAAQ,WAAU;sBACjB,cAAA,8OAAC;gBAAI,WAAU;0BAAqE;;;;;;;;;;;IAK1F;IAEA,MAAM,OAAO,KAAK,CAAC,MAAM;IAEzB,qBACE,8OAAC;QAAQ,WAAU;;0BACjB,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;;kDACC,8OAAC;wCAAI,WAAU;kDAAgC;;;;;;kDAC/C,8OAAC;wCAAI,WAAU;;4CACZ,UAAU,SAAS;4CAAW;4CAAI;4CAAK;4CAAE;4CAAM;;;;;;;;;;;;;0CAIpD,8OAAC;gCAAI,WAAU;;oCAAyB;oCAAI;;;;;;;;;;;;;kCAI9C,8OAAC;wBAAI,WAAU;kCACb,cAAA,8OAAC;4BACC,WAAU;4BACV,OAAO;gCAAE,OAAO,GAAG,IAAI,CAAC,CAAC;4BAAC;;;;;;;;;;;kCAK9B,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAI,WAAU;;kDACb,8OAAC;wCAAI,WAAU;kDAAwB;;;;;;kDACvC,8OAAC;wCAAI,WAAU;kDAAqC,SAAS,IAAI;;;;;;;;;;;;0CAEnE,8OAAC;gCAAI,WAAU;;kDACb,8OAAC;wCAAI,WAAU;kDAAwB;;;;;;kDACvC,8OAAC;wCAAI,WAAU;kDAAqC,UAAU,IAAI;;;;;;;;;;;;;;;;;;;;;;;;0BAMxE,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;;oCAAK;oCACM,QAAQ;oCAAE;oCAAE;;;;;;;0CAExB,8OAAC;gCACC,SAAS,IAAM,WAAW,CAAC,IAAM,CAAC;gCAClC,WAAU;0CAET,UAAU,iBAAiB;;;;;;;;;;;;kCAIhC,8OAAC;wBACC,WAAU;wBACV,OAAO;4BAAE,aAAa;wBAAK;kCAE3B,cAAA,8OAAC;4BACC,MAAK;4BACL,SAAS,IAAM,WAAW,CAAC,IAAM,CAAC;4BAClC,WAAU;4BACV,cAAW;sCAEX,cAAA,8OAAC;gCACC,WAAW,GACT,6GACA;gCAEF,OAAO;oCACL,gBAAgB;oCAChB,WAAW,UAAU,oBAAoB;oCACzC,WAAW;gCACb;;kDAGA,8OAAC;wCACC,WAAU;wCACV,OAAO;4CAAE,oBAAoB;wCAAS;;0DAEtC,8OAAC;gDAAI,WAAU;0DAAuC;;;;;;0DACtD,8OAAC;gDAAI,WAAU;0DACZ,MAAM;;;;;;0DAET,8OAAC;gDAAI,WAAU;0DAA6B;;;;;;;;;;;;kDAM9C,8OAAC;wCACC,WAAU;wCACV,OAAO;4CACL,oBAAoB;4CACpB,WAAW;wCACb;;0DAEA,8OAAC;gDAAI,WAAU;0DAAuC;;;;;;0DACtD,8OAAC;gDAAI,WAAU;0DACZ,MAAM;;;;;;0DAET,8OAAC;gDAAI,WAAU;0DAA6B;;;;;;;;;;;;;;;;;;;;;;;;;;;;kCASpD,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCACC,SAAS;gCACT,UAAU,UAAU;gCACpB,WAAU;;kDAEV,8OAAC,oNAAA,CAAA,cAAW;wCAAC,WAAU;;;;;;oCAAY;;;;;;;0CAIrC,8OAAC;gCAAI,WAAU;;kDACb,8OAAC;wCACC,SAAS;wCACT,WAAU;;0DAEV,8OAAC,4MAAA,CAAA,UAAO;gDAAC,WAAU;;;;;;4CAAY;;;;;;;kDAIjC,8OAAC;wCACC,SAAS;wCACT,WAAU;;0DAEV,8OAAC,qNAAA,CAAA,eAAY;gDAAC,WAAU;;;;;;4CAAY;;;;;;;;;;;;;0CAKxC,8OAAC;gCACC,SAAS;gCACT,UAAU,SAAS,QAAQ;gCAC3B,WAAU;;oCACX;kDAEC,8OAAC,sNAAA,CAAA,eAAY;wCAAC,WAAU;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAMpC","debugId":null}},
    {"offset": {"line": 1317, "column": 0}, "map": {"version":3,"sources":["file:///Users/ruangalvao/ProjetosVS/Projetos%20Pessoais/stud.ai-app/app-stud.ai/src/app/components/SummarySection.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useMemo, useState } from \"react\";\nimport { Sparkles } from \"lucide-react\";\n\ntype Props = {\n  data?: any | null;\n};\n\ntype Material = {\n  materialId?: string;\n  topic?: string;\n  flashcards?: any[];\n  summary?: {\n    title?: string;\n    mainTopics?: Array<{ id: number; title: string; content: string; icon?: string }>;\n    keyPoints?: string[];\n    style?: \"bullet\" | \"explained\";\n  };\n};\n\nfunction cn(...s: Array<string | false | null | undefined>) {\n  return s.filter(Boolean).join(\" \");\n}\n\nasync function fetchLatestMaterial(): Promise<Material | null> {\n  const res = await fetch(\"/api/materials/latest\", { method: \"GET\" });\n  const json = await res.json();\n\n  if (!res.ok || !json?.success) return null;\n  const latest = json?.data;\n  if (!latest) return null;\n\n  const payload = latest?.data && typeof latest.data === \"object\" ? latest.data : null;\n  if (!payload) return null;\n\n  const material: Material = {\n    ...payload,\n    materialId: latest.id,\n    topic: payload.topic || latest.topic || \"Material\",\n  };\n\n  try {\n    localStorage.setItem(\"studai:lastMaterialData:v1\", JSON.stringify(material));\n  } catch {}\n\n  return material;\n}\n\nexport default function SummarySection({ data }: Props) {\n  const [material, setMaterial] = useState<Material | null>(data || null);\n  const [loading, setLoading] = useState<boolean>(!data);\n  const [error, setError] = useState<string | null>(null);\n\n  useEffect(() => {\n    let alive = true;\n\n    async function load() {\n      if (data) {\n        setMaterial(data);\n        setLoading(false);\n        return;\n      }\n\n      setLoading(true);\n      const latest = await fetchLatestMaterial();\n      if (!alive) return;\n\n      if (!latest) {\n        setError(\"Nenhum material encontrado. Fa√ßa um upload primeiro.\");\n        setMaterial(null);\n      } else {\n        setError(null);\n        setMaterial(latest);\n      }\n\n      setLoading(false);\n    }\n\n    load();\n    return () => {\n      alive = false;\n    };\n  }, [data]);\n\n  const summary = material?.summary || null;\n\n  const title = useMemo(() => {\n    if (summary?.title) return summary.title;\n    if (material?.topic) return `${material.topic} - Resumo`;\n    return \"Resumo\";\n  }, [summary?.title, material?.topic]);\n\n  const mainTopics = useMemo(() => {\n    const list = summary?.mainTopics || [];\n    return Array.isArray(list) ? list : [];\n  }, [summary?.mainTopics]);\n\n  const keyPoints = useMemo(() => {\n    const list = summary?.keyPoints || [];\n    return Array.isArray(list) ? list : [];\n  }, [summary?.keyPoints]);\n\n  if (loading) {\n    return (\n      <section className=\"w-full\">\n        <div className=\"rounded-2xl border border-[#1A1A1A] bg-[#0D0D0D] p-6 text-gray-300\">\n          Carregando resumo...\n        </div>\n      </section>\n    );\n  }\n\n  if (error) {\n    return (\n      <section className=\"w-full\">\n        <div className=\"rounded-2xl border border-[#1A1A1A] bg-[#0D0D0D] p-6 text-red-300\">\n          {error}\n        </div>\n      </section>\n    );\n  }\n\n  if (!summary) {\n    return (\n      <section className=\"w-full\">\n        <div className=\"rounded-2xl border border-[#1A1A1A] bg-[#0D0D0D] p-6 text-gray-300\">\n          Nenhum resumo encontrado neste material.\n        </div>\n      </section>\n    );\n  }\n\n  return (\n    <section className=\"w-full\">\n      <div className=\"mb-6 flex items-start justify-between gap-3\">\n        <div>\n          <div className=\"inline-flex items-center gap-2 rounded-full border border-[#00FF8B]/25 bg-[#00FF8B]/10 px-3 py-1 text-xs font-semibold text-[#00FF8B]\">\n            <Sparkles className=\"w-4 h-4\" />\n            Gerado por IA\n          </div>\n\n          <h2 className=\"mt-3 text-2xl sm:text-3xl font-bold text-white\">\n            {title}\n          </h2>\n\n          {material?.materialId ? (\n            <div className=\"mt-2 text-[11px] text-gray-500 break-all\">\n              materialId: <span className=\"font-mono\">{material.materialId}</span>\n            </div>\n          ) : null}\n        </div>\n      </div>\n\n      {/* Main topics */}\n      <div className=\"space-y-4\">\n        {mainTopics.map((t) => (\n          <div\n            key={t.id}\n            className={cn(\n              \"rounded-2xl border border-[#1A1A1A] bg-[#0D0D0D] p-5\",\n              \"shadow-[0_0_0_1px_rgba(0,255,139,0.06)]\"\n            )}\n          >\n            <div className=\"flex items-start gap-3\">\n              <div className=\"flex h-10 w-10 items-center justify-center rounded-xl bg-[#00FF8B]/10 border border-[#00FF8B]/15\">\n                <span className=\"text-lg\">{t.icon || \"üìå\"}</span>\n              </div>\n\n              <div className=\"flex-1 min-w-0\">\n                <div className=\"text-xs font-semibold text-[#00FF8B]\">\n                  T√ìPICO {t.id}\n                </div>\n                <div className=\"mt-1 text-lg font-semibold text-white\">\n                  {t.title}\n                </div>\n                <div className=\"mt-2 text-sm text-gray-200 whitespace-pre-wrap leading-relaxed\">\n                  {t.content}\n                </div>\n              </div>\n            </div>\n          </div>\n        ))}\n      </div>\n\n      {/* Key points */}\n      {keyPoints.length ? (\n        <div className=\"mt-6 rounded-2xl border border-[#1A1A1A] bg-[#0D0D0D] p-5\">\n          <div className=\"text-sm font-semibold text-white mb-3\">Pontos-chave</div>\n          <ul className=\"space-y-2\">\n            {keyPoints.map((k, i) => (\n              <li key={i} className=\"text-sm text-gray-200 flex gap-2\">\n                <span className=\"text-[#00FF8B]\">‚Ä¢</span>\n                <span className=\"whitespace-pre-wrap\">{k}</span>\n              </li>\n            ))}\n          </ul>\n        </div>\n      ) : null}\n    </section>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1648, "column": 0}, "map": {"version":3,"sources":["file:///Users/ruangalvao/ProjetosVS/Projetos%20Pessoais/stud.ai-app/app-stud.ai/src/app/components/ProgressSection.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useMemo, useState } from \"react\";\nimport { loadMaterial, onMaterialUpdated } from \"@/lib/studyMaterialStore\";\nimport { makeProgressKey, loadProgress, onProgressUpdated, clearProgress } from \"@/lib/studyProgressStore\";\n\nfunction cn(...s: Array<string | false | null | undefined>) {\n  return s.filter(Boolean).join(\" \");\n}\nfunction pct(n: number) {\n  return Math.max(0, Math.min(100, Math.round(n)));\n}\nfunction uniq(arr: number[]) {\n  return Array.from(new Set(arr));\n}\n\nexport default function ProgressSection() {\n  const [topic, setTopic] = useState<string>(\"\");\n  const [totalCards, setTotalCards] = useState<number>(0);\n  const [progressKey, setProgressKey] = useState<string>(\"\");\n\n  const [knownIds, setKnownIds] = useState<number[]>([]);\n  const [reviewIds, setReviewIds] = useState<number[]>([]);\n  const [updatedAt, setUpdatedAt] = useState<string | null>(null);\n\n  useEffect(() => {\n    const refresh = () => {\n      const m = loadMaterial();\n      const count = m?.flashcards?.length ?? 0;\n\n      setTopic(m?.topic ?? \"\");\n      setTotalCards(count);\n\n      const key = makeProgressKey(m?.topic ?? \"deck\", count);\n      setProgressKey(key);\n\n      const p = loadProgress(key);\n      setKnownIds(p?.knownIds ?? []);\n      setReviewIds(p?.reviewIds ?? []);\n      setUpdatedAt(p?.updatedAt ?? null);\n    };\n\n    refresh();\n    const off1 = onMaterialUpdated(refresh);\n    const off2 = onProgressUpdated(refresh);\n    return () => {\n      off1?.();\n      off2?.();\n    };\n  }, []);\n\n  const known = useMemo(() => new Set(knownIds), [knownIds]);\n  const review = useMemo(() => new Set(reviewIds), [reviewIds]);\n\n  const doneCount = uniq([...knownIds, ...reviewIds]).length;\n  const donePct = totalCards ? pct((doneCount / totalCards) * 100) : 0;\n\n  const knownCount = known.size;\n  const reviewCount = review.size;\n  const remainingCount = Math.max(0, totalCards - doneCount);\n\n  if (!totalCards) {\n    return (\n      <section className=\"w-full max-w-5xl mx-auto mt-10 rounded-2xl border border-white/10 bg-white/5 p-8 text-center\">\n        <h2 className=\"text-2xl font-semibold\">Progresso</h2>\n        <p className=\"mt-2 opacity-70\">Gere um material (upload) para acompanhar seu progresso.</p>\n      </section>\n    );\n  }\n\n  return (\n    <section className=\"w-full max-w-5xl mx-auto mt-10\">\n      {/* Header premium */}\n      <div className=\"rounded-2xl border border-white/10 bg-white/5 p-6\">\n        <div className=\"flex flex-col md:flex-row md:items-start md:justify-between gap-4\">\n          <div>\n            <div className=\"text-xs opacity-70\">Progresso</div>\n            <h2 className=\"text-2xl font-semibold mt-1\">{topic || \"Seu deck\"}</h2>\n            <div className=\"mt-2 text-sm opacity-70\">\n              Acompanhe seu avan√ßo no mesmo padr√£o visual do Flashcards.\n            </div>\n          </div>\n\n          <div className=\"flex flex-wrap gap-2\">\n            <Chip tone=\"green\" label={`‚úÖ Conhecidos: ${knownCount}`} />\n            <Chip tone=\"red\" label={`‚ùå Revisar: ${reviewCount}`} />\n            <Chip tone=\"neutral\" label={`‚è≥ Restantes: ${remainingCount}`} />\n          </div>\n        </div>\n\n        {/* Progress bar */}\n        <div className=\"mt-5\">\n          <div className=\"flex items-center justify-between text-xs opacity-70\">\n            <span>Progresso geral</span>\n            <span>{donePct}%</span>\n          </div>\n          <div className=\"mt-2 h-2 w-full rounded-full bg-black/30 overflow-hidden border border-white/10\">\n            <div className=\"h-full rounded-full bg-[#00FF8B]/70\" style={{ width: `${donePct}%` }} />\n          </div>\n\n          <div className=\"mt-3 text-xs opacity-60\">\n            {updatedAt ? `√öltima atualiza√ß√£o: ${new Date(updatedAt).toLocaleString()}` : \"Ainda sem atualiza√ß√µes\"}\n          </div>\n        </div>\n\n        {/* Action row */}\n        <div className=\"mt-5 flex flex-col sm:flex-row items-center justify-between gap-3\">\n          <div className=\"text-sm opacity-70\">\n            Total de cards: <b className=\"opacity-90\">{totalCards}</b> ‚Ä¢ Conclu√≠dos:{\" \"}\n            <b className=\"opacity-90\">{doneCount}</b>\n          </div>\n\n          <button\n            onClick={() => {\n              if (!progressKey) return;\n              clearProgress(progressKey);\n            }}\n            className=\"rounded-2xl border border-white/10 bg-white/5 px-5 py-3 text-sm hover:bg-white/10\"\n          >\n            Limpar progresso deste deck\n          </button>\n        </div>\n      </div>\n\n      {/* Breakdown premium */}\n      <div className=\"mt-6 grid grid-cols-1 md:grid-cols-3 gap-4\">\n        <StatCard title=\"Conhecidos\" value={knownCount} subtitle=\"Voc√™ marcou como acertei\" tone=\"green\" />\n        <StatCard title=\"Revisar\" value={reviewCount} subtitle=\"Precisa refor√ßar\" tone=\"red\" />\n        <StatCard title=\"Restantes\" value={remainingCount} subtitle=\"Ainda n√£o avaliados\" tone=\"neutral\" />\n      </div>\n\n      {/* Dica */}\n      <div className=\"mt-6 rounded-2xl border border-white/10 bg-white/5 p-6\">\n        <div className=\"font-semibold\">Dica de estudo</div>\n        <p className=\"mt-2 opacity-70 leading-relaxed\">\n          Use sess√µes curtas (10‚Äì20 cards) e marque ‚ÄúRevisar‚Äù sem medo. O ideal √© voltar nesses cards no dia seguinte.\n        </p>\n      </div>\n    </section>\n  );\n}\n\nfunction Chip({ label, tone }: { label: string; tone: \"green\" | \"red\" | \"neutral\" }) {\n  const cls =\n    tone === \"green\"\n      ? \"border-[#00FF8B]/25 bg-[#00FF8B]/10 text-[#00FF8B]\"\n      : tone === \"red\"\n      ? \"border-red-500/25 bg-red-500/10 text-red-200\"\n      : \"border-white/10 bg-black/20 text-white/70\";\n  return <span className={cn(\"text-xs px-3 py-1 rounded-full border\", cls)}>{label}</span>;\n}\n\nfunction StatCard({\n  title,\n  value,\n  subtitle,\n  tone,\n}: {\n  title: string;\n  value: number;\n  subtitle: string;\n  tone: \"green\" | \"red\" | \"neutral\";\n}) {\n  const border =\n    tone === \"green\"\n      ? \"border-[#00FF8B]/20\"\n      : tone === \"red\"\n      ? \"border-red-500/20\"\n      : \"border-white/10\";\n\n  const bg =\n    tone === \"green\"\n      ? \"bg-[#00FF8B]/10\"\n      : tone === \"red\"\n      ? \"bg-red-500/10\"\n      : \"bg-black/20\";\n\n  const text =\n    tone === \"green\" ? \"text-[#00FF8B]\" : tone === \"red\" ? \"text-red-200\" : \"text-white/80\";\n\n  return (\n    <div className={cn(\"rounded-2xl border bg-white/5 p-6\", border)}>\n      <div className=\"text-xs opacity-70\">{title}</div>\n      <div className={cn(\"mt-2 text-3xl font-bold\", text)}>{value}</div>\n      <div className={cn(\"mt-3 rounded-xl border p-3 text-sm opacity-90\", border, bg)}>{subtitle}</div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 2081, "column": 0}, "map": {"version":3,"sources":["file:///Users/ruangalvao/ProjetosVS/Projetos%20Pessoais/stud.ai-app/app-stud.ai/src/app/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useState } from \"react\";\nimport { Upload, Sparkles, BookOpen, TrendingUp, Trophy, Users, LogOut } from \"lucide-react\";\nimport UploadSection from \"./components/UploadSection\";\nimport FlashcardsSection from \"./components/FlashcardsSection\";\nimport SummarySection from \"./components/SummarySection\";\nimport ProgressSection from \"./components/ProgressSection\";\nimport { useRouter } from \"next/navigation\";\n\ntype Section = \"upload\" | \"flashcards\" | \"summary\" | \"progress\";\n\nfunction safeParse<T>(s: string | null): T | null {\n  if (!s) return null;\n  try {\n    return JSON.parse(s) as T;\n  } catch {\n    return null;\n  }\n}\n\nexport default function Home() {\n  const router = useRouter();\n\n  const [activeSection, setActiveSection] = useState<Section>(\"upload\");\n  const [studyData, setStudyData] = useState<any>(null);\n\n  // ‚úÖ agora compat√≠vel com { success:true, user:{...} }\n  const [me, setMe] = useState<{ id: string; email: string; role?: string; name?: string } | null>(null);\n\n  // carrega √∫ltimo material salvo\n  useEffect(() => {\n    const stored = safeParse<any>(localStorage.getItem(\"studai:lastMaterialData:v1\"));\n    if (stored) setStudyData(stored);\n\n    const storageHandler = (e: StorageEvent) => {\n      if (e.key === \"studai:lastMaterialData:v1\") {\n        const latest = safeParse<any>(e.newValue);\n        setStudyData(latest);\n      }\n    };\n    window.addEventListener(\"storage\", storageHandler);\n    return () => window.removeEventListener(\"storage\", storageHandler);\n  }, []);\n\n  // ‚úÖ pega usu√°rio logado\n  useEffect(() => {\n    let alive = true;\n\n    async function loadMe() {\n      try {\n        const res = await fetch(\"/api/auth/me\", { cache: \"no-store\" });\n        const json = await res.json();\n        if (!alive) return;\n\n        const u = json?.user || json?.data || null; // <- aceita os dois formatos\n        if (res.ok && json?.success && u?.id) setMe(u);\n        else setMe(null);\n      } catch {\n        if (!alive) return;\n        setMe(null);\n      }\n    }\n\n    loadMe();\n    return () => {\n      alive = false;\n    };\n  }, []);\n\n  async function logout() {\n    try {\n      await fetch(\"/api/auth/logout\", { method: \"POST\" });\n    } catch {}\n    setMe(null);\n    router.push(\"/login\");\n  }\n\n  return (\n    <div className=\"min-h-screen bg-[#0D0D0D]\">\n      {/* Header */}\n      <header className=\"border-b border-[#1A1A1A] backdrop-blur-sm bg-[#0D0D0D]/80 sticky top-0 z-50\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <div className=\"flex items-center justify-between h-16\">\n            <div className=\"flex items-center gap-2\">\n              <div className=\"w-8 h-8 rounded-lg bg-gradient-to-br from-[#00FF8B] to-[#007B5F] flex items-center justify-center\">\n                <Sparkles className=\"w-5 h-5 text-[#0D0D0D]\" />\n              </div>\n              <h1 className=\"text-xl sm:text-2xl font-bold bg-gradient-to-r from-[#00FF8B] to-[#007B5F] bg-clip-text text-transparent\">\n                Stud.ai\n              </h1>\n            </div>\n\n            {/* Desktop Navigation */}\n            <nav className=\"hidden md:flex items-center gap-1\">\n              <NavButton\n                icon={Upload}\n                label=\"Upload\"\n                active={activeSection === \"upload\"}\n                onClick={() => setActiveSection(\"upload\")}\n              />\n              <NavButton\n                icon={BookOpen}\n                label=\"FlashCards\"\n                active={activeSection === \"flashcards\"}\n                onClick={() => setActiveSection(\"flashcards\")}\n              />\n              <NavButton\n                icon={Sparkles}\n                label=\"Resumos\"\n                active={activeSection === \"summary\"}\n                onClick={() => setActiveSection(\"summary\")}\n              />\n              <NavButton\n                icon={TrendingUp}\n                label=\"Progresso\"\n                active={activeSection === \"progress\"}\n                onClick={() => setActiveSection(\"progress\")}\n              />\n            </nav>\n\n            {/* Right side */}\n            <div className=\"flex items-center gap-2\">\n              <div className=\"hidden sm:flex items-center gap-2 px-3 py-1.5 rounded-full bg-[#1A1A1A] border border-[#00FF8B]/20\">\n                <Trophy className=\"w-4 h-4 text-[#00FF8B]\" />\n                <span className=\"text-sm font-medium\">N√≠vel 5</span>\n              </div>\n\n              {/* ‚úÖ Bot√£o Sair */}\n              {me ? (\n                <button\n                  onClick={logout}\n                  className=\"inline-flex items-center gap-2 rounded-xl border border-[#1A1A1A] bg-[#0D0D0D] px-3 py-2 text-sm text-gray-200 hover:bg-[#1A1A1A]\"\n                  title=\"Sair\"\n                >\n                  <LogOut className=\"w-4 h-4 text-[#00FF8B]\" />\n                  <span className=\"hidden sm:inline\">Sair</span>\n                </button>\n              ) : null}\n            </div>\n          </div>\n\n          {/* Mobile Navigation */}\n          <div className=\"md:hidden flex items-center gap-1 pb-3 overflow-x-auto\">\n            <NavButton\n              icon={Upload}\n              label=\"Upload\"\n              active={activeSection === \"upload\"}\n              onClick={() => setActiveSection(\"upload\")}\n              mobile\n            />\n            <NavButton\n              icon={BookOpen}\n              label=\"Cards\"\n              active={activeSection === \"flashcards\"}\n              onClick={() => setActiveSection(\"flashcards\")}\n              mobile\n            />\n            <NavButton\n              icon={Sparkles}\n              label=\"Resumos\"\n              active={activeSection === \"summary\"}\n              onClick={() => setActiveSection(\"summary\")}\n              mobile\n            />\n            <NavButton\n              icon={TrendingUp}\n              label=\"Progresso\"\n              active={activeSection === \"progress\"}\n              onClick={() => setActiveSection(\"progress\")}\n              mobile\n            />\n          </div>\n        </div>\n      </header>\n\n      {/* Main */}\n      <main className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6 sm:py-8\">\n        {activeSection === \"upload\" && (\n          <UploadSection\n            onDataProcessed={setStudyData}\n            onGoFlashcards={() => setActiveSection(\"flashcards\")}\n            onGoSummary={() => setActiveSection(\"summary\")}\n          />\n        )}\n\n        {activeSection === \"flashcards\" && <FlashcardsSection data={studyData} />}\n        {activeSection === \"summary\" && <SummarySection data={studyData} />}\n        {activeSection === \"progress\" && <ProgressSection />}\n      </main>\n\n      {/* Footer */}\n      <footer className=\"border-t border-[#1A1A1A] mt-12 py-8\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <div className=\"flex flex-col sm:flex-row items-center justify-between gap-4\">\n            <div className=\"flex items-center gap-2 text-sm text-gray-400\">\n              <Users className=\"w-4 h-4 text-[#00FF8B]\" />\n              <span>+1.2k estudantes ativos hoje</span>\n            </div>\n            <div className=\"text-sm text-gray-500\">Feito com üíö para estudantes</div>\n          </div>\n        </div>\n      </footer>\n    </div>\n  );\n}\n\nfunction NavButton({\n  icon: Icon,\n  label,\n  active,\n  onClick,\n  mobile = false,\n}: {\n  icon: any;\n  label: string;\n  active: boolean;\n  onClick: () => void;\n  mobile?: boolean;\n}) {\n  return (\n    <button\n      onClick={onClick}\n      className={`\n        flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition-all duration-300\n        ${mobile ? \"text-xs whitespace-nowrap\" : \"text-sm\"}\n        ${\n          active\n            ? \"bg-[#00FF8B]/10 text-[#00FF8B] border border-[#00FF8B]/30\"\n            : \"text-gray-400 hover:text-white hover:bg-[#1A1A1A]\"\n        }\n      `}\n    >\n      <Icon className=\"w-4 h-4\" />\n      <span>{label}</span>\n    </button>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}