{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 5, "column": 0}, "map": {"version":3,"sources":["file:///Users/ruangalvao/ProjetosVS/Projetos%20Pessoais/stud.ai-app/app-stud.ai/src/lib/studyMaterialStore.ts"],"sourcesContent":["export type FlashcardDifficulty = \"easy\" | \"medium\" | \"hard\";\n\nexport type Flashcard = {\n  id: number;\n  question: string;\n  answer: string;\n  difficulty?: FlashcardDifficulty;\n  tags?: string[];\n};\n\nexport type SummaryTopic = {\n  id: number;\n  title: string;\n  content: string;\n  icon: string;\n};\n\nexport type StudySummary = {\n  title: string;\n  mainTopics: SummaryTopic[];\n  keyPoints: string[];\n};\n\nexport type StudyMaterial = {\n  topic: string;\n  tags?: string[];\n  flashcards: Flashcard[];\n  summary: StudySummary;\n  createdAt?: string;\n};\n\nconst KEY = \"studai:lastMaterial:v1\";\nconst listeners = new Set<() => void>();\n\nfunction emit() {\n  for (const fn of listeners) {\n    try {\n      fn();\n    } catch {}\n  }\n}\n\nfunction safeParse<T>(raw: string | null): T | null {\n  if (!raw) return null;\n  try {\n    return JSON.parse(raw) as T;\n  } catch {\n    return null;\n  }\n}\n\nfunction normalizeFlashcards(input: any): Flashcard[] {\n  const arr = Array.isArray(input) ? input : [];\n  const out: Flashcard[] = [];\n\n  for (let i = 0; i < arr.length; i++) {\n    const c = arr[i] || {};\n    const id = Number.isFinite(Number(c.id)) ? Number(c.id) : i + 1;\n\n    const question = typeof c.question === \"string\" ? c.question : \"\";\n    const answer = typeof c.answer === \"string\" ? c.answer : \"\";\n\n    if (!question || !answer) continue;\n\n    const d = String(c.difficulty || \"\").toLowerCase();\n    const difficulty: any = d === \"easy\" || d === \"medium\" || d === \"hard\" ? d : undefined;\n\n    const tags = Array.isArray(c.tags) ? c.tags.filter((t: any) => typeof t === \"string\") : undefined;\n\n    out.push({ id, question, answer, difficulty, tags });\n  }\n\n  // remove ids duplicados (garante unicidade)\n  const seen = new Set<number>();\n  const fixed: Flashcard[] = [];\n  for (const c of out) {\n    let id = c.id;\n    while (seen.has(id)) id += 100000; // desloca pra n√£o colidir\n    seen.add(id);\n    fixed.push({ ...c, id });\n  }\n\n  return fixed;\n}\n\nfunction normalizeSummary(input: any): StudySummary {\n  const s = input || {};\n  const title = typeof s.title === \"string\" ? s.title : \"Resumo\";\n\n  const mainTopicsRaw = Array.isArray(s.mainTopics) ? s.mainTopics : [];\n  const mainTopics: SummaryTopic[] = mainTopicsRaw\n    .map((t: any, idx: number) => ({\n      id: Number.isFinite(Number(t?.id)) ? Number(t.id) : idx + 1,\n      title: typeof t?.title === \"string\" ? t.title : `T√≥pico ${idx + 1}`,\n      content: typeof t?.content === \"string\" ? t.content : \"\",\n      icon: typeof t?.icon === \"string\" ? t.icon : \"üìå\",\n    }))\n    .filter((t: SummaryTopic) => t.title && t.content);\n\n  const keyPoints = Array.isArray(s.keyPoints)\n    ? s.keyPoints.filter((k: any) => typeof k === \"string\")\n    : [];\n\n  return { title, mainTopics, keyPoints };\n}\n\n/**\n * Aceita tanto:\n *  - payload direto (data)\n *  - resposta completa da API {success, data}\n *  - resposta aninhada {data:{success,data}}\n */\nexport function normalizeFromApi(anyJson: any): StudyMaterial | null {\n  if (!anyJson) return null;\n\n  const payload =\n    anyJson?.topic && anyJson?.flashcards ? anyJson\n    : anyJson?.data?.topic && anyJson?.data?.flashcards ? anyJson.data\n    : anyJson?.data?.data?.topic && anyJson?.data?.data?.flashcards ? anyJson.data.data\n    : null;\n\n  if (!payload) return null;\n\n  const topic = typeof payload.topic === \"string\" ? payload.topic : \"\";\n  if (!topic) return null;\n\n  const tags = Array.isArray(payload.tags) ? payload.tags.filter((t: any) => typeof t === \"string\") : [];\n\n  const flashcards = normalizeFlashcards(payload.flashcards);\n  const summary = normalizeSummary(payload.summary);\n\n  if (!flashcards.length || !summary?.mainTopics?.length) return null;\n\n  return {\n    topic,\n    tags,\n    flashcards,\n    summary,\n    createdAt: new Date().toISOString(),\n  };\n}\n\nexport function saveMaterial(material: StudyMaterial) {\n  if (typeof window === \"undefined\") return;\n  localStorage.setItem(KEY, JSON.stringify(material));\n  emit();\n}\n\nexport function loadMaterial(): StudyMaterial | null {\n  if (typeof window === \"undefined\") return null;\n  return safeParse<StudyMaterial>(localStorage.getItem(KEY));\n}\n\nexport function clearMaterial() {\n  if (typeof window === \"undefined\") return;\n  localStorage.removeItem(KEY);\n  emit();\n}\n\nexport function onMaterialUpdated(cb: () => void) {\n  listeners.add(cb);\n  return () => listeners.delete(cb);\n}\n"],"names":[],"mappings":";;;;;;;AA+BA,MAAM,MAAM;AACZ,MAAM,YAAY,IAAI;AAEtB,SAAS;IACP,KAAK,MAAM,MAAM,UAAW;QAC1B,IAAI;YACF;QACF,EAAE,OAAM,CAAC;IACX;AACF;AAEA,SAAS,UAAa,GAAkB;IACtC,IAAI,CAAC,KAAK,OAAO;IACjB,IAAI;QACF,OAAO,KAAK,KAAK,CAAC;IACpB,EAAE,OAAM;QACN,OAAO;IACT;AACF;AAEA,SAAS,oBAAoB,KAAU;IACrC,MAAM,MAAM,MAAM,OAAO,CAAC,SAAS,QAAQ,EAAE;IAC7C,MAAM,MAAmB,EAAE;IAE3B,IAAK,IAAI,IAAI,GAAG,IAAI,IAAI,MAAM,EAAE,IAAK;QACnC,MAAM,IAAI,GAAG,CAAC,EAAE,IAAI,CAAC;QACrB,MAAM,KAAK,OAAO,QAAQ,CAAC,OAAO,EAAE,EAAE,KAAK,OAAO,EAAE,EAAE,IAAI,IAAI;QAE9D,MAAM,WAAW,OAAO,EAAE,QAAQ,KAAK,WAAW,EAAE,QAAQ,GAAG;QAC/D,MAAM,SAAS,OAAO,EAAE,MAAM,KAAK,WAAW,EAAE,MAAM,GAAG;QAEzD,IAAI,CAAC,YAAY,CAAC,QAAQ;QAE1B,MAAM,IAAI,OAAO,EAAE,UAAU,IAAI,IAAI,WAAW;QAChD,MAAM,aAAkB,MAAM,UAAU,MAAM,YAAY,MAAM,SAAS,IAAI;QAE7E,MAAM,OAAO,MAAM,OAAO,CAAC,EAAE,IAAI,IAAI,EAAE,IAAI,CAAC,MAAM,CAAC,CAAC,IAAW,OAAO,MAAM,YAAY;QAExF,IAAI,IAAI,CAAC;YAAE;YAAI;YAAU;YAAQ;YAAY;QAAK;IACpD;IAEA,4CAA4C;IAC5C,MAAM,OAAO,IAAI;IACjB,MAAM,QAAqB,EAAE;IAC7B,KAAK,MAAM,KAAK,IAAK;QACnB,IAAI,KAAK,EAAE,EAAE;QACb,MAAO,KAAK,GAAG,CAAC,IAAK,MAAM,QAAQ,0BAA0B;QAC7D,KAAK,GAAG,CAAC;QACT,MAAM,IAAI,CAAC;YAAE,GAAG,CAAC;YAAE;QAAG;IACxB;IAEA,OAAO;AACT;AAEA,SAAS,iBAAiB,KAAU;IAClC,MAAM,IAAI,SAAS,CAAC;IACpB,MAAM,QAAQ,OAAO,EAAE,KAAK,KAAK,WAAW,EAAE,KAAK,GAAG;IAEtD,MAAM,gBAAgB,MAAM,OAAO,CAAC,EAAE,UAAU,IAAI,EAAE,UAAU,GAAG,EAAE;IACrE,MAAM,aAA6B,cAChC,GAAG,CAAC,CAAC,GAAQ,MAAgB,CAAC;YAC7B,IAAI,OAAO,QAAQ,CAAC,OAAO,GAAG,OAAO,OAAO,EAAE,EAAE,IAAI,MAAM;YAC1D,OAAO,OAAO,GAAG,UAAU,WAAW,EAAE,KAAK,GAAG,CAAC,OAAO,EAAE,MAAM,GAAG;YACnE,SAAS,OAAO,GAAG,YAAY,WAAW,EAAE,OAAO,GAAG;YACtD,MAAM,OAAO,GAAG,SAAS,WAAW,EAAE,IAAI,GAAG;QAC/C,CAAC,GACA,MAAM,CAAC,CAAC,IAAoB,EAAE,KAAK,IAAI,EAAE,OAAO;IAEnD,MAAM,YAAY,MAAM,OAAO,CAAC,EAAE,SAAS,IACvC,EAAE,SAAS,CAAC,MAAM,CAAC,CAAC,IAAW,OAAO,MAAM,YAC5C,EAAE;IAEN,OAAO;QAAE;QAAO;QAAY;IAAU;AACxC;AAQO,SAAS,iBAAiB,OAAY;IAC3C,IAAI,CAAC,SAAS,OAAO;IAErB,MAAM,UACJ,SAAS,SAAS,SAAS,aAAa,UACtC,SAAS,MAAM,SAAS,SAAS,MAAM,aAAa,QAAQ,IAAI,GAChE,SAAS,MAAM,MAAM,SAAS,SAAS,MAAM,MAAM,aAAa,QAAQ,IAAI,CAAC,IAAI,GACjF;IAEJ,IAAI,CAAC,SAAS,OAAO;IAErB,MAAM,QAAQ,OAAO,QAAQ,KAAK,KAAK,WAAW,QAAQ,KAAK,GAAG;IAClE,IAAI,CAAC,OAAO,OAAO;IAEnB,MAAM,OAAO,MAAM,OAAO,CAAC,QAAQ,IAAI,IAAI,QAAQ,IAAI,CAAC,MAAM,CAAC,CAAC,IAAW,OAAO,MAAM,YAAY,EAAE;IAEtG,MAAM,aAAa,oBAAoB,QAAQ,UAAU;IACzD,MAAM,UAAU,iBAAiB,QAAQ,OAAO;IAEhD,IAAI,CAAC,WAAW,MAAM,IAAI,CAAC,SAAS,YAAY,QAAQ,OAAO;IAE/D,OAAO;QACL;QACA;QACA;QACA;QACA,WAAW,IAAI,OAAO,WAAW;IACnC;AACF;AAEO,SAAS,aAAa,QAAuB;IAClD,wCAAmC;;;AAGrC;AAEO,SAAS;IACd,wCAAmC,OAAO;;;AAE5C;AAEO,SAAS;IACd,wCAAmC;;;AAGrC;AAEO,SAAS,kBAAkB,EAAc;IAC9C,UAAU,GAAG,CAAC;IACd,OAAO,IAAM,UAAU,MAAM,CAAC;AAChC","debugId":null}},
    {"offset": {"line": 121, "column": 0}, "map": {"version":3,"sources":["file:///Users/ruangalvao/ProjetosVS/Projetos%20Pessoais/stud.ai-app/app-stud.ai/src/app/components/UploadSection.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useRef, useState } from \"react\";\nimport { normalizeFromApi, saveMaterial } from \"@/lib/studyMaterialStore\";\n\ntype DifficultyUI = \"easy\" | \"medium\" | \"hard\" | \"random\";\ntype SummaryStyleUI = \"bullets\" | \"detailed\";\ntype Section = \"upload\" | \"flashcards\" | \"summary\" | \"progress\";\n\ntype Props = {\n  onDataProcessed?: (data: any) => void;\n  onNavigate?: (section: Section) => void;\n};\n\ntype Status = \"idle\" | \"selected\" | \"uploading\" | \"success\" | \"error\";\n\nconst PREFS_KEY = \"studai:genPrefs:v1\";\n\nfunction clampInt(n: number, min: number, max: number) {\n  if (!Number.isFinite(n)) return min;\n  return Math.max(min, Math.min(max, Math.trunc(n)));\n}\n\nfunction formatBytes(bytes: number) {\n  if (!Number.isFinite(bytes)) return \"\";\n  const units = [\"B\", \"KB\", \"MB\", \"GB\"];\n  let i = 0;\n  let v = bytes;\n  while (v >= 1024 && i < units.length - 1) {\n    v /= 1024;\n    i++;\n  }\n  return `${v.toFixed(i === 0 ? 0 : 1)} ${units[i]}`;\n}\n\nfunction difficultyLabel(d: DifficultyUI) {\n  if (d === \"easy\") return \"f√°cil\";\n  if (d === \"medium\") return \"m√©dio\";\n  if (d === \"hard\") return \"dif√≠cil\";\n  return \"aleat√≥rio\";\n}\n\nfunction summaryLabel(s: SummaryStyleUI) {\n  return s === \"bullets\" ? \"resumo bullets\" : \"resumo elaborado\";\n}\n\nfunction isApiSuccess(json: any) {\n  if (!json) return false;\n  return json?.success === true || json?.data?.success === true;\n}\n\nfunction extractPayload(json: any) {\n  if (!json) return null;\n  if (json?.data && json?.success === true) return json.data;\n  if (json?.data?.data && json?.data?.success === true) return json.data.data;\n  return json?.data ?? null;\n}\n\nexport default function UploadSection({ onDataProcessed, onNavigate }: Props) {\n  const inputRef = useRef<HTMLInputElement | null>(null);\n\n  const [status, setStatus] = useState<Status>(\"idle\");\n  const [isUploading, setIsUploading] = useState(false);\n\n  const [selectedFile, setSelectedFile] = useState<File | null>(null);\n\n  const [flashcardsCount, setFlashcardsCount] = useState<number>(10);\n  const [difficulty, setDifficulty] = useState<DifficultyUI>(\"random\");\n  const [summaryStyle, setSummaryStyle] = useState<SummaryStyleUI>(\"bullets\");\n\n  const [message, setMessage] = useState<string | null>(null);\n  const [lastProcessedAt, setLastProcessedAt] = useState<string | null>(null);\n\n  const [lastMaterial, setLastMaterial] = useState<any>(null);\n  const [lastApiJson, setLastApiJson] = useState<any>(null);\n\n  // ‚úÖ cooldown p/ 429 (quota)\n  const [cooldownSec, setCooldownSec] = useState<number>(0);\n\n  const [lastUsed, setLastUsed] = useState<{\n    flashcardsCount: number;\n    difficulty: DifficultyUI;\n    summaryStyle: SummaryStyleUI;\n  } | null>(null);\n\n  useEffect(() => {\n    try {\n      const raw = localStorage.getItem(PREFS_KEY);\n      if (!raw) return;\n      const p = JSON.parse(raw);\n      if (p?.flashcardsCount) setFlashcardsCount(clampInt(Number(p.flashcardsCount), 1, 50));\n      if (p?.difficulty) setDifficulty(p.difficulty);\n      if (p?.summaryStyle) setSummaryStyle(p.summaryStyle);\n    } catch {}\n  }, []);\n\n  useEffect(() => {\n    try {\n      localStorage.setItem(PREFS_KEY, JSON.stringify({ flashcardsCount, difficulty, summaryStyle }));\n    } catch {}\n  }, [flashcardsCount, difficulty, summaryStyle]);\n\n  // ‚úÖ timer do cooldown\n  useEffect(() => {\n    if (cooldownSec <= 0) return;\n    const t = window.setInterval(() => {\n      setCooldownSec((s) => (s <= 1 ? 0 : s - 1));\n    }, 1000);\n    return () => window.clearInterval(t);\n  }, [cooldownSec]);\n\n  function onPickFile() {\n    setMessage(null);\n    inputRef.current?.click();\n  }\n\n  function clearSelection() {\n    setSelectedFile(null);\n    setStatus(\"idle\");\n    setMessage(null);\n    setLastProcessedAt(null);\n    setLastUsed(null);\n    setLastMaterial(null);\n    setLastApiJson(null);\n    setCooldownSec(0);\n  }\n\n  async function handleUpload(file: File, opts?: { silentSelectMessage?: boolean }) {\n    if (!opts?.silentSelectMessage) setMessage(null);\n\n    setIsUploading(true);\n    setStatus(\"uploading\");\n    setMessage(\"Processando‚Ä¶\");\n    setCooldownSec(0);\n\n    const used = {\n      flashcardsCount: clampInt(flashcardsCount, 1, 50),\n      difficulty,\n      summaryStyle,\n    };\n    setLastUsed(used);\n\n    try {\n      const formData = new FormData();\n      formData.append(\"file\", file);\n      formData.append(\"flashcardsCount\", String(used.flashcardsCount));\n      formData.append(\"flashcardsDifficulty\", used.difficulty);\n      formData.append(\"summaryStyle\", used.summaryStyle);\n\n      const response = await fetch(\"/api/process-study-material\", {\n        method: \"POST\",\n        body: formData,\n      });\n\n      const json = await response.json().catch(() => null);\n      setLastApiJson(json);\n\n      // ‚úÖ 429: quota ‚Äî mostra countdown\n      if (response.status === 429) {\n        const retry = Number(json?.retryAfterSeconds);\n        const retrySec = Number.isFinite(retry) ? retry : 45;\n\n        setStatus(\"error\");\n        setCooldownSec(retrySec);\n        setLastProcessedAt(new Date().toLocaleTimeString());\n        setMessage(`Limite da cota do Gemini atingido. Tente novamente em ${retrySec}s.`);\n        return;\n      }\n\n      const ok = response.ok && isApiSuccess(json);\n      const payload = extractPayload(json);\n\n      if (!ok || !payload) {\n        const errMsg =\n          json?.details ||\n          json?.error ||\n          json?.data?.details ||\n          json?.data?.error ||\n          `Falha ao processar (HTTP ${response.status})`;\n        throw new Error(errMsg);\n      }\n\n      // ‚úÖ NORMALIZA + SALVA NO STORE\n      const material =\n        normalizeFromApi(payload) ||\n        normalizeFromApi({ success: true, data: payload }) ||\n        normalizeFromApi(json);\n\n      if (!material) {\n        throw new Error(\"A API respondeu, mas n√£o veio topic/flashcards/summary no formato esperado.\");\n      }\n\n      saveMaterial(material);\n      setLastMaterial(material);\n      onDataProcessed?.(material);\n\n      setStatus(\"success\");\n      setMessage(\"Arquivo processado com sucesso! ‚úÖ\");\n      setLastProcessedAt(new Date().toLocaleTimeString());\n    } catch (e: any) {\n      console.error(e);\n      setStatus(\"error\");\n      setMessage(e?.message || \"Falha ao processar arquivo ‚ùå\");\n      setLastProcessedAt(new Date().toLocaleTimeString());\n    } finally {\n      setIsUploading(false);\n    }\n  }\n\n  async function onFileChange(e: React.ChangeEvent<HTMLInputElement>) {\n    const file = e.target.files?.[0] || null;\n    if (!file) return;\n\n    setSelectedFile(file);\n    setStatus(\"selected\");\n    setMessage(\"Arquivo selecionado. Processando‚Ä¶\");\n\n    await handleUpload(file, { silentSelectMessage: true });\n    e.target.value = \"\";\n  }\n\n  async function onDrop(e: React.DragEvent<HTMLDivElement>) {\n    e.preventDefault();\n    const file = e.dataTransfer.files?.[0] || null;\n    if (!file) return;\n\n    setSelectedFile(file);\n    setStatus(\"selected\");\n    setMessage(\"Arquivo selecionado. Processando‚Ä¶\");\n\n    await handleUpload(file, { silentSelectMessage: true });\n  }\n\n  function onDragOver(e: React.DragEvent<HTMLDivElement>) {\n    e.preventDefault();\n  }\n\n  async function onRegenerate() {\n    if (!selectedFile) return;\n    setMessage(\"Reprocessando com as novas configura√ß√µes‚Ä¶\");\n    await handleUpload(selectedFile, { silentSelectMessage: true });\n  }\n\n  const lastUsedPreview =\n    lastUsed\n      ? `${lastUsed.flashcardsCount} flashcards ‚Ä¢ ${difficultyLabel(lastUsed.difficulty)} ‚Ä¢ ${summaryLabel(\n          lastUsed.summaryStyle\n        )}`\n      : null;\n\n  const canNavigate = !!lastMaterial;\n\n  return (\n    <section className=\"w-full\">\n      <input\n        ref={inputRef}\n        type=\"file\"\n        className=\"hidden\"\n        onChange={onFileChange}\n        accept=\"image/*,application/pdf,text/plain\"\n      />\n\n      <div className=\"mb-4 rounded-2xl border border-white/10 bg-white/5 p-4\">\n        <div className=\"flex flex-col md:flex-row md:items-center md:justify-between gap-3\">\n          <div>\n            <div className=\"text-sm opacity-70\">Configura√ß√µes</div>\n            <div className=\"text-base font-semibold\">Como gerar seus materiais</div>\n          </div>\n\n          <div className=\"text-xs opacity-70\">\n            {status === \"uploading\" ? \"‚è≥ Processando...\" : null}\n            {status === \"success\" ? \"‚úÖ Sucesso\" : null}\n            {status === \"error\" ? \"‚ùå Falhou\" : null}\n          </div>\n        </div>\n\n        <div className=\"mt-4 grid grid-cols-1 md:grid-cols-3 gap-4\">\n          <div className=\"rounded-xl border border-white/10 bg-black/10 p-3\">\n            <div className=\"text-xs opacity-70\">Quantidade de flashcards</div>\n            <input\n              type=\"number\"\n              min={1}\n              max={50}\n              value={flashcardsCount}\n              onChange={(e) => setFlashcardsCount(clampInt(Number(e.target.value), 1, 50))}\n              className=\"mt-2 w-full rounded-lg border border-white/10 bg-black/20 px-3 py-2 outline-none\"\n            />\n            <div className=\"mt-1 text-xs opacity-60\">1 a 50</div>\n          </div>\n\n          <div className=\"rounded-xl border border-white/10 bg-black/10 p-3\">\n            <div className=\"text-xs opacity-70\">Dificuldade</div>\n            <select\n              value={difficulty}\n              onChange={(e) => setDifficulty(e.target.value as DifficultyUI)}\n              className=\"mt-2 w-full rounded-lg border border-white/10 bg-black/20 px-3 py-2 outline-none\"\n            >\n              <option value=\"easy\">F√°cil</option>\n              <option value=\"medium\">M√©dio</option>\n              <option value=\"hard\">Dif√≠cil</option>\n              <option value=\"random\">Aleat√≥rio</option>\n            </select>\n          </div>\n\n          <div className=\"rounded-xl border border-white/10 bg-black/10 p-3\">\n            <div className=\"text-xs opacity-70\">Estilo do resumo</div>\n            <select\n              value={summaryStyle}\n              onChange={(e) => setSummaryStyle(e.target.value as SummaryStyleUI)}\n              className=\"mt-2 w-full rounded-lg border border-white/10 bg-black/20 px-3 py-2 outline-none\"\n            >\n              <option value=\"bullets\">Bullets (objetivo)</option>\n              <option value=\"detailed\">Elaborado (explicativo)</option>\n            </select>\n          </div>\n        </div>\n\n        {(status === \"success\" || status === \"error\" || canNavigate) && lastUsedPreview ? (\n          <div\n            className={[\n              \"mt-4 rounded-xl border p-3 text-sm\",\n              canNavigate\n                ? \"border-[#00FF8B]/20 bg-[#00FF8B]/10 text-[#00FF8B]\"\n                : \"border-red-500/20 bg-red-500/10 text-red-200\",\n            ].join(\" \")}\n          >\n            <div className=\"font-semibold\">{canNavigate ? \"Gerado com:\" : \"Tentou gerar com:\"}</div>\n            <div className=\"opacity-90 mt-1\">{lastUsedPreview}</div>\n            {lastProcessedAt ? <div className=\"text-xs opacity-70 mt-1\">√†s {lastProcessedAt}</div> : null}\n\n            {/* ‚úÖ quota cooldown */}\n            {!canNavigate && cooldownSec > 0 ? (\n              <div className=\"mt-3 text-sm opacity-90\">\n                ‚è≥ Aguarde <b>{cooldownSec}s</b> para tentar novamente.\n              </div>\n            ) : null}\n\n            <div className=\"mt-3 flex flex-col sm:flex-row gap-2\">\n              {canNavigate ? (\n                <>\n                  <button\n                    onClick={() => onNavigate?.(\"flashcards\")}\n                    className=\"rounded-xl border border-[#00FF8B]/30 bg-[#00FF8B]/10 px-4 py-2 text-sm font-semibold text-[#00FF8B] hover:bg-[#00FF8B]/15\"\n                  >\n                    Ir para Flashcards\n                  </button>\n\n                  <button\n                    onClick={() => onNavigate?.(\"summary\")}\n                    className=\"rounded-xl border border-white/10 bg-white/5 px-4 py-2 text-sm hover:bg-white/10\"\n                  >\n                    Ir para Resumo\n                  </button>\n                </>\n              ) : (\n                <button\n                  onClick={onRegenerate}\n                  disabled={!selectedFile || isUploading || cooldownSec > 0}\n                  className=\"rounded-xl border border-white/10 bg-white/5 px-4 py-2 text-sm disabled:opacity-50 hover:bg-white/10\"\n                >\n                  {cooldownSec > 0 ? `Tentar novamente em ${cooldownSec}s` : \"Tentar novamente\"}\n                </button>\n              )}\n            </div>\n          </div>\n        ) : null}\n\n        <div className=\"mt-4 flex flex-col sm:flex-row items-center justify-between gap-3\">\n          <div className=\"text-xs opacity-60\">\n            {selectedFile ? (\n              <>\n                Arquivo atual: <span className=\"opacity-90\">{selectedFile.name}</span> ‚Ä¢ {formatBytes(selectedFile.size)}\n              </>\n            ) : (\n              \"Selecione um arquivo para gerar o conte√∫do.\"\n            )}\n          </div>\n\n          <div className=\"flex items-center gap-2\">\n            <button\n              onClick={onRegenerate}\n              disabled={!selectedFile || isUploading || cooldownSec > 0}\n              className=\"rounded-xl border border-[#00FF8B]/30 bg-[#00FF8B]/10 px-4 py-2 text-sm font-semibold text-[#00FF8B] disabled:opacity-50 hover:bg-[#00FF8B]/15\"\n            >\n              {cooldownSec > 0 ? `Aguarde ${cooldownSec}s` : \"Gerar novamente\"}\n            </button>\n\n            <button\n              onClick={onPickFile}\n              disabled={isUploading}\n              className=\"rounded-xl border border-white/10 bg-white/5 px-4 py-2 text-sm disabled:opacity-50 hover:bg-white/10\"\n            >\n              Trocar arquivo\n            </button>\n\n            <button\n              onClick={clearSelection}\n              disabled={isUploading}\n              className=\"rounded-xl border border-white/10 bg-black/20 px-4 py-2 text-sm disabled:opacity-50 hover:bg-black/30\"\n            >\n              Limpar\n            </button>\n          </div>\n        </div>\n\n        {lastApiJson ? (\n          <details className=\"mt-4 text-xs opacity-80\">\n            <summary className=\"cursor-pointer\">Ver resposta da API (debug)</summary>\n            <pre className=\"mt-2 whitespace-pre-wrap break-words rounded-xl border border-white/10 bg-black/20 p-3\">\n              {JSON.stringify(lastApiJson, null, 2)}\n            </pre>\n          </details>\n        ) : null}\n      </div>\n\n      <div\n        onDrop={onDrop}\n        onDragOver={onDragOver}\n        className=\"w-full rounded-2xl border border-dashed border-white/15 bg-white/[0.03] p-10 text-center\"\n      >\n        <div className=\"text-lg font-semibold\">Arraste e solte seu arquivo aqui</div>\n        <div className=\"mt-2 text-sm opacity-70\">ou clique para selecionar</div>\n\n        <button\n          onClick={onPickFile}\n          disabled={isUploading}\n          className=\"mt-6 inline-flex items-center justify-center rounded-xl border border-white/10 bg-white/5 px-5 py-2 disabled:opacity-60 hover:bg-white/10\"\n        >\n          {isUploading ? \"Processando...\" : \"Selecionar arquivo\"}\n        </button>\n\n        {message ? (\n          <div\n            className={[\n              \"mt-4 text-sm\",\n              status === \"success\" || canNavigate\n                ? \"text-[#00FF8B]\"\n                : status === \"error\"\n                ? \"text-red-300\"\n                : \"text-white/70\",\n            ].join(\" \")}\n          >\n            {message}\n          </div>\n        ) : null}\n      </div>\n    </section>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 800, "column": 0}, "map": {"version":3,"sources":["file:///Users/ruangalvao/ProjetosVS/Projetos%20Pessoais/stud.ai-app/app-stud.ai/src/lib/studyProgressStore.ts"],"sourcesContent":["export type StudyProgress = {\n  knownIds: number[];\n  reviewIds: number[];\n  updatedAt?: string;\n};\n\nconst PREFIX = \"studai:progress:v1:\";\nconst listeners = new Set<() => void>();\n\nfunction emit() {\n  for (const fn of listeners) {\n    try {\n      fn();\n    } catch {}\n  }\n}\n\nfunction safeParse<T>(raw: string | null): T | null {\n  if (!raw) return null;\n  try {\n    return JSON.parse(raw) as T;\n  } catch {\n    return null;\n  }\n}\n\nexport function makeProgressKey(topic: string, cardsCount: number) {\n  const t = (topic || \"\").trim().toLowerCase().slice(0, 80);\n  return `${t}::${cardsCount}`;\n}\n\nexport function loadProgress(key: string): StudyProgress | null {\n  if (typeof window === \"undefined\") return null;\n  return safeParse<StudyProgress>(localStorage.getItem(PREFIX + key));\n}\n\nexport function saveProgress(key: string, progress: StudyProgress) {\n  if (typeof window === \"undefined\") return;\n\n  const payload: StudyProgress = {\n    knownIds: Array.isArray(progress.knownIds) ? progress.knownIds : [],\n    reviewIds: Array.isArray(progress.reviewIds) ? progress.reviewIds : [],\n    updatedAt: new Date().toISOString(),\n  };\n\n  localStorage.setItem(PREFIX + key, JSON.stringify(payload));\n  emit();\n}\n\nexport function clearProgress(key?: string) {\n  if (typeof window === \"undefined\") return;\n\n  if (key) {\n    localStorage.removeItem(PREFIX + key);\n    emit();\n    return;\n  }\n\n  // remove tudo que come√ßa com PREFIX\n  const keysToRemove: string[] = [];\n  for (let i = 0; i < localStorage.length; i++) {\n    const k = localStorage.key(i);\n    if (k && k.startsWith(PREFIX)) keysToRemove.push(k);\n  }\n  for (const k of keysToRemove) localStorage.removeItem(k);\n  emit();\n}\n\nexport function onProgressUpdated(cb: () => void) {\n  listeners.add(cb);\n  return () => listeners.delete(cb);\n}\n"],"names":[],"mappings":";;;;;;;AAMA,MAAM,SAAS;AACf,MAAM,YAAY,IAAI;AAEtB,SAAS;IACP,KAAK,MAAM,MAAM,UAAW;QAC1B,IAAI;YACF;QACF,EAAE,OAAM,CAAC;IACX;AACF;AAEA,SAAS,UAAa,GAAkB;IACtC,IAAI,CAAC,KAAK,OAAO;IACjB,IAAI;QACF,OAAO,KAAK,KAAK,CAAC;IACpB,EAAE,OAAM;QACN,OAAO;IACT;AACF;AAEO,SAAS,gBAAgB,KAAa,EAAE,UAAkB;IAC/D,MAAM,IAAI,CAAC,SAAS,EAAE,EAAE,IAAI,GAAG,WAAW,GAAG,KAAK,CAAC,GAAG;IACtD,OAAO,GAAG,EAAE,EAAE,EAAE,YAAY;AAC9B;AAEO,SAAS,aAAa,GAAW;IACtC,wCAAmC,OAAO;;;AAE5C;AAEO,SAAS,aAAa,GAAW,EAAE,QAAuB;IAC/D,wCAAmC;;;IAEnC,MAAM;AAQR;AAEO,SAAS,cAAc,GAAY;IACxC,wCAAmC;;;IAQnC,oCAAoC;IACpC,MAAM;IACD,IAAI;IAIJ,MAAM;AAEb;AAEO,SAAS,kBAAkB,EAAc;IAC9C,UAAU,GAAG,CAAC;IACd,OAAO,IAAM,UAAU,MAAM,CAAC;AAChC","debugId":null}},
    {"offset": {"line": 856, "column": 0}, "map": {"version":3,"sources":["file:///Users/ruangalvao/ProjetosVS/Projetos%20Pessoais/stud.ai-app/app-stud.ai/src/app/components/FlashcardsSection.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useMemo, useRef, useState } from \"react\";\nimport { Flashcard, loadMaterial, onMaterialUpdated } from \"@/lib/studyMaterialStore\";\nimport { makeProgressKey, loadProgress, saveProgress } from \"@/lib/studyProgressStore\";\n\ntype Filter = \"smart\" | \"all\" | \"review\" | \"known\";\n\nfunction difficultyLabel(d: string) {\n  if (d === \"easy\") return \"F√°cil\";\n  if (d === \"hard\") return \"Dif√≠cil\";\n  return \"M√©dio\";\n}\n\nfunction difficultyClass(d: string) {\n  if (d === \"easy\") return \"border-green-500/30 bg-green-500/10 text-green-200\";\n  if (d === \"hard\") return \"border-red-500/30 bg-red-500/10 text-red-200\";\n  return \"border-yellow-500/30 bg-yellow-500/10 text-yellow-200\";\n}\n\nfunction clamp(n: number, min: number, max: number) {\n  return Math.max(min, Math.min(max, n));\n}\n\nfunction uniqById(list: Flashcard[]) {\n  const seen = new Set<number>();\n  const out: Flashcard[] = [];\n  for (const c of list) {\n    if (!seen.has(c.id)) {\n      seen.add(c.id);\n      out.push(c);\n    }\n  }\n  return out;\n}\n\nfunction mulberry32(seed: number) {\n  let a = seed >>> 0;\n  return function () {\n    a |= 0;\n    a = (a + 0x6d2b79f5) | 0;\n    let t = Math.imul(a ^ (a >>> 15), 1 | a);\n    t = (t + Math.imul(t ^ (t >>> 7), 61 | t)) ^ t;\n    return ((t ^ (t >>> 14)) >>> 0) / 4294967296;\n  };\n}\n\nfunction seededShuffle<T>(arr: T[], seed: number) {\n  const a = [...arr];\n  const rand = mulberry32(seed);\n  for (let i = a.length - 1; i > 0; i--) {\n    const j = Math.floor(rand() * (i + 1));\n    [a[i], a[j]] = [a[j], a[i]];\n  }\n  return a;\n}\n\nconst STREAK_KEY = \"studai:streak:v1\";\ntype StreakState = { streak: number; lastDate: string };\n\nfunction toYYYYMMDD(d: Date) {\n  const y = d.getFullYear();\n  const m = String(d.getMonth() + 1).padStart(2, \"0\");\n  const day = String(d.getDate()).padStart(2, \"0\");\n  return `${y}-${m}-${day}`;\n}\n\nfunction addDays(dateStr: string, days: number) {\n  const [y, m, d] = dateStr.split(\"-\").map(Number);\n  const dt = new Date(y, (m || 1) - 1, d || 1);\n  dt.setDate(dt.getDate() + days);\n  return toYYYYMMDD(dt);\n}\n\nfunction loadStreak(): StreakState {\n  if (typeof window === \"undefined\") return { streak: 0, lastDate: \"\" };\n  try {\n    const raw = localStorage.getItem(STREAK_KEY);\n    if (!raw) return { streak: 0, lastDate: \"\" };\n    const parsed = JSON.parse(raw);\n    return {\n      streak: Number.isFinite(parsed?.streak) ? Number(parsed.streak) : 0,\n      lastDate: typeof parsed?.lastDate === \"string\" ? parsed.lastDate : \"\",\n    };\n  } catch {\n    return { streak: 0, lastDate: \"\" };\n  }\n}\n\nfunction saveStreak(s: StreakState) {\n  if (typeof window === \"undefined\") return;\n  localStorage.setItem(STREAK_KEY, JSON.stringify(s));\n}\n\nfunction updateStreakOnStudy(): StreakState {\n  const today = toYYYYMMDD(new Date());\n  const current = loadStreak();\n\n  if (!current.lastDate) {\n    const next = { streak: 1, lastDate: today };\n    saveStreak(next);\n    return next;\n  }\n\n  if (current.lastDate === today) return current;\n\n  const expected = addDays(current.lastDate, 1);\n  const next =\n    expected === today\n      ? { streak: Math.max(1, current.streak + 1), lastDate: today }\n      : { streak: 1, lastDate: today };\n\n  saveStreak(next);\n  return next;\n}\n\nfunction fireConfetti() {\n  if (typeof window === \"undefined\") return;\n\n  const root = document.createElement(\"div\");\n  root.style.position = \"fixed\";\n  root.style.inset = \"0\";\n  root.style.pointerEvents = \"none\";\n  root.style.zIndex = \"9999\";\n  document.body.appendChild(root);\n\n  const pieces = 120;\n  const w = window.innerWidth;\n  const h = window.innerHeight;\n\n  for (let i = 0; i < pieces; i++) {\n    const p = document.createElement(\"div\");\n    const size = 6 + Math.random() * 8;\n\n    p.style.position = \"absolute\";\n    p.style.width = `${size}px`;\n    p.style.height = `${size * 0.6}px`;\n    p.style.borderRadius = \"999px\";\n    p.style.left = `${Math.random() * w}px`;\n    p.style.top = `${-20 - Math.random() * 200}px`;\n    p.style.opacity = \"0.95\";\n    p.style.transform = `rotate(${Math.random() * 360}deg)`;\n    p.style.background = `hsl(${Math.floor(Math.random() * 360)}, 90%, 60%)`;\n\n    const duration = 900 + Math.random() * 900;\n    const drift = (Math.random() - 0.5) * 260;\n    const rot = (Math.random() - 0.5) * 720;\n\n    p.animate(\n      [\n        { transform: `translate(0,0) rotate(0deg)`, opacity: 1 },\n        { transform: `translate(${drift}px, ${h + 200}px) rotate(${rot}deg)`, opacity: 0.9 },\n      ],\n      { duration, easing: \"cubic-bezier(.2,.8,.2,1)\", fill: \"forwards\" }\n    );\n\n    root.appendChild(p);\n  }\n\n  setTimeout(() => root.remove(), 2200);\n}\n\nfunction haptic(pattern: number | number[]) {\n  try {\n    // @ts-ignore\n    if (typeof navigator !== \"undefined\" && navigator.vibrate) navigator.vibrate(pattern);\n  } catch {}\n}\n\nasync function requestFullscreen() {\n  try {\n    if (typeof document === \"undefined\") return;\n    const el: any = document.documentElement;\n    if (el?.requestFullscreen) await el.requestFullscreen();\n  } catch {}\n}\n\nasync function exitFullscreen() {\n  try {\n    if (typeof document === \"undefined\") return;\n    if (document.fullscreenElement && document.exitFullscreen) await document.exitFullscreen();\n  } catch {}\n}\n\nexport default function FlashcardsSection({ data }: { data?: any }) {\n  const [cards, setCards] = useState<Flashcard[]>([]);\n  const [topic, setTopic] = useState<string>(\"\");\n  const [topicTags, setTopicTags] = useState<string[]>([]);\n\n  const [idx, setIdx] = useState(0);\n  const [showAnswer, setShowAnswer] = useState(false);\n\n  const [knownIds, setKnownIds] = useState<number[]>([]);\n  const [reviewIds, setReviewIds] = useState<number[]>([]);\n  const [filter, setFilter] = useState<Filter>(\"smart\");\n\n  const [direction, setDirection] = useState<1 | -1>(1);\n  const [animKey, setAnimKey] = useState(0);\n\n  const [streak, setStreak] = useState<StreakState>({ streak: 0, lastDate: \"\" });\n\n  const confettiFiredRef = useRef(false);\n\n  const [studyMode, setStudyMode] = useState(false);\n  const [autoAdvance, setAutoAdvance] = useState(true);\n  const [autoAdvanceDelayMs, setAutoAdvanceDelayMs] = useState(220);\n\n  const [smartIncludeKnown, setSmartIncludeKnown] = useState(true);\n  const [smartEvery, setSmartEvery] = useState(3);\n\n  const [smartShuffle, setSmartShuffle] = useState(true);\n  const [smartSeed, setSmartSeed] = useState(() => Date.now());\n\n  const [smartSprintReviewOnly, setSmartSprintReviewOnly] = useState(false);\n\n  const [lastAction, setLastAction] = useState<\"known\" | \"review\" | null>(null);\n\n  // ‚úÖ carrega do store (fallback)\n  useEffect(() => {\n    const refresh = () => {\n      const m = loadMaterial();\n      const newCards = m?.flashcards ?? [];\n      const newTopic = m?.topic ?? \"\";\n      const newTags = m?.tags ?? [];\n\n      setCards(newCards);\n      setTopic(newTopic);\n      setTopicTags(newTags);\n\n      setIdx(0);\n      setShowAnswer(false);\n      setFilter(\"smart\");\n      setDirection(1);\n      setAnimKey((k) => k + 1);\n\n      const key = makeProgressKey(newTopic, newCards.length);\n      const p = loadProgress(key);\n      setKnownIds(p?.knownIds ?? []);\n      setReviewIds(p?.reviewIds ?? []);\n\n      confettiFiredRef.current = false;\n      setStreak(loadStreak());\n      setLastAction(null);\n\n      setSmartSeed(Date.now());\n    };\n\n    refresh();\n    return onMaterialUpdated(refresh);\n  }, []);\n\n  // ‚úÖ se vier data pelo page.tsx, usa ela tamb√©m (n√£o quebra nada)\n  useEffect(() => {\n    if (!data?.flashcards?.length) return;\n\n    setCards(data.flashcards);\n    setTopic(data.topic ?? \"\");\n    setTopicTags(data.tags ?? []);\n\n    setIdx(0);\n    setShowAnswer(false);\n    setFilter(\"smart\");\n    setDirection(1);\n    setAnimKey((k) => k + 1);\n\n    const key = makeProgressKey(data.topic ?? \"\", data.flashcards.length);\n    const p = loadProgress(key);\n    setKnownIds(p?.knownIds ?? []);\n    setReviewIds(p?.reviewIds ?? []);\n\n    confettiFiredRef.current = false;\n    setStreak(loadStreak());\n    setLastAction(null);\n\n    setSmartSeed(Date.now());\n  }, [data]);\n\n  useEffect(() => {\n    if (!lastAction) return;\n    const t = window.setTimeout(() => setLastAction(null), 320);\n    return () => window.clearTimeout(t);\n  }, [lastAction]);\n\n  const progressKey = useMemo(() => makeProgressKey(topic, cards.length), [topic, cards.length]);\n\n  const smartDeck = useMemo(() => {\n    if (!cards.length) return [];\n\n    const knownSet = new Set(knownIds);\n    const reviewSet = new Set(reviewIds);\n\n    const reviewCardsRaw = cards.filter((c) => reviewSet.has(c.id));\n    const unseenRaw = cards.filter((c) => !knownSet.has(c.id) && !reviewSet.has(c.id));\n    const knownRaw = cards.filter((c) => knownSet.has(c.id));\n\n    if (smartSprintReviewOnly) {\n      const base = smartShuffle ? seededShuffle(reviewCardsRaw, smartSeed) : reviewCardsRaw;\n      return uniqById(base);\n    }\n\n    const reviewCards = smartShuffle ? seededShuffle(reviewCardsRaw, smartSeed ^ 0xabc123) : reviewCardsRaw;\n    const unseenCards = smartShuffle ? seededShuffle(unseenRaw, smartSeed ^ 0x55aa77) : unseenRaw;\n    const knownCards = smartShuffle ? seededShuffle(knownRaw, smartSeed ^ 0x0f0f0f) : knownRaw;\n\n    const priority = [...reviewCards, ...unseenCards];\n\n    if (!smartIncludeKnown || knownCards.length === 0) {\n      return uniqById(priority.length ? priority : cards);\n    }\n\n    const every = clamp(smartEvery, 1, 10);\n    const deck: Flashcard[] = [];\n    let i = 0;\n    let j = 0;\n\n    while (i < priority.length || j < knownCards.length) {\n      for (let k = 0; k < every && i < priority.length; k++) deck.push(priority[i++]);\n      if (j < knownCards.length) deck.push(knownCards[j++]);\n      if (i >= priority.length && j < knownCards.length) while (j < knownCards.length) deck.push(knownCards[j++]);\n    }\n\n    return uniqById(deck.length ? deck : cards);\n  }, [cards, knownIds, reviewIds, smartIncludeKnown, smartEvery, smartShuffle, smartSeed, smartSprintReviewOnly]);\n\n  const filteredCards = useMemo(() => {\n    if (filter === \"smart\") return smartDeck;\n    if (filter === \"known\") return cards.filter((c) => knownIds.includes(c.id));\n    if (filter === \"review\") return cards.filter((c) => reviewIds.includes(c.id));\n    return cards;\n  }, [cards, filter, knownIds, reviewIds, smartDeck]);\n\n  // ‚úÖ SAFE INDEX (n√£o deixa current virar undefined)\n  const safeIdx = useMemo(() => {\n    if (!filteredCards.length) return 0;\n    return Math.min(idx, filteredCards.length - 1);\n  }, [idx, filteredCards.length]);\n\n  const current = filteredCards[safeIdx];\n\n  const deckProgressPct = useMemo(() => {\n    const total = filteredCards.length || 1;\n    const pos = Math.min(safeIdx + 1, total);\n    return Math.round((pos / total) * 100);\n  }, [safeIdx, filteredCards.length]);\n\n  const masteredPct = useMemo(() => {\n    const total = cards.length || 1;\n    return Math.round((knownIds.length / total) * 100);\n  }, [cards.length, knownIds.length]);\n\n  function setIndexSafe(nextIndex: number, dir: 1 | -1) {\n    setDirection(dir);\n    setShowAnswer(false);\n    setIdx(clamp(nextIndex, 0, Math.max(0, filteredCards.length - 1)));\n    setAnimKey((k) => k + 1);\n  }\n\n  function next() {\n    setIndexSafe(safeIdx + 1, 1);\n  }\n  function prev() {\n    setIndexSafe(safeIdx - 1, -1);\n  }\n\n  function applyProgress(newKnown: number[], newReview: number[]) {\n    setKnownIds(newKnown);\n    setReviewIds(newReview);\n    saveProgress(progressKey, { knownIds: newKnown, reviewIds: newReview });\n\n    const s = updateStreakOnStudy();\n    setStreak(s);\n\n    const total = cards.length;\n    if (total > 0 && newKnown.length >= total && !confettiFiredRef.current) {\n      confettiFiredRef.current = true;\n      fireConfetti();\n      haptic([30, 40, 30]);\n    }\n  }\n\n  async function enterStudyMode() {\n    setStudyMode(true);\n    await requestFullscreen();\n  }\n  async function leaveStudyMode() {\n    setStudyMode(false);\n    await exitFullscreen();\n  }\n\n  function scheduleAdvance() {\n    if (!autoAdvance) return;\n    const wait = clamp(autoAdvanceDelayMs, 0, 2000);\n    window.setTimeout(() => next(), wait);\n  }\n\n  function markKnown() {\n    if (!current) return;\n    const id = current.id;\n\n    const newKnown = knownIds.includes(id) ? knownIds : [...knownIds, id];\n    const newReview = reviewIds.filter((x) => x !== id);\n\n    setLastAction(\"known\");\n    haptic(20);\n    applyProgress(newKnown, newReview);\n    scheduleAdvance();\n  }\n\n  function markReview() {\n    if (!current) return;\n    const id = current.id;\n\n    const newReview = reviewIds.includes(id) ? reviewIds : [...reviewIds, id];\n    const newKnown = knownIds.filter((x) => x !== id);\n\n    setLastAction(\"review\");\n    haptic([30, 20, 30]);\n    applyProgress(newKnown, newReview);\n    scheduleAdvance();\n  }\n\n  useEffect(() => {\n    function handler(e: KeyboardEvent) {\n      const el = document.activeElement as HTMLElement | null;\n      const tag = el?.tagName?.toLowerCase();\n      if (tag === \"input\" || tag === \"textarea\" || tag === \"select\") return;\n\n      if (e.key === \"Escape\") {\n        if (studyMode) {\n          e.preventDefault();\n          leaveStudyMode();\n        }\n        return;\n      }\n\n      if (e.key === \"ArrowRight\") {\n        e.preventDefault();\n        next();\n      } else if (e.key === \"ArrowLeft\") {\n        e.preventDefault();\n        prev();\n      } else if (e.key === \" \" || e.code === \"Space\") {\n        e.preventDefault();\n        setShowAnswer((v) => !v);\n      } else if (e.key.toLowerCase() === \"a\") {\n        e.preventDefault();\n        markReview();\n      } else if (e.key.toLowerCase() === \"d\") {\n        e.preventDefault();\n        markKnown();\n      } else if (e.key.toLowerCase() === \"f\") {\n        e.preventDefault();\n        studyMode ? leaveStudyMode() : enterStudyMode();\n      } else if (e.key.toLowerCase() === \"r\") {\n        e.preventDefault();\n        setSmartSeed(Date.now());\n      }\n    }\n\n    window.addEventListener(\"keydown\", handler);\n    return () => window.removeEventListener(\"keydown\", handler);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [safeIdx, current, filteredCards.length, knownIds, reviewIds, studyMode, autoAdvance, autoAdvanceDelayMs]);\n\n  useEffect(() => {\n    if (idx !== safeIdx) setIdx(safeIdx);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [safeIdx]);\n\n  if (!cards.length) {\n    return (\n      <section className=\"w-full max-w-5xl mx-auto mt-10 rounded-2xl border border-white/10 bg-white/5 p-8 text-center\">\n        <h2 className=\"text-2xl font-semibold\">FlashCards</h2>\n        <p className=\"mt-2 opacity-70\">Fa√ßa um upload para gerar flashcards automaticamente.</p>\n      </section>\n    );\n  }\n\n  const animClass = direction === 1 ? \"studai-enter-right\" : \"studai-enter-left\";\n  const curDifficulty = (current?.difficulty as string) || \"medium\";\n\n  function FlashcardCard({ compact }: { compact?: boolean }) {\n    if (!current) return null;\n\n    return (\n      <div className={compact ? \"\" : \"mt-5\"} style={{ perspective: \"1200px\" }}>\n        <div key={`${animKey}-${current.id}`} className={animClass}>\n          <button type=\"button\" onClick={() => setShowAnswer((v) => !v)} className=\"w-full text-left\">\n            <div\n              className={[\n                \"relative w-full rounded-2xl border border-white/10 bg-black/10\",\n                lastAction === \"known\" ? \"ring-1 ring-[#00FF8B]/40\" : \"\",\n                lastAction === \"review\" ? \"ring-1 ring-red-500/40\" : \"\",\n              ].join(\" \")}\n              style={{\n                transformStyle: \"preserve-3d\",\n                transition: \"transform 600ms cubic-bezier(.2,.8,.2,1)\",\n                transform: showAnswer ? \"rotateY(180deg)\" : \"rotateY(0deg)\",\n                minHeight: compact ? \"320px\" : \"260px\",\n              }}\n            >\n              <div\n                className=\"absolute inset-0 rounded-2xl p-8 md:p-10 flex flex-col justify-center\"\n                style={{ backfaceVisibility: \"hidden\" }}\n              >\n                <div className=\"text-sm opacity-70 mb-3\">Pergunta</div>\n                <div className=\"text-xl md:text-2xl font-semibold leading-relaxed\">{current.question}</div>\n                <div className=\"mt-4 text-sm opacity-60\">\n                  (clique/ Espa√ßo) ‚Ä¢ ‚Üê ‚Üí ‚Ä¢ A = N√£o sei ‚Ä¢ D = Sei ‚Ä¢ F = Tela cheia ‚Ä¢ R = Shuffle\n                </div>\n              </div>\n\n              <div\n                className=\"absolute inset-0 rounded-2xl p-8 md:p-10 flex flex-col justify-center\"\n                style={{ backfaceVisibility: \"hidden\", transform: \"rotateY(180deg)\" }}\n              >\n                <div className=\"text-sm opacity-70 mb-3\">Resposta</div>\n                <div className=\"text-xl md:text-2xl font-semibold leading-relaxed\">{current.answer}</div>\n                <div className=\"mt-4 text-sm opacity-60\">(clique/ Espa√ßo) ‚Ä¢ ESC = Sair</div>\n              </div>\n            </div>\n          </button>\n        </div>\n      </div>\n    );\n  }\n\n  function ControlsRow() {\n    return (\n      <div className=\"mt-6 flex flex-col md:flex-row items-center justify-between gap-3\">\n        <button\n          className=\"w-full md:w-auto px-4 py-2 rounded-xl border border-white/10 bg-white/5 hover:bg-white/10\"\n          onClick={prev}\n        >\n          Anterior\n        </button>\n\n        <div className=\"flex w-full md:w-auto gap-3\">\n          <button\n            className=\"flex-1 md:flex-none px-5 py-2 rounded-xl border border-red-500/30 bg-red-500/10 hover:bg-red-500/15 text-red-200 font-semibold\"\n            onClick={markReview}\n          >\n            N√£o sei (A)\n          </button>\n\n          <button\n            className=\"flex-1 md:flex-none px-5 py-2 rounded-xl border border-[#00FF8B]/30 bg-[#00FF8B]/10 hover:bg-[#00FF8B]/15 text-[#00FF8B] font-semibold\"\n            onClick={markKnown}\n          >\n            Sei (D)\n          </button>\n        </div>\n\n        <button\n          className=\"w-full md:w-auto px-4 py-2 rounded-xl border border-white/10 bg-white/5 hover:bg-white/10\"\n          onClick={next}\n        >\n          Pr√≥ximo\n        </button>\n      </div>\n    );\n  }\n\n  return (\n    <section className=\"w-full max-w-5xl mx-auto mt-10\">\n      <style>{`\n        @keyframes studaiEnterRight {\n          0% { opacity: 0; transform: translateX(18px) scale(.995); }\n          100% { opacity: 1; transform: translateX(0) scale(1); }\n        }\n        @keyframes studaiEnterLeft {\n          0% { opacity: 0; transform: translateX(-18px) scale(.995); }\n          100% { opacity: 1; transform: translateX(0) scale(1); }\n        }\n        .studai-enter-right { animation: studaiEnterRight 260ms ease-out; }\n        .studai-enter-left { animation: studaiEnterLeft 260ms ease-out; }\n      `}</style>\n\n      <div className=\"text-center\">\n        <div className=\"inline-flex items-center gap-2 px-3 py-1 rounded-full border border-white/10 bg-white/5 text-sm opacity-80\">\n          üéØ Flashcards gerados\n        </div>\n\n        <h2 className=\"text-3xl font-semibold mt-4\">FlashCards</h2>\n        {topic ? <p className=\"mt-2 opacity-70\">{topic}</p> : null}\n\n        <div className=\"mt-3 flex flex-col sm:flex-row items-center justify-center gap-2\">\n          <span className=\"inline-flex items-center gap-2 px-3 py-1 rounded-full border border-[#00FF8B]/20 bg-[#00FF8B]/10 text-sm\">\n            üî• Sequ√™ncia: <span className=\"font-semibold\">{Math.max(0, streak.streak)}</span> dia(s)\n          </span>\n\n          <button\n            onClick={() => (studyMode ? leaveStudyMode() : enterStudyMode())}\n            className=\"px-3 py-1 rounded-full border border-white/10 bg-white/5 hover:bg-white/10 text-sm\"\n          >\n            {studyMode ? \"Sair do Study Mode (ESC)\" : \"Study Mode (F)\"}\n          </button>\n        </div>\n\n        {topicTags?.length ? (\n          <div className=\"mt-4 flex flex-wrap justify-center gap-2\">\n            {topicTags.slice(0, 10).map((t) => (\n              <span key={t} className=\"text-xs px-3 py-1 rounded-full border border-white/10 bg-black/10 opacity-80\">\n                #{t}\n              </span>\n            ))}\n          </div>\n        ) : null}\n\n        <div className=\"mt-4 max-w-md mx-auto\">\n          <div className=\"flex items-center justify-between text-xs opacity-70\">\n            <span>Dom√≠nio (deck completo)</span>\n            <span>{masteredPct}%</span>\n          </div>\n          <div className=\"mt-2 h-2 rounded-full bg-white/10 overflow-hidden\">\n            <div className=\"h-full rounded-full bg-[#00FF8B]/40\" style={{ width: `${masteredPct}%` }} />\n          </div>\n        </div>\n      </div>\n\n      <div className=\"mt-6 grid grid-cols-1 md:grid-cols-3 gap-4\">\n        <div className=\"rounded-2xl border border-white/10 bg-white/5 p-4\">\n          <div className=\"text-sm opacity-70\">Total</div>\n          <div className=\"text-2xl font-semibold\">{cards.length}</div>\n        </div>\n        <div className=\"rounded-2xl border border-white/10 bg-white/5 p-4\">\n          <div className=\"text-sm opacity-70\">Conhecidos</div>\n          <div className=\"text-2xl font-semibold\">{knownIds.length}</div>\n        </div>\n        <div className=\"rounded-2xl border border-white/10 bg-white/5 p-4\">\n          <div className=\"text-sm opacity-70\">Para revisar</div>\n          <div className=\"text-2xl font-semibold\">{reviewIds.length}</div>\n        </div>\n      </div>\n\n      <div className=\"mt-5 rounded-2xl border border-white/10 bg-white/5 p-4\">\n        <div className=\"flex flex-col gap-4\">\n          <div className=\"flex flex-col md:flex-row items-center justify-between gap-4\">\n            <div>\n              <div className=\"font-semibold\">Auto-advance</div>\n              <div className=\"text-sm opacity-70\">Depois de marcar (A/D), vai para o pr√≥ximo automaticamente.</div>\n            </div>\n\n            <div className=\"flex flex-wrap items-center gap-3\">\n              <button\n                onClick={() => setAutoAdvance((v) => !v)}\n                className={[\n                  \"px-4 py-2 rounded-xl border text-sm\",\n                  autoAdvance\n                    ? \"border-[#00FF8B]/30 bg-[#00FF8B]/10 text-[#00FF8B]\"\n                    : \"border-white/10 bg-black/10 opacity-80 hover:bg-black/20\",\n                ].join(\" \")}\n              >\n                {autoAdvance ? \"Auto-advance: ON\" : \"Auto-advance: OFF\"}\n              </button>\n\n              <div className=\"flex items-center gap-2\">\n                <span className=\"text-xs opacity-70\">Delay</span>\n                <input\n                  type=\"number\"\n                  min={0}\n                  max={2000}\n                  value={autoAdvanceDelayMs}\n                  onChange={(e) => setAutoAdvanceDelayMs(clamp(Number(e.target.value || 0), 0, 2000))}\n                  className=\"w-24 rounded-lg border border-white/10 bg-black/20 px-3 py-2 outline-none text-sm\"\n                />\n                <span className=\"text-xs opacity-70\">ms</span>\n              </div>\n            </div>\n          </div>\n\n          <div className=\"flex flex-col md:flex-row items-center justify-between gap-4\">\n            <div>\n              <div className=\"font-semibold\">Revis√£o inteligente</div>\n              <div className=\"text-sm opacity-70\">Prioriza ‚ÄúN√£o sei‚Äù + ‚Äún√£o vistos‚Äù e intercala ‚ÄúSei‚Äù pra refor√ßo espa√ßado.</div>\n            </div>\n\n            <div className=\"flex flex-wrap items-center gap-3\">\n              <label className=\"flex items-center gap-2 text-sm opacity-90\">\n                <input\n                  type=\"checkbox\"\n                  checked={smartIncludeKnown}\n                  onChange={(e) => setSmartIncludeKnown(e.target.checked)}\n                  disabled={smartSprintReviewOnly}\n                />\n                Misturar conhecidos\n              </label>\n\n              <div className=\"flex items-center gap-2\">\n                <span className=\"text-xs opacity-70\">1 conhecido a cada</span>\n                <input\n                  type=\"number\"\n                  min={1}\n                  max={10}\n                  value={smartEvery}\n                  onChange={(e) => setSmartEvery(clamp(Number(e.target.value || 3), 1, 10))}\n                  className=\"w-20 rounded-lg border border-white/10 bg-black/20 px-3 py-2 outline-none text-sm\"\n                  disabled={smartSprintReviewOnly}\n                />\n                <span className=\"text-xs opacity-70\">priorit√°rios</span>\n              </div>\n\n              <label className=\"flex items-center gap-2 text-sm opacity-90\">\n                <input type=\"checkbox\" checked={smartShuffle} onChange={(e) => setSmartShuffle(e.target.checked)} />\n                Shuffle leve\n              </label>\n\n              <button\n                onClick={() => setSmartSeed(Date.now())}\n                className=\"px-4 py-2 rounded-xl border border-white/10 bg-black/10 hover:bg-black/20 text-sm\"\n              >\n                Re-embaralhar (R)\n              </button>\n\n              <label className=\"flex items-center gap-2 text-sm opacity-90\">\n                <input\n                  type=\"checkbox\"\n                  checked={smartSprintReviewOnly}\n                  onChange={(e) => {\n                    setSmartSprintReviewOnly(e.target.checked);\n                    setFilter(\"smart\");\n                    setIdx(0);\n                    setShowAnswer(false);\n                    setAnimKey((k) => k + 1);\n                  }}\n                />\n                Sprint ‚ÄúS√≥ N√£o-sei‚Äù\n              </label>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <div className=\"mt-5 flex items-center justify-center gap-2 flex-wrap\">\n        {([\"smart\", \"all\", \"review\", \"known\"] as const).map((f) => (\n          <button\n            key={f}\n            onClick={() => {\n              setFilter(f);\n              setDirection(1);\n              setIdx(0);\n              setShowAnswer(false);\n              setAnimKey((k) => k + 1);\n              setLastAction(null);\n            }}\n            className={[\n              \"px-4 py-2 rounded-xl border text-sm\",\n              \"border-white/10 bg-white/5 hover:bg-white/10\",\n              filter === f ? \"ring-1 ring-white/20\" : \"\",\n            ].join(\" \")}\n          >\n            {f === \"smart\" ? (smartSprintReviewOnly ? \"Sprint\" : \"Inteligente\") : f === \"all\" ? \"Todos\" : f === \"review\" ? \"Revisar\" : \"Conhecidos\"}\n          </button>\n        ))}\n      </div>\n\n      {!filteredCards.length || !current ? (\n        <div className=\"mt-6 rounded-2xl border border-white/10 bg-white/5 p-8 text-center opacity-70\">\n          {smartSprintReviewOnly ? \"Sprint conclu√≠do üéâ Voc√™ n√£o tem mais cards marcados como ‚ÄúN√£o sei‚Äù.\" : \"Nada aqui ainda para este filtro.\"}\n        </div>\n      ) : (\n        <div className=\"mt-6 rounded-2xl border border-white/10 bg-white/5 p-6\">\n          <div className=\"flex flex-wrap items-center justify-between gap-3\">\n            <div className=\"text-sm opacity-70\">\n              {safeIdx + 1} de {filteredCards.length}\n            </div>\n\n            <span className={[\"text-xs px-3 py-1 rounded-full border\", difficultyClass(curDifficulty)].join(\" \")}>\n              {difficultyLabel(curDifficulty)}\n            </span>\n          </div>\n\n          <div className=\"mt-4\">\n            <div className=\"flex items-center justify-between text-xs opacity-70\">\n              <span>Progresso (deck atual)</span>\n              <span>{deckProgressPct}%</span>\n            </div>\n            <div className=\"mt-2 h-2 rounded-full bg-white/10 overflow-hidden\">\n              <div className=\"h-full rounded-full bg-[#00FF8B]/50\" style={{ width: `${deckProgressPct}%` }} />\n            </div>\n          </div>\n\n          <FlashcardCard />\n          <ControlsRow />\n        </div>\n      )}\n\n      {studyMode ? (\n        <div className=\"fixed inset-0 z-[9998]\">\n          <div className=\"absolute inset-0 bg-black/70 backdrop-blur-sm\" onClick={leaveStudyMode} />\n          <div className=\"relative z-[9999] h-full w-full p-4 md:p-10 flex items-center justify-center\">\n            <div className=\"w-full max-w-4xl rounded-2xl border border-white/10 bg-[#0D0D0D] p-6 md:p-8\">\n              <div className=\"flex items-center justify-between gap-3 flex-wrap\">\n                <div>\n                  <div className=\"text-sm opacity-70\">Study Mode</div>\n                  <div className=\"font-semibold text-lg\">{topic || \"Flashcards\"}</div>\n                  <div className=\"text-xs opacity-60 mt-1\">ESC para sair ‚Ä¢ clique fora para fechar</div>\n                </div>\n\n                <div className=\"flex items-center gap-2\">\n                  <button\n                    onClick={() => setAutoAdvance((v) => !v)}\n                    className={[\n                      \"px-3 py-2 rounded-xl border text-sm\",\n                      autoAdvance\n                        ? \"border-[#00FF8B]/30 bg-[#00FF8B]/10 text-[#00FF8B]\"\n                        : \"border-white/10 bg-white/5 hover:bg-white/10 opacity-90\",\n                    ].join(\" \")}\n                  >\n                    {autoAdvance ? \"Auto: ON\" : \"Auto: OFF\"}\n                  </button>\n\n                  <button\n                    onClick={leaveStudyMode}\n                    className=\"px-3 py-2 rounded-xl border border-white/10 bg-white/5 hover:bg-white/10 text-sm\"\n                  >\n                    Sair (ESC)\n                  </button>\n                </div>\n              </div>\n\n              <div className=\"mt-4\">\n                <div className=\"flex items-center justify-between text-xs opacity-70\">\n                  <span>\n                    {safeIdx + 1} de {filteredCards.length} ‚Ä¢ {filter === \"smart\" ? (smartSprintReviewOnly ? \"Sprint\" : \"Inteligente\") : filter}\n                  </span>\n                  <span>{deckProgressPct}%</span>\n                </div>\n                <div className=\"mt-2 h-2 rounded-full bg-white/10 overflow-hidden\">\n                  <div className=\"h-full rounded-full bg-[#00FF8B]/50\" style={{ width: `${deckProgressPct}%` }} />\n                </div>\n              </div>\n\n              <div className=\"mt-5\">\n                <FlashcardCard compact />\n                <ControlsRow />\n              </div>\n            </div>\n          </div>\n        </div>\n      ) : null}\n    </section>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 2332, "column": 0}, "map": {"version":3,"sources":["file:///Users/ruangalvao/ProjetosVS/Projetos%20Pessoais/stud.ai-app/app-stud.ai/src/app/components/SummarySection.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useMemo, useState } from \"react\";\nimport { loadMaterial, onMaterialUpdated, StudySummary } from \"@/lib/studyMaterialStore\";\n\ntype Props = { data?: any };\n\nfunction lengthLabel(l: string) {\n  if (l === \"short\") return \"Curto\";\n  if (l === \"long\") return \"Longo\";\n  return \"M√©dio\";\n}\n\n// Estima o \"tamanho\" caso sua API n√£o retorne summary.length\nfunction estimateLength(summary: any): \"short\" | \"medium\" | \"long\" {\n  const parts: string[] = [];\n  if (summary?.title) parts.push(String(summary.title));\n\n  const mainTopics = Array.isArray(summary?.mainTopics) ? summary.mainTopics : [];\n  for (const t of mainTopics) {\n    parts.push(String(t?.title || \"\"));\n    parts.push(String(t?.content || \"\"));\n  }\n\n  const keyPoints = Array.isArray(summary?.keyPoints) ? summary.keyPoints : [];\n  for (const k of keyPoints) parts.push(String(k || \"\"));\n\n  const size = parts.join(\" \").trim().length;\n  if (size < 900) return \"short\";\n  if (size > 2200) return \"long\";\n  return \"medium\";\n}\n\nexport default function SummarySection({ data }: Props) {\n  const [topic, setTopic] = useState<string>(\"\");\n  const [tags, setTags] = useState<string[]>([]);\n  const [summary, setSummary] = useState<StudySummary | null>(null);\n\n  // 1) Se veio data do upload, usa imediatamente\n  useEffect(() => {\n    if (!data) return;\n\n    const payload = data?.topic ? data : data?.data?.topic ? data.data : data;\n    setTopic(payload?.topic ?? \"\");\n    setTags(payload?.tags ?? []);\n    setSummary(payload?.summary ?? null);\n  }, [data]);\n\n  // 2) Fallback: carrega do store (localStorage) + live update\n  useEffect(() => {\n    const refresh = () => {\n      const m = loadMaterial();\n      if (!m) return;\n      setTopic(m.topic ?? \"\");\n      setTags(m.tags ?? []);\n      setSummary(m.summary ?? null);\n    };\n\n    // S√≥ faz refresh inicial se n√£o tiver summary vindo por props\n    if (!data) refresh();\n\n    return onMaterialUpdated(refresh);\n  }, [data]);\n\n  const mainTopics = useMemo(() => {\n    const arr = (summary as any)?.mainTopics;\n    return Array.isArray(arr) ? arr : [];\n  }, [summary]);\n\n  const keyPoints = useMemo(() => {\n    const arr = (summary as any)?.keyPoints;\n    return Array.isArray(arr) ? arr : [];\n  }, [summary]);\n\n  const sourceQuotes = useMemo(() => {\n    const arr = (summary as any)?.sourceQuotes;\n    return Array.isArray(arr) ? arr : [];\n  }, [summary]);\n\n  const lengthValue = useMemo(() => {\n    const l = (summary as any)?.length;\n    return typeof l === \"string\" ? l : estimateLength(summary);\n  }, [summary]);\n\n  if (!summary) {\n    return (\n      <section className=\"w-full max-w-5xl mx-auto mt-10 rounded-2xl border border-white/10 bg-white/5 p-8 text-center\">\n        <h2 className=\"text-2xl font-semibold\">Resumos</h2>\n        <p className=\"mt-2 opacity-70\">Fa√ßa um upload para gerar um resumo automaticamente.</p>\n      </section>\n    );\n  }\n\n  return (\n    <section className=\"w-full max-w-5xl mx-auto mt-10\">\n      <div className=\"text-center\">\n        <div className=\"inline-flex items-center gap-2 px-3 py-1 rounded-full border border-white/10 bg-white/5 text-sm opacity-80\">\n          üìù Resumo gerado ‚Ä¢ {lengthLabel(lengthValue)}\n        </div>\n\n        <h2 className=\"text-3xl font-semibold mt-4\">\n          {topic ? `${topic} ‚Äî ${summary.title}` : summary.title}\n        </h2>\n\n        {tags?.length ? (\n          <div className=\"mt-4 flex flex-wrap justify-center gap-2\">\n            {tags.slice(0, 12).map((t) => (\n              <span\n                key={t}\n                className=\"text-xs px-3 py-1 rounded-full border border-white/10 bg-black/10 opacity-80\"\n              >\n                #{t}\n              </span>\n            ))}\n          </div>\n        ) : null}\n      </div>\n\n      {/* T√≥picos principais */}\n      <div className=\"mt-8 space-y-4\">\n        {mainTopics.map((t: any) => (\n          <div key={t.id ?? t.title} className=\"rounded-2xl border border-white/10 bg-white/5 p-6\">\n            <div className=\"flex items-center gap-3\">\n              <div className=\"text-xl\">{t.icon || \"üìò\"}</div>\n              <div className=\"font-semibold text-lg\">{t.title}</div>\n            </div>\n\n            {/* tags opcionais no t√≥pico (se existir) */}\n            {Array.isArray(t?.tags) && t.tags.length ? (\n              <div className=\"mt-3 flex flex-wrap gap-2\">\n                {t.tags.slice(0, 10).map((tag: string) => (\n                  <span\n                    key={tag}\n                    className=\"text-xs px-3 py-1 rounded-full border border-white/10 bg-black/10 opacity-80\"\n                  >\n                    #{tag}\n                  </span>\n                ))}\n              </div>\n            ) : null}\n\n            <p className=\"mt-4 opacity-80 leading-relaxed\">{t.content}</p>\n          </div>\n        ))}\n      </div>\n\n      {/* Pontos-chave */}\n      {keyPoints.length ? (\n        <div className=\"mt-8 rounded-2xl border border-white/10 bg-white/5 p-6\">\n          <h3 className=\"text-lg font-semibold\">Pontos-chave</h3>\n          <ul className=\"mt-4 list-disc pl-6 space-y-2 opacity-80\">\n            {keyPoints.map((k: string, i: number) => (\n              <li key={i}>{k}</li>\n            ))}\n          </ul>\n        </div>\n      ) : null}\n\n      {/* Cita√ß√µes/Evid√™ncias (opcional, s√≥ se existir sourceQuotes) */}\n      <div className=\"mt-8 rounded-2xl border border-white/10 bg-white/5 p-6\">\n        <div className=\"flex items-center justify-between flex-wrap gap-3\">\n          <h3 className=\"text-lg font-semibold\">Trechos do material</h3>\n          <div className=\"text-sm opacity-70\">\n            {sourceQuotes.length ? `${sourceQuotes.length} trecho(s)` : \"Sem trechos dispon√≠veis\"}\n          </div>\n        </div>\n\n        {!sourceQuotes.length ? (\n          <p className=\"mt-3 opacity-70\">\n            Se o arquivo for imagem com texto pouco leg√≠vel, ou PDF sem extra√ß√£o de texto, a IA pode n√£o conseguir citar.\n          </p>\n        ) : (\n          <div className=\"mt-5 grid grid-cols-1 md:grid-cols-2 gap-4\">\n            {sourceQuotes.map((q: any, i: number) => (\n              <div key={i} className=\"rounded-2xl border border-white/10 bg-black/10 p-5\">\n                <div className=\"text-sm opacity-70\">Trecho</div>\n                <p className=\"mt-2 italic opacity-90\">‚Äú{q.quote}‚Äù</p>\n                <div className=\"mt-4 text-sm opacity-70\">Por que importa</div>\n                <p className=\"mt-2 opacity-80\">{q.whyItMatters}</p>\n              </div>\n            ))}\n          </div>\n        )}\n      </div>\n    </section>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 2694, "column": 0}, "map": {"version":3,"sources":["file:///Users/ruangalvao/ProjetosVS/Projetos%20Pessoais/stud.ai-app/app-stud.ai/src/app/components/ProgressSection.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useMemo, useState } from \"react\";\nimport { loadMaterial, onMaterialUpdated, Flashcard } from \"@/lib/studyMaterialStore\";\nimport { makeProgressKey, loadProgress, onProgressUpdated, clearProgress } from \"@/lib/studyProgressStore\";\n\nfunction pct(n: number) {\n  return Math.max(0, Math.min(100, Math.round(n)));\n}\n\nfunction labelDifficulty(d: string) {\n  if (d === \"easy\") return \"F√°cil\";\n  if (d === \"hard\") return \"Dif√≠cil\";\n  return \"M√©dio\";\n}\n\nexport default function ProgressSection() {\n  const [topic, setTopic] = useState(\"\");\n  const [cards, setCards] = useState<Flashcard[]>([]);\n  const [knownIds, setKnownIds] = useState<number[]>([]);\n  const [reviewIds, setReviewIds] = useState<number[]>([]);\n  const [updatedAt, setUpdatedAt] = useState<number | null>(null);\n\n  const key = useMemo(() => makeProgressKey(topic, cards.length), [topic, cards.length]);\n\n  const refresh = () => {\n    const m = loadMaterial();\n    const t = m?.topic ?? \"\";\n    const c = m?.flashcards ?? [];\n\n    setTopic(t);\n    setCards(c);\n\n    const k = makeProgressKey(t, c.length);\n    const p = loadProgress(k);\n\n    setKnownIds(p?.knownIds ?? []);\n    setReviewIds(p?.reviewIds ?? []);\n    setUpdatedAt(p?.updatedAt ?? null);\n  };\n\n  useEffect(() => {\n    refresh();\n    const off1 = onMaterialUpdated(refresh);\n    const off2 = onProgressUpdated(refresh);\n    return () => {\n      off1?.();\n      off2?.();\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  const total = cards.length;\n  const known = knownIds.length;\n  const review = reviewIds.length;\n\n  const masteredPct = total ? pct((known / total) * 100) : 0;\n\n  const remaining = Math.max(0, total - known - review);\n\n  const byDifficulty = useMemo(() => {\n    const diffs: Array<\"easy\" | \"medium\" | \"hard\"> = [\"easy\", \"medium\", \"hard\"];\n    return diffs.map((d) => {\n      const group = cards.filter((c) => c.difficulty === d);\n      const totalD = group.length;\n      const knownD = group.filter((c) => knownIds.includes(c.id)).length;\n      const reviewD = group.filter((c) => reviewIds.includes(c.id)).length;\n      const pctD = totalD ? pct((knownD / totalD) * 100) : 0;\n      return { d, totalD, knownD, reviewD, pctD };\n    });\n  }, [cards, knownIds, reviewIds]);\n\n  if (!total) {\n    return (\n      <section className=\"w-full max-w-5xl mx-auto mt-10 rounded-2xl border border-white/10 bg-white/5 p-8 text-center\">\n        <h2 className=\"text-2xl font-semibold\">Progresso</h2>\n        <p className=\"mt-2 opacity-70\">Fa√ßa upload e gere flashcards para acompanhar seu progresso.</p>\n      </section>\n    );\n  }\n\n  return (\n    <section className=\"w-full max-w-5xl mx-auto mt-10\">\n      <div className=\"text-center\">\n        <div className=\"inline-flex items-center gap-2 px-3 py-1 rounded-full border border-white/10 bg-white/5 text-sm opacity-80\">\n          üìä Progresso\n        </div>\n        <h2 className=\"text-3xl font-semibold mt-4\">Acompanhe seu Progresso</h2>\n        {topic ? <p className=\"mt-2 opacity-70\">{topic}</p> : null}\n      </div>\n\n      {/* Barra principal */}\n      <div className=\"mt-6 rounded-2xl border border-white/10 bg-white/5 p-6\">\n        <div className=\"flex items-center justify-between gap-4 flex-wrap\">\n          <div>\n            <div className=\"text-sm opacity-70\">Dominado</div>\n            <div className=\"text-3xl font-semibold\">{masteredPct}%</div>\n          </div>\n\n          <div className=\"text-sm opacity-70\">\n            {updatedAt ? `Atualizado: ${new Date(updatedAt).toLocaleString()}` : \"\"}\n          </div>\n        </div>\n\n        <div className=\"mt-5 h-3 rounded-full bg-white/10 overflow-hidden\">\n          <div className=\"h-full bg-green-500/40 rounded-full\" style={{ width: `${masteredPct}%` }} />\n        </div>\n\n        <div className=\"mt-5 grid grid-cols-1 md:grid-cols-3 gap-4\">\n          <div className=\"rounded-2xl border border-white/10 bg-black/10 p-4\">\n            <div className=\"text-sm opacity-70\">Conhecidos</div>\n            <div className=\"text-2xl font-semibold\">{known}</div>\n          </div>\n          <div className=\"rounded-2xl border border-white/10 bg-black/10 p-4\">\n            <div className=\"text-sm opacity-70\">Para revisar</div>\n            <div className=\"text-2xl font-semibold\">{review}</div>\n          </div>\n          <div className=\"rounded-2xl border border-white/10 bg-black/10 p-4\">\n            <div className=\"text-sm opacity-70\">N√£o vistos</div>\n            <div className=\"text-2xl font-semibold\">{remaining}</div>\n          </div>\n        </div>\n\n        <div className=\"mt-6 flex justify-end\">\n          <button\n            onClick={() => clearProgress(key)}\n            className=\"px-4 py-2 rounded-xl border border-white/10 bg-white/5 hover:bg-white/10 text-sm\"\n          >\n            Resetar progresso\n          </button>\n        </div>\n      </div>\n\n      {/* Por dificuldade */}\n      <div className=\"mt-6 grid grid-cols-1 md:grid-cols-3 gap-4\">\n        {byDifficulty.map((x) => (\n          <div key={x.d} className=\"rounded-2xl border border-white/10 bg-white/5 p-5\">\n            <div className=\"flex items-center justify-between\">\n              <div className=\"font-semibold\">{labelDifficulty(x.d)}</div>\n              <div className=\"text-sm opacity-70\">{x.pctD}%</div>\n            </div>\n\n            <div className=\"mt-3 h-2 rounded-full bg-white/10 overflow-hidden\">\n              <div\n                className={[\n                  \"h-full rounded-full\",\n                  x.d === \"easy\" ? \"bg-green-500/40\" : x.d === \"hard\" ? \"bg-red-500/40\" : \"bg-yellow-500/40\",\n                ].join(\" \")}\n                style={{ width: `${x.pctD}%` }}\n              />\n            </div>\n\n            <div className=\"mt-4 grid grid-cols-3 gap-2 text-center\">\n              <div className=\"rounded-xl border border-white/10 bg-black/10 p-3\">\n                <div className=\"text-xs opacity-70\">Total</div>\n                <div className=\"text-lg font-semibold\">{x.totalD}</div>\n              </div>\n              <div className=\"rounded-xl border border-white/10 bg-black/10 p-3\">\n                <div className=\"text-xs opacity-70\">Conhecidos</div>\n                <div className=\"text-lg font-semibold\">{x.knownD}</div>\n              </div>\n              <div className=\"rounded-xl border border-white/10 bg-black/10 p-3\">\n                <div className=\"text-xs opacity-70\">Revisar</div>\n                <div className=\"text-lg font-semibold\">{x.reviewD}</div>\n              </div>\n            </div>\n          </div>\n        ))}\n      </div>\n    </section>\n  );\n}\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AAJA;;;;;AAMA,SAAS,IAAI,CAAS;IACpB,OAAO,KAAK,GAAG,CAAC,GAAG,KAAK,GAAG,CAAC,KAAK,KAAK,KAAK,CAAC;AAC9C;AAEA,SAAS,gBAAgB,CAAS;IAChC,IAAI,MAAM,QAAQ,OAAO;IACzB,IAAI,MAAM,QAAQ,OAAO;IACzB,OAAO;AACT;AAEe,SAAS;IACtB,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACnC,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAe,EAAE;IAClD,MAAM,CAAC,UAAU,YAAY,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAY,EAAE;IACrD,MAAM,CAAC,WAAW,aAAa,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAY,EAAE;IACvD,MAAM,CAAC,WAAW,aAAa,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAiB;IAE1D,MAAM,MAAM,CAAA,GAAA,qMAAA,CAAA,UAAO,AAAD,EAAE,IAAM,CAAA,GAAA,gIAAA,CAAA,kBAAe,AAAD,EAAE,OAAO,MAAM,MAAM,GAAG;QAAC;QAAO,MAAM,MAAM;KAAC;IAErF,MAAM,UAAU;QACd,MAAM,IAAI,CAAA,GAAA,gIAAA,CAAA,eAAY,AAAD;QACrB,MAAM,IAAI,GAAG,SAAS;QACtB,MAAM,IAAI,GAAG,cAAc,EAAE;QAE7B,SAAS;QACT,SAAS;QAET,MAAM,IAAI,CAAA,GAAA,gIAAA,CAAA,kBAAe,AAAD,EAAE,GAAG,EAAE,MAAM;QACrC,MAAM,IAAI,CAAA,GAAA,gIAAA,CAAA,eAAY,AAAD,EAAE;QAEvB,YAAY,GAAG,YAAY,EAAE;QAC7B,aAAa,GAAG,aAAa,EAAE;QAC/B,aAAa,GAAG,aAAa;IAC/B;IAEA,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR;QACA,MAAM,OAAO,CAAA,GAAA,gIAAA,CAAA,oBAAiB,AAAD,EAAE;QAC/B,MAAM,OAAO,CAAA,GAAA,gIAAA,CAAA,oBAAiB,AAAD,EAAE;QAC/B,OAAO;YACL;YACA;QACF;IACA,uDAAuD;IACzD,GAAG,EAAE;IAEL,MAAM,QAAQ,MAAM,MAAM;IAC1B,MAAM,QAAQ,SAAS,MAAM;IAC7B,MAAM,SAAS,UAAU,MAAM;IAE/B,MAAM,cAAc,QAAQ,IAAI,AAAC,QAAQ,QAAS,OAAO;IAEzD,MAAM,YAAY,KAAK,GAAG,CAAC,GAAG,QAAQ,QAAQ;IAE9C,MAAM,eAAe,CAAA,GAAA,qMAAA,CAAA,UAAO,AAAD,EAAE;QAC3B,MAAM,QAA2C;YAAC;YAAQ;YAAU;SAAO;QAC3E,OAAO,MAAM,GAAG,CAAC,CAAC;YAChB,MAAM,QAAQ,MAAM,MAAM,CAAC,CAAC,IAAM,EAAE,UAAU,KAAK;YACnD,MAAM,SAAS,MAAM,MAAM;YAC3B,MAAM,SAAS,MAAM,MAAM,CAAC,CAAC,IAAM,SAAS,QAAQ,CAAC,EAAE,EAAE,GAAG,MAAM;YAClE,MAAM,UAAU,MAAM,MAAM,CAAC,CAAC,IAAM,UAAU,QAAQ,CAAC,EAAE,EAAE,GAAG,MAAM;YACpE,MAAM,OAAO,SAAS,IAAI,AAAC,SAAS,SAAU,OAAO;YACrD,OAAO;gBAAE;gBAAG;gBAAQ;gBAAQ;gBAAS;YAAK;QAC5C;IACF,GAAG;QAAC;QAAO;QAAU;KAAU;IAE/B,IAAI,CAAC,OAAO;QACV,qBACE,8OAAC;YAAQ,WAAU;;8BACjB,8OAAC;oBAAG,WAAU;8BAAyB;;;;;;8BACvC,8OAAC;oBAAE,WAAU;8BAAkB;;;;;;;;;;;;IAGrC;IAEA,qBACE,8OAAC;QAAQ,WAAU;;0BACjB,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAI,WAAU;kCAA6G;;;;;;kCAG5H,8OAAC;wBAAG,WAAU;kCAA8B;;;;;;oBAC3C,sBAAQ,8OAAC;wBAAE,WAAU;kCAAmB;;;;;+BAAa;;;;;;;0BAIxD,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;;kDACC,8OAAC;wCAAI,WAAU;kDAAqB;;;;;;kDACpC,8OAAC;wCAAI,WAAU;;4CAA0B;4CAAY;;;;;;;;;;;;;0CAGvD,8OAAC;gCAAI,WAAU;0CACZ,YAAY,CAAC,YAAY,EAAE,IAAI,KAAK,WAAW,cAAc,IAAI,GAAG;;;;;;;;;;;;kCAIzE,8OAAC;wBAAI,WAAU;kCACb,cAAA,8OAAC;4BAAI,WAAU;4BAAsC,OAAO;gCAAE,OAAO,GAAG,YAAY,CAAC,CAAC;4BAAC;;;;;;;;;;;kCAGzF,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAI,WAAU;;kDACb,8OAAC;wCAAI,WAAU;kDAAqB;;;;;;kDACpC,8OAAC;wCAAI,WAAU;kDAA0B;;;;;;;;;;;;0CAE3C,8OAAC;gCAAI,WAAU;;kDACb,8OAAC;wCAAI,WAAU;kDAAqB;;;;;;kDACpC,8OAAC;wCAAI,WAAU;kDAA0B;;;;;;;;;;;;0CAE3C,8OAAC;gCAAI,WAAU;;kDACb,8OAAC;wCAAI,WAAU;kDAAqB;;;;;;kDACpC,8OAAC;wCAAI,WAAU;kDAA0B;;;;;;;;;;;;;;;;;;kCAI7C,8OAAC;wBAAI,WAAU;kCACb,cAAA,8OAAC;4BACC,SAAS,IAAM,CAAA,GAAA,gIAAA,CAAA,gBAAa,AAAD,EAAE;4BAC7B,WAAU;sCACX;;;;;;;;;;;;;;;;;0BAOL,8OAAC;gBAAI,WAAU;0BACZ,aAAa,GAAG,CAAC,CAAC,kBACjB,8OAAC;wBAAc,WAAU;;0CACvB,8OAAC;gCAAI,WAAU;;kDACb,8OAAC;wCAAI,WAAU;kDAAiB,gBAAgB,EAAE,CAAC;;;;;;kDACnD,8OAAC;wCAAI,WAAU;;4CAAsB,EAAE,IAAI;4CAAC;;;;;;;;;;;;;0CAG9C,8OAAC;gCAAI,WAAU;0CACb,cAAA,8OAAC;oCACC,WAAW;wCACT;wCACA,EAAE,CAAC,KAAK,SAAS,oBAAoB,EAAE,CAAC,KAAK,SAAS,kBAAkB;qCACzE,CAAC,IAAI,CAAC;oCACP,OAAO;wCAAE,OAAO,GAAG,EAAE,IAAI,CAAC,CAAC,CAAC;oCAAC;;;;;;;;;;;0CAIjC,8OAAC;gCAAI,WAAU;;kDACb,8OAAC;wCAAI,WAAU;;0DACb,8OAAC;gDAAI,WAAU;0DAAqB;;;;;;0DACpC,8OAAC;gDAAI,WAAU;0DAAyB,EAAE,MAAM;;;;;;;;;;;;kDAElD,8OAAC;wCAAI,WAAU;;0DACb,8OAAC;gDAAI,WAAU;0DAAqB;;;;;;0DACpC,8OAAC;gDAAI,WAAU;0DAAyB,EAAE,MAAM;;;;;;;;;;;;kDAElD,8OAAC;wCAAI,WAAU;;0DACb,8OAAC;gDAAI,WAAU;0DAAqB;;;;;;0DACpC,8OAAC;gDAAI,WAAU;0DAAyB,EAAE,OAAO;;;;;;;;;;;;;;;;;;;uBA3B7C,EAAE,CAAC;;;;;;;;;;;;;;;;AAmCvB","debugId":null}},
    {"offset": {"line": 3168, "column": 0}, "map": {"version":3,"sources":["file:///Users/ruangalvao/ProjetosVS/Projetos%20Pessoais/stud.ai-app/app-stud.ai/src/app/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState } from \"react\";\nimport { Upload, Sparkles, BookOpen, TrendingUp, Trophy, Users } from \"lucide-react\";\nimport UploadSection from \"./components/UploadSection\";\nimport FlashcardsSection from \"./components/FlashcardsSection\";\nimport SummarySection from \"./components/SummarySection\";\nimport ProgressSection from \"./components/ProgressSection\";\n\ntype Section = \"upload\" | \"flashcards\" | \"summary\" | \"progress\";\n\nexport default function Home() {\n  const [activeSection, setActiveSection] = useState<Section>(\"upload\");\n  const [studyData, setStudyData] = useState<any>(null);\n\n  return (\n    <div className=\"min-h-screen bg-[#0D0D0D]\">\n      <header className=\"border-b border-[#1A1A1A] backdrop-blur-sm bg-[#0D0D0D]/80 sticky top-0 z-50\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <div className=\"flex items-center justify-between h-16\">\n            <div className=\"flex items-center gap-2\">\n              <div className=\"w-8 h-8 rounded-lg bg-gradient-to-br from-[#00FF8B] to-[#007B5F] flex items-center justify-center\">\n                <Sparkles className=\"w-5 h-5 text-[#0D0D0D]\" />\n              </div>\n              <h1 className=\"text-xl sm:text-2xl font-bold bg-gradient-to-r from-[#00FF8B] to-[#007B5F] bg-clip-text text-transparent\">\n                Stud.ai\n              </h1>\n            </div>\n\n            <nav className=\"hidden md:flex items-center gap-1\">\n              <NavButton icon={Upload} label=\"Upload\" active={activeSection === \"upload\"} onClick={() => setActiveSection(\"upload\")} />\n              <NavButton icon={BookOpen} label=\"FlashCards\" active={activeSection === \"flashcards\"} onClick={() => setActiveSection(\"flashcards\")} />\n              <NavButton icon={Sparkles} label=\"Resumos\" active={activeSection === \"summary\"} onClick={() => setActiveSection(\"summary\")} />\n              <NavButton icon={TrendingUp} label=\"Progresso\" active={activeSection === \"progress\"} onClick={() => setActiveSection(\"progress\")} />\n            </nav>\n\n            <div className=\"hidden sm:flex items-center gap-2 px-3 py-1.5 rounded-full bg-[#1A1A1A] border border-[#00FF8B]/20\">\n              <Trophy className=\"w-4 h-4 text-[#00FF8B]\" />\n              <span className=\"text-sm font-medium\">N√≠vel 5</span>\n            </div>\n          </div>\n\n          <div className=\"md:hidden flex items-center gap-1 pb-3 overflow-x-auto\">\n            <NavButton icon={Upload} label=\"Upload\" active={activeSection === \"upload\"} onClick={() => setActiveSection(\"upload\")} mobile />\n            <NavButton icon={BookOpen} label=\"Cards\" active={activeSection === \"flashcards\"} onClick={() => setActiveSection(\"flashcards\")} mobile />\n            <NavButton icon={Sparkles} label=\"Resumos\" active={activeSection === \"summary\"} onClick={() => setActiveSection(\"summary\")} mobile />\n            <NavButton icon={TrendingUp} label=\"Progresso\" active={activeSection === \"progress\"} onClick={() => setActiveSection(\"progress\")} mobile />\n          </div>\n        </div>\n      </header>\n\n      <main className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6 sm:py-8\">\n        {activeSection === \"upload\" && (\n          <UploadSection\n            onDataProcessed={(data) => {\n              setStudyData(data);\n            }}\n            onNavigate={(section) => setActiveSection(section)}\n          />\n        )}\n\n        {activeSection === \"flashcards\" && <FlashcardsSection data={studyData} />}\n        {activeSection === \"summary\" && <SummarySection data={studyData} />}\n        {activeSection === \"progress\" && <ProgressSection />}\n      </main>\n\n      <footer className=\"border-t border-[#1A1A1A] mt-12 py-8\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <div className=\"flex flex-col sm:flex-row items-center justify-between gap-4\">\n            <div className=\"flex items-center gap-2 text-sm text-gray-400\">\n              <Users className=\"w-4 h-4 text-[#00FF8B]\" />\n              <span>+1.2k estudantes ativos hoje</span>\n            </div>\n            <div className=\"text-sm text-gray-500\">Feito com üíö para estudantes</div>\n          </div>\n        </div>\n      </footer>\n    </div>\n  );\n}\n\nfunction NavButton({\n  icon: Icon,\n  label,\n  active,\n  onClick,\n  mobile = false,\n}: {\n  icon: any;\n  label: string;\n  active: boolean;\n  onClick: () => void;\n  mobile?: boolean;\n}) {\n  return (\n    <button\n      onClick={onClick}\n      className={`\n        flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition-all duration-300\n        ${mobile ? \"text-xs whitespace-nowrap\" : \"text-sm\"}\n        ${\n          active\n            ? \"bg-[#00FF8B]/10 text-[#00FF8B] border border-[#00FF8B]/30\"\n            : \"text-gray-400 hover:text-white hover:bg-[#1A1A1A]\"\n        }\n      `}\n    >\n      <Icon className=\"w-4 h-4\" />\n      <span>{label}</span>\n    </button>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}