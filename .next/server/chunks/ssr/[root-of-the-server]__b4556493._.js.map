{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 29, "column": 0}, "map": {"version":3,"sources":["file:///Users/ruangalvao/ProjetosVS/Projetos%20Pessoais/stud.ai-app/app-stud.ai/src/app/components/UploadSection.tsx"],"sourcesContent":["\"use client\";\n\nimport { useMemo, useRef, useState } from \"react\";\nimport { useRouter } from \"next/navigation\";\n\ntype SummaryStyle = \"bullet\" | \"explained\";\ntype Difficulty = \"easy\" | \"medium\" | \"hard\";\n\ntype ApiOk = {\n  success: true;\n  data: any;\n  meta?: {\n    materialId?: string;\n    usage?: {\n      plan?: \"FREE\" | \"PRO\" | \"ADMIN\";\n      monthlyUsed?: number | null;\n      limit?: number | null;\n    };\n    options?: {\n      flashcardsCount?: number;\n      topicsCount?: number;\n      summaryStyle?: SummaryStyle;\n      flashcardDifficulty?: Difficulty;\n    };\n  };\n};\n\ntype ApiErr = {\n  success: false;\n  error?: string;\n  details?: string;\n  code?: string;\n  meta?: any;\n};\n\ntype Props = {\n  onDataProcessed?: (data: any) => void; // opcional, mant√©m compatibilidade\n};\n\nexport default function UploadSection({ onDataProcessed }: Props) {\n  const router = useRouter();\n  const inputRef = useRef<HTMLInputElement | null>(null);\n\n  const [isUploading, setIsUploading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n\n  // ‚úÖ op√ß√µes (como voc√™ pediu)\n  const [summaryStyle, setSummaryStyle] = useState<SummaryStyle>(\"explained\");\n  const [difficulty, setDifficulty] = useState<Difficulty>(\"medium\");\n  const [flashcardsCount, setFlashcardsCount] = useState<number>(10);\n\n  // ‚úÖ sucesso + navega√ß√£o\n  const [success, setSuccess] = useState(false);\n  const [lastMaterialId, setLastMaterialId] = useState<string | null>(null);\n  const [lastFilename, setLastFilename] = useState<string | null>(null);\n\n  const flashcardsHint = useMemo(() => {\n    if (difficulty === \"easy\") return \"F√°cil (conceitos b√°sicos)\";\n    if (difficulty === \"hard\") return \"Dif√≠cil (aplica√ß√£o e pegadinhas)\";\n    return \"M√©dio (conceitos e rela√ß√µes)\";\n  }, [difficulty]);\n\n  function onPickFile() {\n    inputRef.current?.click();\n  }\n\n  async function onFileChange(e: React.ChangeEvent<HTMLInputElement>) {\n    const file = e.target.files?.[0];\n    if (!file) return;\n    await handleUpload(file);\n    e.target.value = \"\";\n  }\n\n  async function onDrop(e: React.DragEvent<HTMLDivElement>) {\n    e.preventDefault();\n    const file = e.dataTransfer.files?.[0];\n    if (!file) return;\n    await handleUpload(file);\n  }\n\n  function onDragOver(e: React.DragEvent<HTMLDivElement>) {\n    e.preventDefault();\n  }\n\n  async function handleUpload(file: File) {\n    setError(null);\n    setSuccess(false);\n    setIsUploading(true);\n    setLastFilename(file.name);\n\n    try {\n      const formData = new FormData();\n      formData.append(\"file\", file);\n\n      // ‚úÖ manda op√ß√µes para o route.ts\n      formData.append(\"summaryStyle\", summaryStyle);\n      formData.append(\"flashcardDifficulty\", difficulty);\n      formData.append(\"flashcardsCount\", String(flashcardsCount));\n\n      // opcional: manter topicsCount fixo por agora\n      formData.append(\"topicsCount\", \"4\");\n\n      const response = await fetch(\"/api/process-study-material\", {\n        method: \"POST\",\n        body: formData,\n      });\n\n      const json = (await response.json()) as ApiOk | ApiErr;\n\n      if (!response.ok || !(json as any)?.success) {\n        const j = json as ApiErr;\n\n        // limite free\n        if (response.status === 402 && j.code === \"LIMIT_REACHED\") {\n          setError(\"Voc√™ atingiu o limite mensal do plano gr√°tis. Assine para continuar.\");\n          // manda pro pricing (se existir)\n          router.push(\"/pricing\");\n          return;\n        }\n\n        throw new Error(j.details || j.error || \"Falha ao processar arquivo\");\n      }\n\n      const ok = json as ApiOk;\n\n      // ‚úÖ salva no state do app (compat√≠vel com seu page.tsx)\n      onDataProcessed?.(ok.data);\n\n      // ‚úÖ persist√™ncia: materialId + data no localStorage\n      // (mesmo que o app reinicie, voc√™ consegue recuperar)\n      const materialId = ok.meta?.materialId || null;\n      setLastMaterialId(materialId);\n      setSuccess(true);\n\n      try {\n        localStorage.setItem(\"studai:lastMaterialId:v1\", materialId || \"\");\n        localStorage.setItem(\"studai:lastMaterialData:v1\", JSON.stringify(ok.data));\n        localStorage.setItem(\"studai:lastMaterialFilename:v1\", file.name);\n      } catch {\n        // ignore\n      }\n    } catch (e: any) {\n      setError(e?.message || \"Erro inesperado\");\n    } finally {\n      setIsUploading(false);\n    }\n  }\n\n  return (\n    <section className=\"w-full\">\n      {/* ‚úÖ op√ß√µes (como era antes) */}\n      <div className=\"mb-6 grid grid-cols-1 md:grid-cols-3 gap-4\">\n        {/* Tipo de resumo */}\n        <div className=\"rounded-2xl border border-[#1A1A1A] bg-[#0D0D0D] p-4\">\n          <div className=\"text-sm font-semibold text-white mb-2\">Tipo de resumo</div>\n\n          <div className=\"flex gap-2\">\n            <button\n              type=\"button\"\n              onClick={() => setSummaryStyle(\"bullet\")}\n              className={`px-3 py-2 rounded-xl border text-sm transition\n              ${\n                summaryStyle === \"bullet\"\n                  ? \"border-[#00FF8B]/40 bg-[#00FF8B]/10 text-[#00FF8B]\"\n                  : \"border-[#1A1A1A] text-gray-300 hover:bg-[#1A1A1A]\"\n              }`}\n            >\n              Bullet\n            </button>\n\n            <button\n              type=\"button\"\n              onClick={() => setSummaryStyle(\"explained\")}\n              className={`px-3 py-2 rounded-xl border text-sm transition\n              ${\n                summaryStyle === \"explained\"\n                  ? \"border-[#00FF8B]/40 bg-[#00FF8B]/10 text-[#00FF8B]\"\n                  : \"border-[#1A1A1A] text-gray-300 hover:bg-[#1A1A1A]\"\n              }`}\n            >\n              Explicado\n            </button>\n          </div>\n\n          <div className=\"mt-2 text-xs text-gray-400\">\n            {summaryStyle === \"bullet\"\n              ? \"Resumo objetivo em t√≥picos.\"\n              : \"Resumo detalhado em texto explicado.\"}\n          </div>\n        </div>\n\n        {/* Dificuldade */}\n        <div className=\"rounded-2xl border border-[#1A1A1A] bg-[#0D0D0D] p-4\">\n          <div className=\"text-sm font-semibold text-white mb-2\">Dificuldade dos flashcards</div>\n\n          <div className=\"flex gap-2 flex-wrap\">\n            {([\"easy\", \"medium\", \"hard\"] as Difficulty[]).map((d) => (\n              <button\n                key={d}\n                type=\"button\"\n                onClick={() => setDifficulty(d)}\n                className={`px-3 py-2 rounded-xl border text-sm transition\n                ${\n                  difficulty === d\n                    ? \"border-[#00FF8B]/40 bg-[#00FF8B]/10 text-[#00FF8B]\"\n                    : \"border-[#1A1A1A] text-gray-300 hover:bg-[#1A1A1A]\"\n                }`}\n              >\n                {d === \"easy\" ? \"F√°cil\" : d === \"medium\" ? \"M√©dio\" : \"Dif√≠cil\"}\n              </button>\n            ))}\n          </div>\n\n          <div className=\"mt-2 text-xs text-gray-400\">{flashcardsHint}</div>\n        </div>\n\n        {/* Quantidade */}\n        <div className=\"rounded-2xl border border-[#1A1A1A] bg-[#0D0D0D] p-4\">\n          <div className=\"text-sm font-semibold text-white mb-2\">Quantidade de flashcards</div>\n\n          <div className=\"flex items-center gap-3\">\n            <input\n              type=\"range\"\n              min={5}\n              max={30}\n              value={flashcardsCount}\n              onChange={(e) => setFlashcardsCount(Number(e.target.value))}\n              className=\"w-full accent-[#00FF8B]\"\n            />\n            <div className=\"w-10 text-right text-sm text-gray-200\">{flashcardsCount}</div>\n          </div>\n\n          <div className=\"mt-2 text-xs text-gray-400\">Entre 5 e 30</div>\n        </div>\n      </div>\n\n      {/* ‚úÖ √°rea de upload (visual como antes) */}\n      <input\n        ref={inputRef}\n        type=\"file\"\n        className=\"hidden\"\n        onChange={onFileChange}\n        accept=\"image/*,application/pdf,text/plain\"\n      />\n\n      <div\n        onDrop={onDrop}\n        onDragOver={onDragOver}\n        className=\"w-full rounded-2xl border border-dashed border-[#00FF8B]/25 bg-[#0D0D0D] p-10 text-center\"\n      >\n        <div className=\"text-lg font-semibold text-white\">Arraste e solte seu arquivo aqui</div>\n        <div className=\"mt-2 text-sm text-gray-400\">ou clique para selecionar</div>\n\n        <button\n          type=\"button\"\n          onClick={onPickFile}\n          disabled={isUploading}\n          className=\"mt-6 inline-flex items-center justify-center rounded-xl border border-[#1A1A1A] px-5 py-2 text-sm text-gray-200 hover:bg-[#1A1A1A] disabled:opacity-60\"\n        >\n          {isUploading ? \"Processando...\" : \"Selecionar arquivo\"}\n        </button>\n\n        {lastFilename ? (\n          <div className=\"mt-4 text-xs text-gray-500\">Arquivo: {lastFilename}</div>\n        ) : null}\n\n        {error ? (\n          <div className=\"mt-4 text-sm text-red-400\">{error}</div>\n        ) : null}\n\n        {/* ‚úÖ sucesso + bot√µes */}\n        {success ? (\n          <div className=\"mt-6 rounded-xl border border-[#00FF8B]/25 bg-[#00FF8B]/10 p-4 text-left max-w-xl mx-auto\">\n            <div className=\"text-sm font-semibold text-[#00FF8B]\">‚úÖ Conclu√≠do!</div>\n            <div className=\"mt-1 text-xs text-gray-300\">\n              Material gerado com sucesso. Voc√™ pode ir direto para Flashcards ou Resumo.\n            </div>\n\n            <div className=\"mt-4 flex flex-col sm:flex-row gap-2\">\n              <button\n                type=\"button\"\n                onClick={() => router.push(\"/flashcards\")}\n                className=\"rounded-xl bg-[#00FF8B] text-[#0D0D0D] px-4 py-2 text-sm font-semibold hover:opacity-90\"\n              >\n                Ir para Flashcards\n              </button>\n\n              <button\n                type=\"button\"\n                onClick={() => router.push(\"/summary\")}\n                className=\"rounded-xl border border-[#00FF8B]/35 bg-transparent text-[#00FF8B] px-4 py-2 text-sm font-semibold hover:bg-[#00FF8B]/10\"\n              >\n                Ir para Resumo\n              </button>\n            </div>\n\n            {lastMaterialId ? (\n              <div className=\"mt-3 text-[11px] text-gray-500\">\n                materialId: <span className=\"font-mono\">{lastMaterialId}</span>\n              </div>\n            ) : null}\n          </div>\n        ) : null}\n      </div>\n    </section>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 448, "column": 0}, "map": {"version":3,"sources":["file:///Users/ruangalvao/ProjetosVS/Projetos%20Pessoais/stud.ai-app/app-stud.ai/src/lib/studyMaterialStore.ts"],"sourcesContent":["// src/lib/studyMaterialStore.ts\nexport type Flashcard = {\n  id: number;\n  question: string;\n  answer: string;\n};\n\nexport type SummaryTopic = {\n  id: number;\n  title: string;\n  content: string;\n  icon: string;\n};\n\nexport type StudySummary = {\n  title: string;\n  mainTopics: SummaryTopic[];\n  keyPoints: string[];\n};\n\nexport type StudyMaterial = {\n  topic: string;\n  flashcards: Flashcard[];\n  summary: StudySummary;\n  // opcionais (se voc√™ quiser usar depois)\n  materialId?: string;\n  createdAt?: string;\n};\n\nconst STORAGE_KEY = \"studai:lastMaterial:v1\";\nconst EVENT_NAME = \"studai:material_updated\";\n\nexport function normalizeFromApi(payload: any): StudyMaterial | null {\n  // aceita:\n  // - { success:true, data:{...} }\n  // - { topic, flashcards, summary }\n  const data = payload?.data ?? payload;\n\n  const topic = data?.topic;\n  const flashcards = data?.flashcards;\n  const summary = data?.summary;\n\n  if (!topic || !Array.isArray(flashcards) || !summary) return null;\n\n  if (\n    typeof summary?.title !== \"string\" ||\n    !Array.isArray(summary?.mainTopics) ||\n    !Array.isArray(summary?.keyPoints)\n  ) {\n    return null;\n  }\n\n  return {\n    topic,\n    flashcards,\n    summary,\n    materialId: payload?.meta?.materialId ?? payload?.materialId ?? data?.materialId,\n    createdAt: new Date().toISOString(),\n  };\n}\n\nexport function saveMaterial(material: StudyMaterial) {\n  if (typeof window === \"undefined\") return;\n  localStorage.setItem(STORAGE_KEY, JSON.stringify(material));\n  window.dispatchEvent(new Event(EVENT_NAME));\n}\n\nexport function loadMaterial(): StudyMaterial | null {\n  if (typeof window === \"undefined\") return null;\n  const raw = localStorage.getItem(STORAGE_KEY);\n  if (!raw) return null;\n\n  try {\n    return JSON.parse(raw) as StudyMaterial;\n  } catch {\n    return null;\n  }\n}\n\nexport function clearMaterial() {\n  if (typeof window === \"undefined\") return;\n  localStorage.removeItem(STORAGE_KEY);\n  window.dispatchEvent(new Event(EVENT_NAME));\n}\n\nexport function onMaterialUpdated(cb: () => void) {\n  if (typeof window === \"undefined\") return () => {};\n\n  const handler = () => cb();\n  window.addEventListener(EVENT_NAME, handler);\n\n  // tamb√©m reage quando outro tab atualiza\n  const storageHandler = (e: StorageEvent) => {\n    if (e.key === STORAGE_KEY) cb();\n  };\n  window.addEventListener(\"storage\", storageHandler);\n\n  return () => {\n    window.removeEventListener(EVENT_NAME, handler);\n    window.removeEventListener(\"storage\", storageHandler);\n  };\n}\n"],"names":[],"mappings":"AAAA,gCAAgC;;;;;;;;AA6BhC,MAAM,cAAc;AACpB,MAAM,aAAa;AAEZ,SAAS,iBAAiB,OAAY;IAC3C,UAAU;IACV,iCAAiC;IACjC,mCAAmC;IACnC,MAAM,OAAO,SAAS,QAAQ;IAE9B,MAAM,QAAQ,MAAM;IACpB,MAAM,aAAa,MAAM;IACzB,MAAM,UAAU,MAAM;IAEtB,IAAI,CAAC,SAAS,CAAC,MAAM,OAAO,CAAC,eAAe,CAAC,SAAS,OAAO;IAE7D,IACE,OAAO,SAAS,UAAU,YAC1B,CAAC,MAAM,OAAO,CAAC,SAAS,eACxB,CAAC,MAAM,OAAO,CAAC,SAAS,YACxB;QACA,OAAO;IACT;IAEA,OAAO;QACL;QACA;QACA;QACA,YAAY,SAAS,MAAM,cAAc,SAAS,cAAc,MAAM;QACtE,WAAW,IAAI,OAAO,WAAW;IACnC;AACF;AAEO,SAAS,aAAa,QAAuB;IAClD,wCAAmC;;;AAGrC;AAEO,SAAS;IACd,wCAAmC,OAAO;;;IAC1C,MAAM;AAQR;AAEO,SAAS;IACd,wCAAmC;;;AAGrC;AAEO,SAAS,kBAAkB,EAAc;IAC9C,wCAAmC,OAAO,KAAO;;;IAEjD,MAAM;IAGN,yCAAyC;IACzC,MAAM;AASR","debugId":null}},
    {"offset": {"line": 506, "column": 0}, "map": {"version":3,"sources":["file:///Users/ruangalvao/ProjetosVS/Projetos%20Pessoais/stud.ai-app/app-stud.ai/src/lib/studyProgressStore.ts"],"sourcesContent":["\"use client\";\n\n/**\n * Store simples de progresso (localStorage) + \"events\" para atualizar UI.\n * Compat√≠vel com:\n * - makeProgressKey\n * - makeProgressKeyForDoc\n * - loadProgress\n * - saveProgress\n * - clearProgress\n * - onProgressUpdated\n */\n\ntype ProgressItem = {\n  knownIds: number[];   // ids marcados como \"sei\"\n  reviewIds: number[];  // ids marcados como \"n√£o sei\"\n  currentIndex: number; // √≠ndice atual no deck\n  updatedAt: number;    // timestamp\n};\n\nconst LS_PREFIX = \"studai:progress:v1:\";\n\nfunction safeParse<T>(s: string | null): T | null {\n  if (!s) return null;\n  try {\n    return JSON.parse(s) as T;\n  } catch {\n    return null;\n  }\n}\n\nfunction emit(key: string) {\n  // evento custom local + evento nativo storage\n  window.dispatchEvent(new CustomEvent(\"studai:progress-updated\", { detail: { key } }));\n}\n\nexport function makeProgressKey(userId: string, materialId: string) {\n  return `${LS_PREFIX}${userId}:${materialId}`;\n}\n\n/**\n * Caso seu app trate material como \"docId\" (ou slug/uuid),\n * esse helper mant√©m compatibilidade com imports antigos.\n */\nexport function makeProgressKeyForDoc(userId: string, docId: string) {\n  return `${LS_PREFIX}${userId}:doc:${docId}`;\n}\n\nexport function loadProgress(key: string): ProgressItem | null {\n  if (typeof window === \"undefined\") return null;\n  return safeParse<ProgressItem>(localStorage.getItem(key));\n}\n\nexport function saveProgress(key: string, progress: ProgressItem) {\n  if (typeof window === \"undefined\") return;\n  localStorage.setItem(\n    key,\n    JSON.stringify({\n      knownIds: Array.from(new Set(progress.knownIds || [])),\n      reviewIds: Array.from(new Set(progress.reviewIds || [])),\n      currentIndex: Number.isFinite(progress.currentIndex) ? progress.currentIndex : 0,\n      updatedAt: Date.now(),\n    } satisfies ProgressItem)\n  );\n  emit(key);\n}\n\nexport function clearProgress(key: string) {\n  if (typeof window === \"undefined\") return;\n  localStorage.removeItem(key);\n  emit(key);\n}\n\n/**\n * Listener para componentes reagirem a mudan√ßas de progresso.\n * Retorna um \"unsubscribe\".\n */\nexport function onProgressUpdated(cb: (key: string) => void) {\n  if (typeof window === \"undefined\") return () => {};\n\n  const handler = (ev: Event) => {\n    const anyEv = ev as any;\n    const key = anyEv?.detail?.key;\n    if (typeof key === \"string\") cb(key);\n  };\n\n  window.addEventListener(\"studai:progress-updated\", handler as any);\n\n  // tamb√©m escuta mudan√ßas do localStorage (outra aba)\n  const storageHandler = (ev: StorageEvent) => {\n    if (!ev.key) return;\n    if (ev.key.startsWith(LS_PREFIX)) cb(ev.key);\n  };\n  window.addEventListener(\"storage\", storageHandler);\n\n  return () => {\n    window.removeEventListener(\"studai:progress-updated\", handler as any);\n    window.removeEventListener(\"storage\", storageHandler);\n  };\n}\n"],"names":[],"mappings":";;;;;;;;AAAA;AAoBA,MAAM,YAAY;AAElB,SAAS,UAAa,CAAgB;IACpC,IAAI,CAAC,GAAG,OAAO;IACf,IAAI;QACF,OAAO,KAAK,KAAK,CAAC;IACpB,EAAE,OAAM;QACN,OAAO;IACT;AACF;AAEA,SAAS,KAAK,GAAW;IACvB,8CAA8C;IAC9C,OAAO,aAAa,CAAC,IAAI,YAAY,2BAA2B;QAAE,QAAQ;YAAE;QAAI;IAAE;AACpF;AAEO,SAAS,gBAAgB,MAAc,EAAE,UAAkB;IAChE,OAAO,GAAG,YAAY,OAAO,CAAC,EAAE,YAAY;AAC9C;AAMO,SAAS,sBAAsB,MAAc,EAAE,KAAa;IACjE,OAAO,GAAG,YAAY,OAAO,KAAK,EAAE,OAAO;AAC7C;AAEO,SAAS,aAAa,GAAW;IACtC,wCAAmC,OAAO;;;AAE5C;AAEO,SAAS,aAAa,GAAW,EAAE,QAAsB;IAC9D,wCAAmC;;;AAWrC;AAEO,SAAS,cAAc,GAAW;IACvC,wCAAmC;;;AAGrC;AAMO,SAAS,kBAAkB,EAAyB;IACzD,wCAAmC,OAAO,KAAO;;;IAEjD,MAAM;IAQN,qDAAqD;IACrD,MAAM;AAUR","debugId":null}},
    {"offset": {"line": 565, "column": 0}, "map": {"version":3,"sources":["file:///Users/ruangalvao/ProjetosVS/Projetos%20Pessoais/stud.ai-app/app-stud.ai/src/lib/studySessionStore.ts"],"sourcesContent":["export type SessionAction = \"known\" | \"review\";\n\nexport type StudySession = {\n  id: string;\n  docId: string;\n\n  startedAt: string;\n  endedAt?: string;\n\n  mode: \"session\" | \"deck\";\n  sessionSize: number;\n\n  // m√©tricas\n  knownCount: number;\n  reviewCount: number;\n  answeredCount: number;\n\n  durationSec?: number;\n  accuracyPct?: number; // known / (known+review)\n};\n\nconst KEY = \"studai:sessions:v1\";\nconst listeners = new Set<() => void>();\n\nfunction emit() {\n  for (const fn of listeners) {\n    try {\n      fn();\n    } catch {}\n  }\n}\n\nfunction safeParse<T>(raw: string | null): T | null {\n  if (!raw) return null;\n  try {\n    return JSON.parse(raw) as T;\n  } catch {\n    return null;\n  }\n}\n\nfunction uid() {\n  // browser + fallback\n  // @ts-ignore\n  return (typeof crypto !== \"undefined\" && crypto.randomUUID) ? crypto.randomUUID() : `sess_${Date.now()}_${Math.random().toString(16).slice(2)}`;\n}\n\nfunction readAll(): StudySession[] {\n  if (typeof window === \"undefined\") return [];\n  return safeParse<StudySession[]>(localStorage.getItem(KEY)) ?? [];\n}\n\nfunction writeAll(list: StudySession[]) {\n  if (typeof window === \"undefined\") return;\n  localStorage.setItem(KEY, JSON.stringify(list));\n  emit();\n}\n\nexport function startSession(params: {\n  docId: string;\n  mode: \"session\" | \"deck\";\n  sessionSize: number;\n}) {\n  const s: StudySession = {\n    id: uid(),\n    docId: params.docId,\n    startedAt: new Date().toISOString(),\n    mode: params.mode,\n    sessionSize: params.sessionSize,\n    knownCount: 0,\n    reviewCount: 0,\n    answeredCount: 0,\n  };\n\n  const all = readAll();\n  all.unshift(s);\n  writeAll(all);\n  return s.id;\n}\n\nexport function recordSessionAction(sessionId: string, action: SessionAction) {\n  const all = readAll();\n  const i = all.findIndex((x) => x.id === sessionId);\n  if (i < 0) return;\n\n  const s = all[i];\n  const next: StudySession = {\n    ...s,\n    knownCount: action === \"known\" ? s.knownCount + 1 : s.knownCount,\n    reviewCount: action === \"review\" ? s.reviewCount + 1 : s.reviewCount,\n    answeredCount: s.answeredCount + 1,\n  };\n\n  all[i] = next;\n  writeAll(all);\n}\n\nexport function endSession(sessionId: string) {\n  const all = readAll();\n  const i = all.findIndex((x) => x.id === sessionId);\n  if (i < 0) return;\n\n  const s = all[i];\n  const endedAt = new Date().toISOString();\n  const durationSec = Math.max(\n    0,\n    Math.round((new Date(endedAt).getTime() - new Date(s.startedAt).getTime()) / 1000)\n  );\n  const denom = s.knownCount + s.reviewCount;\n  const accuracyPct = denom > 0 ? Math.round((s.knownCount / denom) * 100) : 0;\n\n  all[i] = { ...s, endedAt, durationSec, accuracyPct };\n  writeAll(all);\n}\n\nexport function listSessions(docId?: string) {\n  const all = readAll();\n  const filtered = docId ? all.filter((s) => s.docId === docId) : all;\n  // ordena mais recente primeiro\n  return filtered.sort((a, b) => (b.startedAt || \"\").localeCompare(a.startedAt || \"\"));\n}\n\nexport function onSessionsUpdated(cb: () => void) {\n  listeners.add(cb);\n  return () => listeners.delete(cb);\n}\n\nexport function clearSessions(docId?: string) {\n  const all = readAll();\n  if (!docId) {\n    writeAll([]);\n    return;\n  }\n  writeAll(all.filter((s) => s.docId !== docId));\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 674, "column": 0}, "map": {"version":3,"sources":["file:///Users/ruangalvao/ProjetosVS/Projetos%20Pessoais/stud.ai-app/app-stud.ai/src/app/components/FlashcardsSection.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useMemo, useState, useCallback } from \"react\";\nimport {\n  Flashcard,\n  loadMaterial,\n  onMaterialUpdated,\n} from \"@/lib/studyMaterialStore\";\nimport {\n  loadProgress,\n  saveProgress,\n  makeProgressKey,\n  makeProgressKeyForDoc,\n  clearProgress,\n} from \"@/lib/studyProgressStore\";\nimport {\n  startSession,\n  recordSessionAction,\n  endSession,\n} from \"@/lib/studySessionStore\";\nimport {\n  Check,\n  X,\n  ChevronLeft,\n  ChevronRight,\n  Play,\n  StopCircle,\n  RotateCcw,\n  SlidersHorizontal,\n} from \"lucide-react\";\n\ntype Filter = \"all\" | \"review\" | \"known\";\ntype Mode = \"deck\" | \"session\";\n\nfunction cn(...s: Array<string | false | null | undefined>) {\n  return s.filter(Boolean).join(\" \");\n}\nfunction pct(n: number) {\n  return Math.max(0, Math.min(100, Math.round(n)));\n}\nfunction shuffle<T>(arr: T[]) {\n  const a = [...arr];\n  for (let i = a.length - 1; i > 0; i--) {\n    const j = Math.floor(Math.random() * (i + 1));\n    [a[i], a[j]] = [a[j], a[i]];\n  }\n  return a;\n}\n\nexport default function FlashcardsSection(_props: { data?: any }) {\n  const [topic, setTopic] = useState(\"\");\n  const [cards, setCards] = useState<Flashcard[]>([]);\n  const [docId, setDocId] = useState<string>(\"\");\n\n  const [filter, setFilter] = useState<Filter>(\"all\");\n  const [mode, setMode] = useState<Mode>(\"deck\");\n\n  const [isFlipped, setIsFlipped] = useState(false);\n  const [index, setIndex] = useState(0);\n\n  const [knownIds, setKnownIds] = useState<number[]>([]);\n  const [reviewIds, setReviewIds] = useState<number[]>([]);\n\n  const [sessionSize, setSessionSize] = useState<number>(10);\n  const [sessionActive, setSessionActive] = useState(false);\n  const [sessionQueue, setSessionQueue] = useState<Flashcard[]>([]);\n  const [sessionIndex, setSessionIndex] = useState(0);\n  const [sessionId, setSessionId] = useState<string | null>(null);\n\n  // ---------- Progress keys (doc + legacy) ----------\n  const legacyKey = useMemo(() => makeProgressKey(topic || \"deck\", cards.length || 0), [topic, cards.length]);\n  const docKey = useMemo(() => (docId ? makeProgressKeyForDoc(docId) : \"\"), [docId]);\n\n  // ---------- Load material + progress ----------\n  useEffect(() => {\n    const refresh = () => {\n      const m = loadMaterial();\n      setTopic(m?.topic ?? \"\");\n      setCards(m?.flashcards ?? []);\n      setDocId(m?.docId ?? \"\");\n\n      // carrega progresso: primeiro por docId, depois fallback legacy\n      const pDoc = m?.docId ? loadProgress(makeProgressKeyForDoc(m.docId)) : null;\n      const pLegacy = loadProgress(makeProgressKey(m?.topic ?? \"deck\", m?.flashcards?.length ?? 0));\n\n      const p = pDoc ?? pLegacy;\n\n      setKnownIds(p?.knownIds ?? []);\n      setReviewIds(p?.reviewIds ?? []);\n\n      setFilter(\"all\");\n      setMode(\"deck\");\n      setIndex(0);\n      setIsFlipped(false);\n\n      setSessionActive(false);\n      setSessionQueue([]);\n      setSessionIndex(0);\n      setSessionId(null);\n    };\n\n    refresh();\n    return onMaterialUpdated(refresh);\n  }, []);\n\n  const knownSet = useMemo(() => new Set(knownIds), [knownIds]);\n  const reviewSet = useMemo(() => new Set(reviewIds), [reviewIds]);\n\n  // ---------- Filtered deck (deck mode) ----------\n  const filteredCards = useMemo(() => {\n    if (filter === \"known\") return cards.filter((c) => knownSet.has(c.id));\n    if (filter === \"review\") return cards.filter((c) => reviewSet.has(c.id));\n    return cards;\n  }, [cards, filter, knownSet, reviewSet]);\n\n  // ---------- Active list (deck or session) ----------\n  const activeList = sessionActive ? sessionQueue : filteredCards;\n  const activeIndex = sessionActive ? sessionIndex : index;\n  const current = activeList[activeIndex] ?? null;\n\n  // ---------- Overall progress ----------\n  const doneCount = useMemo(() => {\n    const s = new Set<number>([...knownIds, ...reviewIds]);\n    return s.size;\n  }, [knownIds, reviewIds]);\n\n  const progressPct = useMemo(() => {\n    const total = cards.length || 0;\n    return total ? pct((doneCount / total) * 100) : 0;\n  }, [doneCount, cards.length]);\n\n  const accuracyPct = useMemo(() => {\n    const k = knownIds.length;\n    const r = reviewIds.length;\n    return (k + r) ? pct((k / (k + r)) * 100) : 0;\n  }, [knownIds.length, reviewIds.length]);\n\n  // ---------- Save progress (doc + legacy) ----------\n  const persistProgress = useCallback(\n    (nextKnown: number[], nextReview: number[]) => {\n      const payload = {\n        knownIds: nextKnown,\n        reviewIds: nextReview,\n        updatedAt: new Date().toISOString(),\n      };\n\n      // salva por docId (novo)\n      if (docKey) saveProgress(docKey, payload);\n\n      // salva tamb√©m no legacy para compatibilidade com telas antigas\n      if (legacyKey) saveProgress(legacyKey, payload);\n    },\n    [docKey, legacyKey]\n  );\n\n  // ---------- Helpers ----------\n  function safeSetDeckIndex(next: number) {\n    const total = filteredCards.length;\n    if (!total) return setIndex(0);\n    const clamped = Math.max(0, Math.min(total - 1, next));\n    setIndex(clamped);\n  }\n\n  function safeSetSessionIndex(next: number) {\n    const total = sessionQueue.length;\n    if (!total) return setSessionIndex(0);\n    const clamped = Math.max(0, Math.min(total - 1, next));\n    setSessionIndex(clamped);\n  }\n\n  function goNext() {\n    setIsFlipped(false);\n    if (sessionActive) safeSetSessionIndex(sessionIndex + 1);\n    else safeSetDeckIndex(index + 1);\n  }\n\n  function goPrev() {\n    setIsFlipped(false);\n    if (sessionActive) safeSetSessionIndex(sessionIndex - 1);\n    else safeSetDeckIndex(index - 1);\n  }\n\n  // ---------- Session build ----------\n  function buildSessionDeck(size: number) {\n    const total = cards.length;\n    const want = Math.max(1, Math.min(total || 1, Math.trunc(size || 10)));\n\n    // prioridade: n√£o respondidos -> review -> resto\n    const notDone = cards.filter((c) => !knownSet.has(c.id) && !reviewSet.has(c.id));\n    const review = cards.filter((c) => reviewSet.has(c.id));\n    const rest = cards.filter((c) => knownSet.has(c.id));\n\n    const pool = [...shuffle(notDone), ...shuffle(review), ...shuffle(rest)];\n    return pool.slice(0, want);\n  }\n\n  function startNewSession() {\n    if (!cards.length || !docId) return;\n\n    const deck = buildSessionDeck(sessionSize);\n    setMode(\"session\");\n    setSessionQueue(deck);\n    setSessionIndex(0);\n    setIsFlipped(false);\n    setSessionActive(true);\n\n    const sid = startSession({\n      docId,\n      mode: \"session\",\n      sessionSize: deck.length,\n    });\n    setSessionId(sid);\n  }\n\n  function stopSession() {\n    if (sessionId) endSession(sessionId);\n    setSessionActive(false);\n    setSessionQueue([]);\n    setSessionIndex(0);\n    setSessionId(null);\n    setIsFlipped(false);\n    setMode(\"deck\");\n  }\n\n  // ---------- Mark actions ----------\n  const markKnown = useCallback(() => {\n    if (!current) return;\n\n    const nextKnownSet = new Set(knownIds);\n    const nextReviewSet = new Set(reviewIds);\n\n    nextKnownSet.add(current.id);\n    nextReviewSet.delete(current.id);\n\n    const nextKnown = Array.from(nextKnownSet);\n    const nextReview = Array.from(nextReviewSet);\n\n    setKnownIds(nextKnown);\n    setReviewIds(nextReview);\n    persistProgress(nextKnown, nextReview);\n\n    if (sessionActive && sessionId) recordSessionAction(sessionId, \"known\");\n\n    // fim de sess√£o?\n    if (sessionActive && sessionQueue.length && sessionIndex >= sessionQueue.length - 1) {\n      if (sessionId) endSession(sessionId);\n      stopSession();\n      return;\n    }\n\n    goNext();\n  }, [\n    current,\n    knownIds,\n    reviewIds,\n    persistProgress,\n    sessionActive,\n    sessionId,\n    sessionQueue.length,\n    sessionIndex,\n  ]);\n\n  const markReview = useCallback(() => {\n    if (!current) return;\n\n    const nextKnownSet = new Set(knownIds);\n    const nextReviewSet = new Set(reviewIds);\n\n    nextReviewSet.add(current.id);\n    nextKnownSet.delete(current.id);\n\n    const nextKnown = Array.from(nextKnownSet);\n    const nextReview = Array.from(nextReviewSet);\n\n    setKnownIds(nextKnown);\n    setReviewIds(nextReview);\n    persistProgress(nextKnown, nextReview);\n\n    if (sessionActive && sessionId) recordSessionAction(sessionId, \"review\");\n\n    if (sessionActive && sessionQueue.length && sessionIndex >= sessionQueue.length - 1) {\n      if (sessionId) endSession(sessionId);\n      stopSession();\n      return;\n    }\n\n    goNext();\n  }, [\n    current,\n    knownIds,\n    reviewIds,\n    persistProgress,\n    sessionActive,\n    sessionId,\n    sessionQueue.length,\n    sessionIndex,\n  ]);\n\n  // ---------- Keyboard shortcuts ----------\n  useEffect(() => {\n    function onKey(e: KeyboardEvent) {\n      if (!current) return;\n\n      if (e.key === \" \" || e.key.toLowerCase() === \"enter\") {\n        e.preventDefault();\n        setIsFlipped((v) => !v);\n      }\n      if (e.key === \"ArrowLeft\") {\n        e.preventDefault();\n        markReview();\n      }\n      if (e.key === \"ArrowRight\") {\n        e.preventDefault();\n        markKnown();\n      }\n    }\n    window.addEventListener(\"keydown\", onKey);\n    return () => window.removeEventListener(\"keydown\", onKey);\n  }, [current, markKnown, markReview]);\n\n  // ---------- Empty state ----------\n  if (!cards.length) {\n    return (\n      <section className=\"w-full max-w-5xl mx-auto mt-10 rounded-2xl border border-white/10 bg-white/5 p-8 text-center\">\n        <h2 className=\"text-2xl font-semibold\">Flashcards</h2>\n        <p className=\"mt-2 opacity-70\">Fa√ßa um upload para gerar flashcards automaticamente.</p>\n      </section>\n    );\n  }\n\n  // ---------- If filter results empty ----------\n  const hasActive = !!current;\n\n  return (\n    <section className=\"w-full max-w-5xl mx-auto mt-10\">\n      {/* Header premium */}\n      <div className=\"rounded-2xl border border-white/10 bg-white/5 p-6\">\n        <div className=\"flex flex-col md:flex-row md:items-start md:justify-between gap-4\">\n          <div>\n            <div className=\"text-xs opacity-70\">Flashcards</div>\n            <h2 className=\"text-2xl font-semibold mt-1\">{topic || \"Seu deck\"}</h2>\n            <div className=\"mt-2 text-sm opacity-70\">\n              Atalhos: <b>Enter/Espa√ßo</b> vira ‚Ä¢ <b>‚Üê</b> revisar ‚Ä¢ <b>‚Üí</b> acertei\n            </div>\n          </div>\n\n          <div className=\"flex flex-wrap gap-2\">\n            <Chip tone=\"neutral\" label={`üìö Cards: ${cards.length}`} />\n            <Chip tone=\"neutral\" label={`‚úÖ Feitos: ${doneCount}`} />\n            <Chip tone=\"green\" label={`üéØ Aproveitamento: ${accuracyPct}%`} />\n          </div>\n        </div>\n\n        {/* Progress bar */}\n        <div className=\"mt-5\">\n          <div className=\"flex items-center justify-between text-xs opacity-70\">\n            <span>Progresso geral</span>\n            <span>{progressPct}%</span>\n          </div>\n          <div className=\"mt-2 h-2 w-full rounded-full bg-black/30 overflow-hidden border border-white/10\">\n            <div className=\"h-full rounded-full bg-[#00FF8B]/70\" style={{ width: `${progressPct}%` }} />\n          </div>\n        </div>\n\n        {/* Controls row */}\n        <div className=\"mt-5 flex flex-col lg:flex-row lg:items-center justify-between gap-3\">\n          {/* Filters */}\n          <div className=\"flex flex-wrap items-center gap-2\">\n            <div className=\"inline-flex items-center gap-2 text-xs opacity-70 mr-2\">\n              <SlidersHorizontal className=\"w-4 h-4\" />\n              Filtro:\n            </div>\n            <Pill active={filter === \"all\"} onClick={() => { setFilter(\"all\"); setIsFlipped(false); setIndex(0); }}>\n              Todos\n            </Pill>\n            <Pill active={filter === \"review\"} onClick={() => { setFilter(\"review\"); setIsFlipped(false); setIndex(0); }}>\n              Revisar\n            </Pill>\n            <Pill active={filter === \"known\"} onClick={() => { setFilter(\"known\"); setIsFlipped(false); setIndex(0); }}>\n              Conhecidos\n            </Pill>\n          </div>\n\n          {/* Session controls */}\n          <div className=\"flex flex-wrap items-center gap-2\">\n            {!sessionActive ? (\n              <>\n                <div className=\"text-xs opacity-70 mr-1\">Sess√£o:</div>\n                <input\n                  type=\"number\"\n                  min={1}\n                  max={50}\n                  value={sessionSize}\n                  onChange={(e) => setSessionSize(Math.max(1, Math.min(50, Math.trunc(Number(e.target.value) || 10))))}\n                  className=\"w-24 rounded-xl border border-white/10 bg-black/20 px-3 py-2 text-sm outline-none\"\n                />\n                <button\n                  onClick={startNewSession}\n                  className=\"rounded-2xl border border-[#00FF8B]/30 bg-[#00FF8B]/10 px-4 py-2 text-sm font-semibold text-[#00FF8B] hover:bg-[#00FF8B]/15 inline-flex items-center gap-2\"\n                >\n                  <Play className=\"w-4 h-4\" /> Iniciar\n                </button>\n              </>\n            ) : (\n              <button\n                onClick={stopSession}\n                className=\"rounded-2xl border border-white/10 bg-black/20 px-4 py-2 text-sm hover:bg-black/30 inline-flex items-center gap-2\"\n              >\n                <StopCircle className=\"w-4 h-4\" /> Encerrar sess√£o\n              </button>\n            )}\n\n            <button\n              onClick={() => {\n                // reset s√≥ do deck ativo\n                if (docKey) clearProgress(docKey);\n                if (legacyKey) clearProgress(legacyKey);\n                setKnownIds([]);\n                setReviewIds([]);\n                setIsFlipped(false);\n              }}\n              className=\"rounded-2xl border border-white/10 bg-white/5 px-4 py-2 text-sm hover:bg-white/10 inline-flex items-center gap-2\"\n            >\n              <RotateCcw className=\"w-4 h-4\" /> Reset progresso\n            </button>\n          </div>\n        </div>\n      </div>\n\n      {/* If filtered list empty */}\n      {!hasActive ? (\n        <div className=\"mt-6 rounded-2xl border border-white/10 bg-white/5 p-10 text-center\">\n          <div className=\"text-xl font-semibold\">Nada aqui ainda</div>\n          <div className=\"mt-2 opacity-70\">\n            Esse filtro n√£o tem cards. Tente ‚ÄúTodos‚Äù ou fa√ßa uma sess√£o.\n          </div>\n          <button\n            onClick={() => setFilter(\"all\")}\n            className=\"mt-6 rounded-2xl border border-[#00FF8B]/30 bg-[#00FF8B]/10 px-6 py-3 font-semibold text-[#00FF8B] hover:bg-[#00FF8B]/15\"\n          >\n            Voltar para Todos\n          </button>\n        </div>\n      ) : (\n        <>\n          {/* Card index line */}\n          <div className=\"mt-6 flex items-center justify-between text-sm opacity-80\">\n            <div>\n              {sessionActive ? (\n                <span>\n                  Sess√£o ‚Ä¢ Card <b>{sessionIndex + 1}</b>/<b>{sessionQueue.length}</b>\n                </span>\n              ) : (\n                <span>\n                  Deck ‚Ä¢ Card <b>{index + 1}</b>/<b>{filteredCards.length}</b>\n                </span>\n              )}\n            </div>\n\n            <div className=\"flex items-center gap-2 text-xs opacity-70\">\n              <span className=\"inline-flex items-center gap-1\">\n                ‚úÖ {knownIds.length}\n              </span>\n              <span className=\"inline-flex items-center gap-1\">\n                ‚ùå {reviewIds.length}\n              </span>\n            </div>\n          </div>\n\n          {/* Flip card */}\n          <div className=\"mt-3 rounded-3xl border border-white/10 bg-white/5 p-5\">\n            <div className=\"relative [perspective:1200px]\">\n              <div\n                className={cn(\n                  \"relative w-full min-h-[260px] transition-transform duration-500 [transform-style:preserve-3d]\",\n                  isFlipped ? \"[transform:rotateY(180deg)]\" : \"\"\n                )}\n              >\n                {/* FRONT */}\n                <button\n                  type=\"button\"\n                  onClick={() => setIsFlipped(true)}\n                  className=\"absolute inset-0 rounded-2xl border border-white/10 bg-black/20 p-6 text-left [backface-visibility:hidden] hover:bg-black/25\"\n                >\n                  <div className=\"text-xs opacity-70\">Pergunta</div>\n                  <div className=\"mt-2 text-xl font-semibold leading-relaxed\">\n                    {current!.question}\n                  </div>\n\n                  <div className=\"mt-6 text-sm opacity-70\">\n                    Clique para ver a resposta\n                  </div>\n\n                  <div className=\"mt-3 flex flex-wrap gap-2\">\n                    {knownSet.has(current!.id) ? <Chip tone=\"green\" label=\"‚úÖ Conhecido\" /> : null}\n                    {reviewSet.has(current!.id) ? <Chip tone=\"red\" label=\"‚ùå Revisar\" /> : null}\n                    {current!.difficulty ? <Chip tone=\"neutral\" label={`‚ö° ${current!.difficulty}`} /> : null}\n                  </div>\n                </button>\n\n                {/* BACK */}\n                <button\n                  type=\"button\"\n                  onClick={() => setIsFlipped(false)}\n                  className=\"absolute inset-0 rounded-2xl border border-white/10 bg-black/20 p-6 text-left [transform:rotateY(180deg)] [backface-visibility:hidden] hover:bg-black/25\"\n                >\n                  <div className=\"text-xs opacity-70\">Resposta</div>\n                  <div className=\"mt-2 text-lg leading-relaxed whitespace-pre-wrap opacity-95\">\n                    {current!.answer}\n                  </div>\n\n                  <div className=\"mt-6 text-sm opacity-70\">\n                    Clique para voltar √† pergunta\n                  </div>\n                </button>\n              </div>\n            </div>\n\n            {/* Actions */}\n            <div className=\"mt-5 flex flex-col sm:flex-row items-stretch sm:items-center justify-between gap-3\">\n              <div className=\"flex items-center gap-2\">\n                <button\n                  onClick={goPrev}\n                  disabled={activeIndex <= 0}\n                  className=\"rounded-2xl border border-white/10 bg-white/5 px-4 py-3 text-sm hover:bg-white/10 disabled:opacity-40 inline-flex items-center gap-2\"\n                >\n                  <ChevronLeft className=\"w-4 h-4\" /> Anterior\n                </button>\n\n                <button\n                  onClick={goNext}\n                  disabled={activeIndex >= activeList.length - 1}\n                  className=\"rounded-2xl border border-white/10 bg-white/5 px-4 py-3 text-sm hover:bg-white/10 disabled:opacity-40 inline-flex items-center gap-2\"\n                >\n                  Pr√≥ximo <ChevronRight className=\"w-4 h-4\" />\n                </button>\n              </div>\n\n              <div className=\"flex items-center gap-2\">\n                <button\n                  onClick={markReview}\n                  className=\"rounded-2xl border border-red-500/25 bg-red-500/10 px-5 py-3 text-sm font-semibold text-red-200 hover:bg-red-500/15 inline-flex items-center gap-2\"\n                >\n                  <X className=\"w-4 h-4\" /> Revisar\n                </button>\n\n                <button\n                  onClick={markKnown}\n                  className=\"rounded-2xl border border-[#00FF8B]/30 bg-[#00FF8B]/10 px-5 py-3 text-sm font-semibold text-[#00FF8B] hover:bg-[#00FF8B]/15 inline-flex items-center gap-2\"\n                >\n                  <Check className=\"w-4 h-4\" /> Acertei\n                </button>\n              </div>\n            </div>\n          </div>\n        </>\n      )}\n    </section>\n  );\n}\n\nfunction Pill({\n  active,\n  onClick,\n  children,\n}: {\n  active?: boolean;\n  onClick?: () => void;\n  children: any;\n}) {\n  return (\n    <button\n      onClick={onClick}\n      className={cn(\n        \"rounded-full px-4 py-2 text-sm border transition\",\n        active\n          ? \"border-[#00FF8B]/30 bg-[#00FF8B]/10 text-[#00FF8B]\"\n          : \"border-white/10 bg-white/5 text-white/70 hover:bg-white/10\"\n      )}\n    >\n      {children}\n    </button>\n  );\n}\n\nfunction Chip({ label, tone }: { label: string; tone: \"green\" | \"red\" | \"neutral\" }) {\n  const cls =\n    tone === \"green\"\n      ? \"border-[#00FF8B]/25 bg-[#00FF8B]/10 text-[#00FF8B]\"\n      : tone === \"red\"\n      ? \"border-red-500/25 bg-red-500/10 text-red-200\"\n      : \"border-white/10 bg-black/20 text-white/70\";\n  return <span className={cn(\"text-xs px-3 py-1 rounded-full border\", cls)}>{label}</span>;\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1723, "column": 0}, "map": {"version":3,"sources":["file:///Users/ruangalvao/ProjetosVS/Projetos%20Pessoais/stud.ai-app/app-stud.ai/src/app/components/SummarySection.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useMemo, useState } from \"react\";\nimport { loadMaterial, onMaterialUpdated } from \"@/lib/studyMaterialStore\";\n\nfunction cn(...s: Array<string | false | null | undefined>) {\n  return s.filter(Boolean).join(\" \");\n}\n\nfunction lengthLabel(l?: string) {\n  if (l === \"short\") return \"Curto\";\n  if (l === \"long\") return \"Longo\";\n  if (l === \"medium\") return \"M√©dio\";\n  return \"‚Äî\";\n}\n\nexport default function SummarySection(_props: { data?: any }) {\n  const [topic, setTopic] = useState<string>(\"\");\n  const [tags, setTags] = useState<string[]>([]);\n  const [summary, setSummary] = useState<any>(null);\n  const [openId, setOpenId] = useState<number | null>(null);\n\n  useEffect(() => {\n    const refresh = () => {\n      const m = loadMaterial();\n      setTopic(m?.topic ?? \"\");\n      setTags(m?.tags ?? []);\n      setSummary(m?.summary ?? null);\n      setOpenId(m?.summary?.mainTopics?.[0]?.id ?? null);\n    };\n\n    refresh();\n    return onMaterialUpdated(refresh);\n  }, []);\n\n  const hasQuotes = useMemo(() => (summary?.sourceQuotes?.length ?? 0) > 0, [summary]);\n  const length = lengthLabel(summary?.length);\n\n  if (!summary) {\n    return (\n      <section className=\"w-full max-w-5xl mx-auto mt-10 rounded-2xl border border-white/10 bg-white/5 p-8 text-center\">\n        <h2 className=\"text-2xl font-semibold\">Resumos</h2>\n        <p className=\"mt-2 opacity-70\">Fa√ßa um upload para gerar um resumo automaticamente.</p>\n      </section>\n    );\n  }\n\n  return (\n    <section className=\"w-full max-w-5xl mx-auto mt-10\">\n      {/* Header premium */}\n      <div className=\"rounded-2xl border border-white/10 bg-white/5 p-6\">\n        <div className=\"flex flex-col md:flex-row md:items-start md:justify-between gap-4\">\n          <div>\n            <div className=\"text-xs opacity-70\">Resumo</div>\n            <h2 className=\"text-2xl font-semibold mt-1\">\n              {topic ? `${topic} ‚Äî ${summary.title}` : summary.title}\n            </h2>\n            <div className=\"mt-2 text-sm opacity-70\">\n              Leitura r√°pida + t√≥picos principais no padr√£o do app.\n            </div>\n          </div>\n\n          <div className=\"flex flex-wrap gap-2\">\n            <Chip tone=\"green\" label={`üìù ${length}`} />\n            <Chip tone=\"neutral\" label={`üìå ${summary?.mainTopics?.length ?? 0} t√≥picos`} />\n            <Chip\n              tone=\"neutral\"\n              label={hasQuotes ? `üîé ${summary.sourceQuotes.length} trechos` : \"üîé sem trechos\"}\n            />\n          </div>\n        </div>\n\n        {tags?.length ? (\n          <div className=\"mt-4 flex flex-wrap gap-2\">\n            {tags.slice(0, 12).map((t: string) => (\n              <span\n                key={t}\n                className=\"text-xs px-3 py-1 rounded-full border border-white/10 bg-black/20 text-white/70\"\n              >\n                #{t}\n              </span>\n            ))}\n          </div>\n        ) : null}\n      </div>\n\n      {/* T√≥picos (accordion premium) */}\n      <div className=\"mt-6 space-y-3\">\n        {(summary.mainTopics || []).map((t: any) => {\n          const opened = openId === t.id;\n          return (\n            <div key={t.id} className=\"rounded-2xl border border-white/10 bg-white/5 overflow-hidden\">\n              <button\n                onClick={() => setOpenId(opened ? null : t.id)}\n                className=\"w-full flex items-center justify-between gap-3 p-5 hover:bg-white/5\"\n              >\n                <div className=\"flex items-center gap-3 text-left\">\n                  <div className=\"text-xl\">{t.icon || \"üìò\"}</div>\n                  <div>\n                    <div className=\"font-semibold\">{t.title}</div>\n                    {Array.isArray(t.tags) && t.tags.length ? (\n                      <div className=\"mt-1 text-xs opacity-70\">\n                        {t.tags.slice(0, 4).map((x: string) => `#${x}`).join(\"  \")}\n                      </div>\n                    ) : (\n                      <div className=\"mt-1 text-xs opacity-60\">Clique para expandir</div>\n                    )}\n                  </div>\n                </div>\n\n                <div className={cn(\"text-xs opacity-70\", opened && \"opacity-100\")}>\n                  {opened ? \"Fechar\" : \"Abrir\"}\n                </div>\n              </button>\n\n              {opened ? (\n                <div className=\"px-5 pb-5\">\n                  <div className=\"rounded-2xl border border-white/10 bg-black/20 p-5\">\n                    <p className=\"opacity-90 leading-relaxed whitespace-pre-wrap\">{t.content}</p>\n                  </div>\n                </div>\n              ) : null}\n            </div>\n          );\n        })}\n      </div>\n\n      {/* Pontos-chave (cards) */}\n      {summary.keyPoints?.length ? (\n        <div className=\"mt-6 rounded-2xl border border-white/10 bg-white/5 p-6\">\n          <div className=\"flex items-center justify-between gap-3 flex-wrap\">\n            <h3 className=\"text-lg font-semibold\">Pontos-chave</h3>\n            <span className=\"text-xs opacity-70\">{summary.keyPoints.length} itens</span>\n          </div>\n\n          <ul className=\"mt-4 space-y-2\">\n            {summary.keyPoints.map((k: string, i: number) => (\n              <li key={i} className=\"rounded-xl border border-white/10 bg-black/20 p-3 opacity-90\">\n                {k}\n              </li>\n            ))}\n          </ul>\n        </div>\n      ) : null}\n\n      {/* Trechos/Evid√™ncias */}\n      <div className=\"mt-6 rounded-2xl border border-white/10 bg-white/5 p-6\">\n        <div className=\"flex items-center justify-between flex-wrap gap-3\">\n          <h3 className=\"text-lg font-semibold\">Trechos do material</h3>\n          <div className=\"text-xs opacity-70\">\n            {hasQuotes ? `${summary.sourceQuotes.length} trecho(s)` : \"Sem trechos dispon√≠veis\"}\n          </div>\n        </div>\n\n        {!hasQuotes ? (\n          <p className=\"mt-3 opacity-70\">\n            Se o arquivo for imagem com texto pouco leg√≠vel ou PDF sem extra√ß√£o, a IA pode n√£o conseguir citar.\n          </p>\n        ) : (\n          <div className=\"mt-5 grid grid-cols-1 md:grid-cols-2 gap-4\">\n            {summary.sourceQuotes.map((q: any, i: number) => (\n              <div key={i} className=\"rounded-2xl border border-white/10 bg-black/20 p-5\">\n                <div className=\"text-xs opacity-70\">Trecho</div>\n                <p className=\"mt-2 italic opacity-90\">‚Äú{q.quote}‚Äù</p>\n                <div className=\"mt-4 text-xs opacity-70\">Por que importa</div>\n                <p className=\"mt-2 opacity-85\">{q.whyItMatters}</p>\n              </div>\n            ))}\n          </div>\n        )}\n      </div>\n    </section>\n  );\n}\n\nfunction Chip({ label, tone }: { label: string; tone: \"green\" | \"red\" | \"neutral\" }) {\n  const cls =\n    tone === \"green\"\n      ? \"border-[#00FF8B]/25 bg-[#00FF8B]/10 text-[#00FF8B]\"\n      : tone === \"red\"\n      ? \"border-red-500/25 bg-red-500/10 text-red-200\"\n      : \"border-white/10 bg-black/20 text-white/70\";\n  return <span className={cn(\"text-xs px-3 py-1 rounded-full border\", cls)}>{label}</span>;\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 2167, "column": 0}, "map": {"version":3,"sources":["file:///Users/ruangalvao/ProjetosVS/Projetos%20Pessoais/stud.ai-app/app-stud.ai/src/app/components/ProgressSection.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useMemo, useState } from \"react\";\nimport { loadMaterial, onMaterialUpdated } from \"@/lib/studyMaterialStore\";\nimport { makeProgressKey, loadProgress, onProgressUpdated, clearProgress } from \"@/lib/studyProgressStore\";\n\nfunction cn(...s: Array<string | false | null | undefined>) {\n  return s.filter(Boolean).join(\" \");\n}\nfunction pct(n: number) {\n  return Math.max(0, Math.min(100, Math.round(n)));\n}\nfunction uniq(arr: number[]) {\n  return Array.from(new Set(arr));\n}\n\nexport default function ProgressSection() {\n  const [topic, setTopic] = useState<string>(\"\");\n  const [totalCards, setTotalCards] = useState<number>(0);\n  const [progressKey, setProgressKey] = useState<string>(\"\");\n\n  const [knownIds, setKnownIds] = useState<number[]>([]);\n  const [reviewIds, setReviewIds] = useState<number[]>([]);\n  const [updatedAt, setUpdatedAt] = useState<string | null>(null);\n\n  useEffect(() => {\n    const refresh = () => {\n      const m = loadMaterial();\n      const count = m?.flashcards?.length ?? 0;\n\n      setTopic(m?.topic ?? \"\");\n      setTotalCards(count);\n\n      const key = makeProgressKey(m?.topic ?? \"deck\", count);\n      setProgressKey(key);\n\n      const p = loadProgress(key);\n      setKnownIds(p?.knownIds ?? []);\n      setReviewIds(p?.reviewIds ?? []);\n      setUpdatedAt(p?.updatedAt ?? null);\n    };\n\n    refresh();\n    const off1 = onMaterialUpdated(refresh);\n    const off2 = onProgressUpdated(refresh);\n    return () => {\n      off1?.();\n      off2?.();\n    };\n  }, []);\n\n  const known = useMemo(() => new Set(knownIds), [knownIds]);\n  const review = useMemo(() => new Set(reviewIds), [reviewIds]);\n\n  const doneCount = uniq([...knownIds, ...reviewIds]).length;\n  const donePct = totalCards ? pct((doneCount / totalCards) * 100) : 0;\n\n  const knownCount = known.size;\n  const reviewCount = review.size;\n  const remainingCount = Math.max(0, totalCards - doneCount);\n\n  if (!totalCards) {\n    return (\n      <section className=\"w-full max-w-5xl mx-auto mt-10 rounded-2xl border border-white/10 bg-white/5 p-8 text-center\">\n        <h2 className=\"text-2xl font-semibold\">Progresso</h2>\n        <p className=\"mt-2 opacity-70\">Gere um material (upload) para acompanhar seu progresso.</p>\n      </section>\n    );\n  }\n\n  return (\n    <section className=\"w-full max-w-5xl mx-auto mt-10\">\n      {/* Header premium */}\n      <div className=\"rounded-2xl border border-white/10 bg-white/5 p-6\">\n        <div className=\"flex flex-col md:flex-row md:items-start md:justify-between gap-4\">\n          <div>\n            <div className=\"text-xs opacity-70\">Progresso</div>\n            <h2 className=\"text-2xl font-semibold mt-1\">{topic || \"Seu deck\"}</h2>\n            <div className=\"mt-2 text-sm opacity-70\">\n              Acompanhe seu avan√ßo no mesmo padr√£o visual do Flashcards.\n            </div>\n          </div>\n\n          <div className=\"flex flex-wrap gap-2\">\n            <Chip tone=\"green\" label={`‚úÖ Conhecidos: ${knownCount}`} />\n            <Chip tone=\"red\" label={`‚ùå Revisar: ${reviewCount}`} />\n            <Chip tone=\"neutral\" label={`‚è≥ Restantes: ${remainingCount}`} />\n          </div>\n        </div>\n\n        {/* Progress bar */}\n        <div className=\"mt-5\">\n          <div className=\"flex items-center justify-between text-xs opacity-70\">\n            <span>Progresso geral</span>\n            <span>{donePct}%</span>\n          </div>\n          <div className=\"mt-2 h-2 w-full rounded-full bg-black/30 overflow-hidden border border-white/10\">\n            <div className=\"h-full rounded-full bg-[#00FF8B]/70\" style={{ width: `${donePct}%` }} />\n          </div>\n\n          <div className=\"mt-3 text-xs opacity-60\">\n            {updatedAt ? `√öltima atualiza√ß√£o: ${new Date(updatedAt).toLocaleString()}` : \"Ainda sem atualiza√ß√µes\"}\n          </div>\n        </div>\n\n        {/* Action row */}\n        <div className=\"mt-5 flex flex-col sm:flex-row items-center justify-between gap-3\">\n          <div className=\"text-sm opacity-70\">\n            Total de cards: <b className=\"opacity-90\">{totalCards}</b> ‚Ä¢ Conclu√≠dos:{\" \"}\n            <b className=\"opacity-90\">{doneCount}</b>\n          </div>\n\n          <button\n            onClick={() => {\n              if (!progressKey) return;\n              clearProgress(progressKey);\n            }}\n            className=\"rounded-2xl border border-white/10 bg-white/5 px-5 py-3 text-sm hover:bg-white/10\"\n          >\n            Limpar progresso deste deck\n          </button>\n        </div>\n      </div>\n\n      {/* Breakdown premium */}\n      <div className=\"mt-6 grid grid-cols-1 md:grid-cols-3 gap-4\">\n        <StatCard title=\"Conhecidos\" value={knownCount} subtitle=\"Voc√™ marcou como acertei\" tone=\"green\" />\n        <StatCard title=\"Revisar\" value={reviewCount} subtitle=\"Precisa refor√ßar\" tone=\"red\" />\n        <StatCard title=\"Restantes\" value={remainingCount} subtitle=\"Ainda n√£o avaliados\" tone=\"neutral\" />\n      </div>\n\n      {/* Dica */}\n      <div className=\"mt-6 rounded-2xl border border-white/10 bg-white/5 p-6\">\n        <div className=\"font-semibold\">Dica de estudo</div>\n        <p className=\"mt-2 opacity-70 leading-relaxed\">\n          Use sess√µes curtas (10‚Äì20 cards) e marque ‚ÄúRevisar‚Äù sem medo. O ideal √© voltar nesses cards no dia seguinte.\n        </p>\n      </div>\n    </section>\n  );\n}\n\nfunction Chip({ label, tone }: { label: string; tone: \"green\" | \"red\" | \"neutral\" }) {\n  const cls =\n    tone === \"green\"\n      ? \"border-[#00FF8B]/25 bg-[#00FF8B]/10 text-[#00FF8B]\"\n      : tone === \"red\"\n      ? \"border-red-500/25 bg-red-500/10 text-red-200\"\n      : \"border-white/10 bg-black/20 text-white/70\";\n  return <span className={cn(\"text-xs px-3 py-1 rounded-full border\", cls)}>{label}</span>;\n}\n\nfunction StatCard({\n  title,\n  value,\n  subtitle,\n  tone,\n}: {\n  title: string;\n  value: number;\n  subtitle: string;\n  tone: \"green\" | \"red\" | \"neutral\";\n}) {\n  const border =\n    tone === \"green\"\n      ? \"border-[#00FF8B]/20\"\n      : tone === \"red\"\n      ? \"border-red-500/20\"\n      : \"border-white/10\";\n\n  const bg =\n    tone === \"green\"\n      ? \"bg-[#00FF8B]/10\"\n      : tone === \"red\"\n      ? \"bg-red-500/10\"\n      : \"bg-black/20\";\n\n  const text =\n    tone === \"green\" ? \"text-[#00FF8B]\" : tone === \"red\" ? \"text-red-200\" : \"text-white/80\";\n\n  return (\n    <div className={cn(\"rounded-2xl border bg-white/5 p-6\", border)}>\n      <div className=\"text-xs opacity-70\">{title}</div>\n      <div className={cn(\"mt-2 text-3xl font-bold\", text)}>{value}</div>\n      <div className={cn(\"mt-3 rounded-xl border p-3 text-sm opacity-90\", border, bg)}>{subtitle}</div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 2576, "column": 0}, "map": {"version":3,"sources":["file:///Users/ruangalvao/ProjetosVS/Projetos%20Pessoais/stud.ai-app/app-stud.ai/src/app/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useState } from \"react\";\nimport { Upload, Sparkles, BookOpen, TrendingUp, Trophy, Users } from \"lucide-react\";\nimport UploadSection from \"./components/UploadSection\";\nimport FlashcardsSection from \"./components/FlashcardsSection\";\nimport SummarySection from \"./components/SummarySection\";\nimport ProgressSection from \"./components/ProgressSection\";\nimport { loadMaterial, onMaterialUpdated } from \"@/lib/studyMaterialStore\";\n\ntype Section = \"upload\" | \"flashcards\" | \"summary\" | \"progress\";\n\nexport default function Home() {\n  const [activeSection, setActiveSection] = useState<Section>(\"upload\");\n  const [studyData, setStudyData] = useState<any>(null);\n\n  // üî• carrega do localStorage ao abrir e mant√©m sincronizado\n  useEffect(() => {\n    const current = loadMaterial();\n    if (current) setStudyData(current);\n\n    const unsub = onMaterialUpdated(() => {\n      const latest = loadMaterial();\n      setStudyData(latest);\n    });\n\n    return unsub;\n  }, []);\n\n  return (\n    <div className=\"min-h-screen bg-[#0D0D0D]\">\n      <header className=\"border-b border-[#1A1A1A] backdrop-blur-sm bg-[#0D0D0D]/80 sticky top-0 z-50\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <div className=\"flex items-center justify-between h-16\">\n            <div className=\"flex items-center gap-2\">\n              <div className=\"w-8 h-8 rounded-lg bg-gradient-to-br from-[#00FF8B] to-[#007B5F] flex items-center justify-center\">\n                <Sparkles className=\"w-5 h-5 text-[#0D0D0D]\" />\n              </div>\n              <h1 className=\"text-xl sm:text-2xl font-bold bg-gradient-to-r from-[#00FF8B] to-[#007B5F] bg-clip-text text-transparent\">\n                Stud.ai\n              </h1>\n            </div>\n\n            <nav className=\"hidden md:flex items-center gap-1\">\n              <NavButton icon={Upload} label=\"Upload\" active={activeSection === \"upload\"} onClick={() => setActiveSection(\"upload\")} />\n              <NavButton icon={BookOpen} label=\"FlashCards\" active={activeSection === \"flashcards\"} onClick={() => setActiveSection(\"flashcards\")} />\n              <NavButton icon={Sparkles} label=\"Resumos\" active={activeSection === \"summary\"} onClick={() => setActiveSection(\"summary\")} />\n              <NavButton icon={TrendingUp} label=\"Progresso\" active={activeSection === \"progress\"} onClick={() => setActiveSection(\"progress\")} />\n            </nav>\n\n            <div className=\"hidden sm:flex items-center gap-2 px-3 py-1.5 rounded-full bg-[#1A1A1A] border border-[#00FF8B]/20\">\n              <Trophy className=\"w-4 h-4 text-[#00FF8B]\" />\n              <span className=\"text-sm font-medium\">N√≠vel 5</span>\n            </div>\n          </div>\n\n          <div className=\"md:hidden flex items-center gap-1 pb-3 overflow-x-auto\">\n            <NavButton icon={Upload} label=\"Upload\" active={activeSection === \"upload\"} onClick={() => setActiveSection(\"upload\")} mobile />\n            <NavButton icon={BookOpen} label=\"Cards\" active={activeSection === \"flashcards\"} onClick={() => setActiveSection(\"flashcards\")} mobile />\n            <NavButton icon={Sparkles} label=\"Resumos\" active={activeSection === \"summary\"} onClick={() => setActiveSection(\"summary\")} mobile />\n            <NavButton icon={TrendingUp} label=\"Progresso\" active={activeSection === \"progress\"} onClick={() => setActiveSection(\"progress\")} mobile />\n          </div>\n        </div>\n      </header>\n\n      <main className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6 sm:py-8\">\n        {activeSection === \"upload\" && (\n          <UploadSection\n            onDataProcessed={setStudyData}\n            onNavigate={(section) => setActiveSection(section)}\n          />\n        )}\n\n        {activeSection === \"flashcards\" && <FlashcardsSection data={studyData} />}\n        {activeSection === \"summary\" && <SummarySection data={studyData} />}\n        {activeSection === \"progress\" && <ProgressSection />}\n      </main>\n\n      <footer className=\"border-t border-[#1A1A1A] mt-12 py-8\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <div className=\"flex flex-col sm:flex-row items-center justify-between gap-4\">\n            <div className=\"flex items-center gap-2 text-sm text-gray-400\">\n              <Users className=\"w-4 h-4 text-[#00FF8B]\" />\n              <span>+1.2k estudantes ativos hoje</span>\n            </div>\n            <div className=\"text-sm text-gray-500\">Feito com üíö para estudantes</div>\n          </div>\n        </div>\n      </footer>\n    </div>\n  );\n}\n\nfunction NavButton({\n  icon: Icon,\n  label,\n  active,\n  onClick,\n  mobile = false,\n}: {\n  icon: any;\n  label: string;\n  active: boolean;\n  onClick: () => void;\n  mobile?: boolean;\n}) {\n  return (\n    <button\n      onClick={onClick}\n      className={`\n        flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition-all duration-300\n        ${mobile ? \"text-xs whitespace-nowrap\" : \"text-sm\"}\n        ${\n          active\n            ? \"bg-[#00FF8B]/10 text-[#00FF8B] border border-[#00FF8B]/30\"\n            : \"text-gray-400 hover:text-white hover:bg-[#1A1A1A]\"\n        }\n      `}\n    >\n      <Icon className=\"w-4 h-4\" />\n      <span>{label}</span>\n    </button>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}