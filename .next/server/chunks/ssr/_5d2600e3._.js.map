{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 5, "column": 0}, "map": {"version":3,"sources":["file:///Users/ruangalvao/ProjetosVS/Projetos%20Pessoais/stud.ai-app/app-stud.ai/src/app/login/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useMemo, useState } from \"react\";\n\nfunction cn(...s: Array<string | false | null | undefined>) {\n  return s.filter(Boolean).join(\" \");\n}\n\nexport default function LoginPage() {\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n\n  const [loading, setLoading] = useState(false);\n  const [msg, setMsg] = useState<string | null>(null);\n\n  // forgot modal\n  const [forgotOpen, setForgotOpen] = useState(false);\n  const [forgotEmail, setForgotEmail] = useState(\"\");\n  const [forgotLoading, setForgotLoading] = useState(false);\n  const [forgotMsg, setForgotMsg] = useState<string | null>(null);\n\n  const canSubmit = useMemo(() => {\n    return email.trim().length > 0 && password.trim().length > 0;\n  }, [email, password]);\n\n  useEffect(() => {\n    // se já estiver logado, manda pro home\n    (async () => {\n      try {\n        const res = await fetch(\"/api/auth/me\", { cache: \"no-store\" });\n        const json = await res.json().catch(() => null);\n        if (json?.success && json?.user) {\n          window.location.href = \"/\";\n        }\n      } catch {\n        // ignore\n      }\n    })();\n  }, []);\n\n  async function onLogin(e: React.FormEvent) {\n    e.preventDefault();\n    setMsg(null);\n\n    if (!canSubmit) {\n      setMsg(\"Preencha email e senha.\");\n      return;\n    }\n\n    setLoading(true);\n    try {\n      const res = await fetch(\"/api/auth/login\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({ email, password }),\n      });\n\n      const json = await res.json().catch(() => null);\n\n      if (!res.ok || !json?.success) {\n        throw new Error(json?.error || \"Falha ao fazer login.\");\n      }\n\n      setMsg(null);\n      window.location.href = \"/\";\n    } catch (err: any) {\n      setMsg(err?.message || \"Erro inesperado.\");\n    } finally {\n      setLoading(false);\n    }\n  }\n\n  function openForgot() {\n    setForgotMsg(null);\n    setForgotEmail(email || \"\");\n    setForgotOpen(true);\n  }\n\n  async function onForgot(e: React.FormEvent) {\n    e.preventDefault();\n    setForgotMsg(null);\n\n    const em = forgotEmail.trim().toLowerCase();\n    if (!em) {\n      setForgotMsg(\"Digite seu email.\");\n      return;\n    }\n\n    setForgotLoading(true);\n    try {\n      const res = await fetch(\"/api/auth/forgot-password\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({ email: em }),\n      });\n\n      const json = await res.json().catch(() => null);\n\n      if (!res.ok || json?.success === false) {\n        throw new Error(json?.error || \"Não foi possível enviar o link.\");\n      }\n\n      // ✅ por segurança o endpoint retorna success mesmo se não existir\n      setForgotMsg(\n        \"Se o email estiver cadastrado, você verá o link no terminal (por enquanto).\"\n      );\n    } catch (err: any) {\n      setForgotMsg(err?.message || \"Erro inesperado.\");\n    } finally {\n      setForgotLoading(false);\n    }\n  }\n\n  return (\n    <main className=\"min-h-screen w-full flex items-center justify-center px-4\">\n      <div className=\"w-full max-w-md bg-[#121212] rounded-2xl p-8 shadow-xl border border-white/5\">\n        <div className=\"text-center mb-6\">\n          <h1 className=\"text-2xl font-semibold\">Entrar</h1>\n          <p className=\"text-sm text-zinc-400 mt-2\">\n            Acesse sua conta para continuar.\n          </p>\n        </div>\n\n        <form onSubmit={onLogin} className=\"space-y-4\">\n          <input\n            type=\"email\"\n            placeholder=\"Email\"\n            autoComplete=\"email\"\n            value={email}\n            onChange={(e) => setEmail(e.target.value)}\n            className=\"w-full h-11 rounded-lg bg-[#1A1A1A] border border-white/10 px-4 text-sm focus:outline-none focus:ring-2 focus:ring-[#00FF8B]\"\n          />\n\n          <input\n            type=\"password\"\n            placeholder=\"Senha\"\n            autoComplete=\"current-password\"\n            value={password}\n            onChange={(e) => setPassword(e.target.value)}\n            className=\"w-full h-11 rounded-lg bg-[#1A1A1A] border border-white/10 px-4 text-sm focus:outline-none focus:ring-2 focus:ring-[#00FF8B]\"\n          />\n\n          {msg ? (\n            <div className=\"text-sm text-red-400 bg-red-500/10 border border-red-500/20 rounded-lg px-3 py-2\">\n              {msg}\n            </div>\n          ) : null}\n\n          <button\n            type=\"submit\"\n            disabled={loading || !canSubmit}\n            className={cn(\n              \"w-full h-11 rounded-lg font-medium transition\",\n              \"bg-[#00FF8B] text-black hover:opacity-90\",\n              (loading || !canSubmit) && \"opacity-60 cursor-not-allowed\"\n            )}\n          >\n            {loading ? \"Entrando...\" : \"Entrar\"}\n          </button>\n\n          <div className=\"flex items-center justify-between pt-2\">\n            <button\n              type=\"button\"\n              onClick={openForgot}\n              className=\"text-sm text-[#00FF8B] hover:underline\"\n            >\n              Esqueci a senha\n            </button>\n\n            <a href=\"/register\" className=\"text-sm text-zinc-300 hover:underline\">\n              Criar conta\n            </a>\n          </div>\n        </form>\n      </div>\n\n      {/* Forgot Password Modal */}\n      {forgotOpen ? (\n        <div\n          className=\"fixed inset-0 z-50 flex items-center justify-center px-4\"\n          aria-modal=\"true\"\n          role=\"dialog\"\n        >\n          {/* overlay */}\n          <div\n            className=\"absolute inset-0 bg-black/70\"\n            onClick={() => setForgotOpen(false)}\n          />\n\n          <div className=\"relative w-full max-w-md bg-[#121212] rounded-2xl p-6 shadow-xl border border-white/5\">\n            <div className=\"flex items-start justify-between gap-4\">\n              <div>\n                <h2 className=\"text-xl font-semibold\">Recuperar senha</h2>\n                <p className=\"text-sm text-zinc-400 mt-1\">\n                  Informe seu email para gerar o link de redefinição.\n                </p>\n              </div>\n\n              <button\n                onClick={() => setForgotOpen(false)}\n                className=\"text-zinc-400 hover:text-white transition\"\n                aria-label=\"Fechar\"\n              >\n                ✕\n              </button>\n            </div>\n\n            <form onSubmit={onForgot} className=\"space-y-4 mt-5\">\n              <input\n                type=\"email\"\n                placeholder=\"Email\"\n                autoComplete=\"email\"\n                value={forgotEmail}\n                onChange={(e) => setForgotEmail(e.target.value)}\n                className=\"w-full h-11 rounded-lg bg-[#1A1A1A] border border-white/10 px-4 text-sm focus:outline-none focus:ring-2 focus:ring-[#00FF8B]\"\n              />\n\n              {forgotMsg ? (\n                <div\n                  className={cn(\n                    \"text-sm rounded-lg px-3 py-2 border\",\n                    forgotMsg.includes(\"Se o email\")\n                      ? \"text-emerald-300 bg-emerald-500/10 border-emerald-500/20\"\n                      : \"text-red-400 bg-red-500/10 border-red-500/20\"\n                  )}\n                >\n                  {forgotMsg}\n                </div>\n              ) : null}\n\n              <button\n                type=\"submit\"\n                disabled={forgotLoading}\n                className={cn(\n                  \"w-full h-11 rounded-lg font-medium transition\",\n                  \"bg-[#00FF8B] text-black hover:opacity-90\",\n                  forgotLoading && \"opacity-60 cursor-not-allowed\"\n                )}\n              >\n                {forgotLoading ? \"Enviando...\" : \"Enviar link\"}\n              </button>\n\n              <div className=\"text-center\">\n                <button\n                  type=\"button\"\n                  onClick={() => setForgotOpen(false)}\n                  className=\"text-sm text-zinc-300 hover:underline\"\n                >\n                  Voltar\n                </button>\n              </div>\n            </form>\n          </div>\n        </div>\n      ) : null}\n    </main>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 373, "column": 0}, "map": {"version":3,"sources":["file:///Users/ruangalvao/ProjetosVS/Projetos%20Pessoais/stud.ai-app/app-stud.ai/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react-jsx-dev-runtime.ts"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.ReactJsxDevRuntime\n"],"names":["module","exports","require","vendored","ReactJsxDevRuntime"],"mappings":"AAAAA,OAAOC,OAAO,GACZC,QAAQ,4HACRC,QAAQ,CAAC,YAAY,CAAEC,kBAAkB","ignoreList":[0],"debugId":null}}]
}