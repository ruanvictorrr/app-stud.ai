{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 29, "column": 0}, "map": {"version":3,"sources":["file:///Users/ruangalvao/ProjetosVS/Projetos%20Pessoais/stud.ai-app/app-stud.ai/src/lib/studyMaterialStore.ts"],"sourcesContent":["export type FlashcardDifficulty = \"easy\" | \"medium\" | \"hard\";\n\nexport type Flashcard = {\n  id: number;\n  question: string;\n  answer: string;\n  difficulty?: FlashcardDifficulty;\n  tags?: string[];\n};\n\nexport type SourceQuote = {\n  quote: string;\n  whyItMatters: string;\n};\n\nexport type SummaryLength = \"short\" | \"medium\" | \"long\";\n\nexport type SummaryTopic = {\n  id: number;\n  title: string;\n  content: string;\n  icon: string;\n  tags?: string[];\n};\n\nexport type StudySummary = {\n  title: string;\n  length?: SummaryLength;\n  mainTopics: SummaryTopic[];\n  keyPoints: string[];\n  sourceQuotes?: SourceQuote[];\n};\n\nexport type StudyMaterial = {\n  docId?: string;                 // ‚úÖ novo\n  sourceFileName?: string;        // ‚úÖ novo\n  sourceMimeType?: string;        // ‚úÖ novo\n\n  topic: string;\n  tags?: string[];\n  flashcards: Flashcard[];\n  summary: StudySummary;\n  createdAt?: string;\n\n  // prefer√™ncias usadas na gera√ß√£o (opcional)\n  prefs?: {\n    flashcardsCount?: number;\n    flashcardsDifficulty?: string;\n    summaryStyle?: string;\n  };\n};\n\nconst KEY_LAST = \"studai:lastMaterial:v1\";\nconst KEY_LIBRARY = \"studai:materials:v1\";\n\nconst listeners = new Set<() => void>();\nconst libraryListeners = new Set<() => void>();\n\nfunction emit() {\n  for (const fn of listeners) {\n    try {\n      fn();\n    } catch {}\n}\n}\nfunction emitLibrary() {\n  for (const fn of libraryListeners) {\n    try {\n      fn();\n    } catch {}\n  }\n}\n\nfunction safeParse<T>(raw: string | null): T | null {\n  if (!raw) return null;\n  try {\n    return JSON.parse(raw) as T;\n  } catch {\n    return null;\n  }\n}\n\nfunction uid() {\n  // @ts-ignore\n  return (typeof crypto !== \"undefined\" && crypto.randomUUID) ? crypto.randomUUID() : `doc_${Date.now()}_${Math.random().toString(16).slice(2)}`;\n}\n\nfunction normalizeFlashcards(input: any): Flashcard[] {\n  const arr = Array.isArray(input) ? input : [];\n  const out: Flashcard[] = [];\n\n  for (let i = 0; i < arr.length; i++) {\n    const c = arr[i] || {};\n    const id = Number.isFinite(Number(c.id)) ? Number(c.id) : i + 1;\n\n    const question = typeof c.question === \"string\" ? c.question : \"\";\n    const answer = typeof c.answer === \"string\" ? c.answer : \"\";\n    if (!question || !answer) continue;\n\n    const d = String(c.difficulty || \"\").toLowerCase();\n    const difficulty: any = d === \"easy\" || d === \"medium\" || d === \"hard\" ? d : undefined;\n\n    const tags = Array.isArray(c.tags) ? c.tags.filter((t: any) => typeof t === \"string\") : undefined;\n    out.push({ id, question, answer, difficulty, tags });\n  }\n\n  const seen = new Set<number>();\n  const fixed: Flashcard[] = [];\n  for (const c of out) {\n    let id = c.id;\n    while (seen.has(id)) id += 100000;\n    seen.add(id);\n    fixed.push({ ...c, id });\n  }\n  return fixed;\n}\n\nfunction normalizeSummary(input: any): StudySummary {\n  const s = input || {};\n  const title = typeof s.title === \"string\" ? s.title : \"Resumo\";\n\n  const len = String(s.length || \"\").toLowerCase();\n  const length: SummaryLength | undefined =\n    len === \"short\" || len === \"medium\" || len === \"long\" ? (len as SummaryLength) : undefined;\n\n  const mainTopicsRaw = Array.isArray(s.mainTopics) ? s.mainTopics : [];\n  const mainTopics: SummaryTopic[] = mainTopicsRaw\n    .map((t: any, idx: number) => {\n      const tags = Array.isArray(t?.tags) ? t.tags.filter((x: any) => typeof x === \"string\") : undefined;\n      return {\n        id: Number.isFinite(Number(t?.id)) ? Number(t.id) : idx + 1,\n        title: typeof t?.title === \"string\" ? t.title : `T√≥pico ${idx + 1}`,\n        content: typeof t?.content === \"string\" ? t.content : \"\",\n        icon: typeof t?.icon === \"string\" ? t.icon : \"üìå\",\n        tags,\n      };\n    })\n    .filter((t: SummaryTopic) => t.title && t.content);\n\n  const keyPoints = Array.isArray(s.keyPoints) ? s.keyPoints.filter((k: any) => typeof k === \"string\") : [];\n\n  const sourceQuotesRaw = Array.isArray(s.sourceQuotes) ? s.sourceQuotes : [];\n  const sourceQuotes: SourceQuote[] = sourceQuotesRaw\n    .map((q: any) => ({\n      quote: typeof q?.quote === \"string\" ? q.quote : \"\",\n      whyItMatters: typeof q?.whyItMatters === \"string\" ? q.whyItMatters : \"\",\n    }))\n    .filter((q: SourceQuote) => q.quote && q.whyItMatters);\n\n  return { title, length, mainTopics, keyPoints, sourceQuotes: sourceQuotes.length ? sourceQuotes : undefined };\n}\n\nexport function normalizeFromApi(anyJson: any): StudyMaterial | null {\n  if (!anyJson) return null;\n\n  const payload =\n    anyJson?.topic && anyJson?.flashcards\n      ? anyJson\n      : anyJson?.data?.topic && anyJson?.data?.flashcards\n      ? anyJson.data\n      : anyJson?.data?.data?.topic && anyJson?.data?.data?.flashcards\n      ? anyJson.data.data\n      : null;\n\n  if (!payload) return null;\n\n  const topic = typeof payload.topic === \"string\" ? payload.topic : \"\";\n  if (!topic) return null;\n\n  const tags = Array.isArray(payload.tags) ? payload.tags.filter((t: any) => typeof t === \"string\") : [];\n  const flashcards = normalizeFlashcards(payload.flashcards);\n  const summary = normalizeSummary(payload.summary);\n\n  if (!flashcards.length || !summary?.mainTopics?.length) return null;\n\n  return {\n    topic,\n    tags,\n    flashcards,\n    summary,\n    createdAt: new Date().toISOString(),\n  };\n}\n\nexport function saveMaterial(material: StudyMaterial) {\n  if (typeof window === \"undefined\") return;\n\n  // garante docId\n  const docId = material.docId || uid();\n  const withId: StudyMaterial = { ...material, docId };\n\n  // salva como ‚Äúativo‚Äù\n  localStorage.setItem(KEY_LAST, JSON.stringify(withId));\n  emit();\n\n  // upsert na biblioteca\n  const lib = safeParse<StudyMaterial[]>(localStorage.getItem(KEY_LIBRARY)) ?? [];\n  const idx = lib.findIndex((m) => m.docId === docId);\n  if (idx >= 0) lib[idx] = withId;\n  else lib.unshift(withId);\n\n  localStorage.setItem(KEY_LIBRARY, JSON.stringify(lib));\n  emitLibrary();\n}\n\nexport function loadMaterial(): StudyMaterial | null {\n  if (typeof window === \"undefined\") return null;\n  return safeParse<StudyMaterial>(localStorage.getItem(KEY_LAST));\n}\n\nexport function listMaterials(): StudyMaterial[] {\n  if (typeof window === \"undefined\") return [];\n  return safeParse<StudyMaterial[]>(localStorage.getItem(KEY_LIBRARY)) ?? [];\n}\n\nexport function loadMaterialById(docId: string): StudyMaterial | null {\n  const lib = listMaterials();\n  return lib.find((m) => m.docId === docId) ?? null;\n}\n\nexport function setActiveMaterialById(docId: string) {\n  const m = loadMaterialById(docId);\n  if (!m || typeof window === \"undefined\") return false;\n  localStorage.setItem(KEY_LAST, JSON.stringify(m));\n  emit();\n  return true;\n}\n\nexport function deleteMaterial(docId: string) {\n  if (typeof window === \"undefined\") return;\n  const lib = listMaterials().filter((m) => m.docId !== docId);\n  localStorage.setItem(KEY_LIBRARY, JSON.stringify(lib));\n\n  const active = loadMaterial();\n  if (active?.docId === docId) localStorage.removeItem(KEY_LAST);\n\n  emit();\n  emitLibrary();\n}\n\nexport function clearMaterial() {\n  if (typeof window === \"undefined\") return;\n  localStorage.removeItem(KEY_LAST);\n  emit();\n}\n\nexport function onMaterialUpdated(cb: () => void) {\n  listeners.add(cb);\n  return () => listeners.delete(cb);\n}\n\nexport function onLibraryUpdated(cb: () => void) {\n  libraryListeners.add(cb);\n  return () => libraryListeners.delete(cb);\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 207, "column": 0}, "map": {"version":3,"sources":["file:///Users/ruangalvao/ProjetosVS/Projetos%20Pessoais/stud.ai-app/app-stud.ai/src/app/components/UploadSection.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useRef, useState } from \"react\";\nimport { normalizeFromApi, saveMaterial } from \"@/lib/studyMaterialStore\";\n\ntype DifficultyUI = \"easy\" | \"medium\" | \"hard\" | \"random\";\ntype SummaryStyleUI = \"bullets\" | \"detailed\";\ntype Section = \"upload\" | \"flashcards\" | \"summary\" | \"progress\";\n\ntype Props = {\n  onDataProcessed?: (data: any) => void;\n  onNavigate?: (section: Section) => void;\n};\n\ntype Status = \"idle\" | \"selected\" | \"uploading\" | \"success\" | \"error\";\n\nconst PREFS_KEY = \"studai:genPrefs:v1\";\n\nfunction cn(...s: Array<string | false | null | undefined>) {\n  return s.filter(Boolean).join(\" \");\n}\nfunction clampInt(n: number, min: number, max: number) {\n  if (!Number.isFinite(n)) return min;\n  return Math.max(min, Math.min(max, Math.trunc(n)));\n}\nfunction formatBytes(bytes: number) {\n  if (!Number.isFinite(bytes)) return \"\";\n  const units = [\"B\", \"KB\", \"MB\", \"GB\"];\n  let i = 0;\n  let v = bytes;\n  while (v >= 1024 && i < units.length - 1) {\n    v /= 1024;\n    i++;\n  }\n  return `${v.toFixed(i === 0 ? 0 : 1)} ${units[i]}`;\n}\n\nexport default function UploadSection({ onDataProcessed, onNavigate }: Props) {\n  const inputRef = useRef<HTMLInputElement | null>(null);\n\n  const [status, setStatus] = useState<Status>(\"idle\");\n  const [isUploading, setIsUploading] = useState(false);\n\n  const [selectedFile, setSelectedFile] = useState<File | null>(null);\n\n  const [flashcardsCount, setFlashcardsCount] = useState<number>(10);\n  const [difficulty, setDifficulty] = useState<DifficultyUI>(\"random\");\n  const [summaryStyle, setSummaryStyle] = useState<SummaryStyleUI>(\"bullets\");\n\n  const [message, setMessage] = useState<string | null>(null);\n  const [lastProcessedAt, setLastProcessedAt] = useState<string | null>(null);\n  const [lastMaterial, setLastMaterial] = useState<any>(null);\n\n  const [cooldownSec, setCooldownSec] = useState<number>(0);\n  const [lastApiJson, setLastApiJson] = useState<any>(null);\n\n  useEffect(() => {\n    try {\n      const raw = localStorage.getItem(PREFS_KEY);\n      if (!raw) return;\n      const p = JSON.parse(raw);\n      if (p?.flashcardsCount) setFlashcardsCount(clampInt(Number(p.flashcardsCount), 1, 50));\n      if (p?.difficulty) setDifficulty(p.difficulty);\n      if (p?.summaryStyle) setSummaryStyle(p.summaryStyle);\n    } catch {}\n  }, []);\n\n  useEffect(() => {\n    try {\n      localStorage.setItem(PREFS_KEY, JSON.stringify({ flashcardsCount, difficulty, summaryStyle }));\n    } catch {}\n  }, [flashcardsCount, difficulty, summaryStyle]);\n\n  useEffect(() => {\n    if (cooldownSec <= 0) return;\n    const t = window.setInterval(() => setCooldownSec((s) => (s <= 1 ? 0 : s - 1)), 1000);\n    return () => window.clearInterval(t);\n  }, [cooldownSec]);\n\n  function pickFile() {\n    setMessage(null);\n    inputRef.current?.click();\n  }\n\n  function clearAll() {\n    setSelectedFile(null);\n    setStatus(\"idle\");\n    setIsUploading(false);\n    setMessage(null);\n    setLastProcessedAt(null);\n    setLastMaterial(null);\n    setLastApiJson(null);\n    setCooldownSec(0);\n  }\n\n  async function handleUpload(file: File) {\n    setIsUploading(true);\n    setStatus(\"uploading\");\n    setMessage(\"Processando‚Ä¶\");\n    setCooldownSec(0);\n\n    try {\n      const formData = new FormData();\n      formData.append(\"file\", file);\n      formData.append(\"flashcardsCount\", String(clampInt(flashcardsCount, 1, 50)));\n      formData.append(\"flashcardsDifficulty\", difficulty);\n      formData.append(\"summaryStyle\", summaryStyle);\n\n      const response = await fetch(\"/api/process-study-material\", { method: \"POST\", body: formData });\n      const json = await response.json().catch(() => null);\n      setLastApiJson(json);\n\n      // quota => 429 com retryAfterSeconds\n      if (response.status === 429) {\n        const retry = Number(json?.retryAfterSeconds);\n        const retrySec = Number.isFinite(retry) ? retry : 30;\n        setStatus(\"error\");\n        setCooldownSec(retrySec);\n        setLastProcessedAt(new Date().toLocaleTimeString());\n        setMessage(`Limite atingido. Tente novamente em ${retrySec}s.`);\n        return;\n      }\n\n      if (!response.ok || !json?.success) {\n        throw new Error(json?.details || json?.error || \"Falha ao processar arquivo\");\n      }\n\n      const material =\n        normalizeFromApi(json) ||\n        normalizeFromApi(json?.data) ||\n        normalizeFromApi({ success: true, data: json?.data });\n\n      if (!material) throw new Error(\"Resposta inv√°lida: faltou topic/flashcards/summary.\");\n\n      saveMaterial(material);\n      setLastMaterial(material);\n      onDataProcessed?.(material);\n\n      setStatus(\"success\");\n      setLastProcessedAt(new Date().toLocaleTimeString());\n      setMessage(\"Arquivo processado com sucesso ‚úÖ\");\n    } catch (e: any) {\n      setStatus(\"error\");\n      setLastProcessedAt(new Date().toLocaleTimeString());\n      setMessage(e?.message || \"Erro inesperado ‚ùå\");\n    } finally {\n      setIsUploading(false);\n    }\n  }\n\n  async function onFileChange(e: React.ChangeEvent<HTMLInputElement>) {\n    const file = e.target.files?.[0] || null;\n    if (!file) return;\n    setSelectedFile(file);\n    setStatus(\"selected\");\n    setMessage(\"Arquivo selecionado. Processando‚Ä¶\");\n    await handleUpload(file);\n    e.target.value = \"\";\n  }\n\n  async function onDrop(e: React.DragEvent<HTMLDivElement>) {\n    e.preventDefault();\n    const file = e.dataTransfer.files?.[0] || null;\n    if (!file) return;\n    setSelectedFile(file);\n    setStatus(\"selected\");\n    setMessage(\"Arquivo selecionado. Processando‚Ä¶\");\n    await handleUpload(file);\n  }\n\n  function onDragOver(e: React.DragEvent<HTMLDivElement>) {\n    e.preventDefault();\n  }\n\n  async function regenerate() {\n    if (!selectedFile) return;\n    await handleUpload(selectedFile);\n  }\n\n  const canNavigate = !!lastMaterial;\n\n  return (\n    <section className=\"w-full max-w-5xl mx-auto mt-10\">\n      <input\n        ref={inputRef}\n        type=\"file\"\n        className=\"hidden\"\n        onChange={onFileChange}\n        accept=\"image/*,application/pdf,text/plain\"\n      />\n\n      {/* Header premium */}\n      <div className=\"rounded-2xl border border-white/10 bg-white/5 p-6\">\n        <div className=\"flex flex-col md:flex-row md:items-start md:justify-between gap-4\">\n          <div>\n            <div className=\"text-xs opacity-70\">Upload</div>\n            <h2 className=\"text-2xl font-semibold mt-1\">Gerar materiais automaticamente</h2>\n            <div className=\"mt-2 text-sm opacity-70\">\n              Selecione um arquivo e a IA cria flashcards e resumo no mesmo padr√£o do app.\n            </div>\n          </div>\n\n          <div className=\"flex flex-wrap gap-2\">\n            <Chip tone={status === \"success\" ? \"green\" : \"neutral\"} label={status === \"success\" ? \"‚úÖ Sucesso\" : \"üìÑ Pronto\"} />\n            <Chip tone={status === \"uploading\" ? \"neutral\" : \"neutral\"} label={isUploading ? \"‚è≥ Processando\" : \"‚öôÔ∏è Config\"} />\n            <Chip tone={status === \"error\" ? \"red\" : \"neutral\"} label={status === \"error\" ? \"‚ùå Falhou\" : \"‚ú® Stud.ai\"} />\n          </div>\n        </div>\n\n        {/* Config */}\n        <div className=\"mt-5 grid grid-cols-1 md:grid-cols-3 gap-3\">\n          <Box>\n            <div className=\"text-xs opacity-70\">Quantidade de flashcards</div>\n            <input\n              type=\"number\"\n              min={1}\n              max={50}\n              value={flashcardsCount}\n              onChange={(e) => setFlashcardsCount(clampInt(Number(e.target.value), 1, 50))}\n              className=\"mt-2 w-full rounded-lg border border-white/10 bg-black/20 px-3 py-2 outline-none\"\n            />\n            <div className=\"text-xs opacity-60 mt-1\">1 a 50</div>\n          </Box>\n\n          <Box>\n            <div className=\"text-xs opacity-70\">Dificuldade</div>\n            <select\n              value={difficulty}\n              onChange={(e) => setDifficulty(e.target.value as DifficultyUI)}\n              className=\"mt-2 w-full rounded-lg border border-white/10 bg-black/20 px-3 py-2 outline-none\"\n            >\n              <option value=\"easy\">F√°cil</option>\n              <option value=\"medium\">M√©dio</option>\n              <option value=\"hard\">Dif√≠cil</option>\n              <option value=\"random\">Aleat√≥rio</option>\n            </select>\n          </Box>\n\n          <Box>\n            <div className=\"text-xs opacity-70\">Estilo do resumo</div>\n            <select\n              value={summaryStyle}\n              onChange={(e) => setSummaryStyle(e.target.value as SummaryStyleUI)}\n              className=\"mt-2 w-full rounded-lg border border-white/10 bg-black/20 px-3 py-2 outline-none\"\n            >\n              <option value=\"bullets\">Bullets (objetivo)</option>\n              <option value=\"detailed\">Elaborado (explicativo)</option>\n            </select>\n          </Box>\n        </div>\n\n        {/* Status banner */}\n        {message ? (\n          <div\n            className={cn(\n              \"mt-5 rounded-2xl border p-4 text-sm\",\n              status === \"success\" || canNavigate\n                ? \"border-[#00FF8B]/20 bg-[#00FF8B]/10 text-[#00FF8B]\"\n                : status === \"error\"\n                ? \"border-red-500/20 bg-red-500/10 text-red-200\"\n                : \"border-white/10 bg-black/20 text-white/70\"\n            )}\n          >\n            <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2\">\n              <div>\n                <div className=\"font-semibold\">{message}</div>\n                {lastProcessedAt ? <div className=\"text-xs opacity-70 mt-1\">√†s {lastProcessedAt}</div> : null}\n                {cooldownSec > 0 ? <div className=\"mt-2\">‚è≥ Aguarde <b>{cooldownSec}s</b> para tentar novamente.</div> : null}\n              </div>\n\n              <div className=\"flex flex-wrap gap-2\">\n                {canNavigate ? (\n                  <>\n                    <button\n                      onClick={() => onNavigate?.(\"flashcards\")}\n                      className=\"rounded-xl border border-[#00FF8B]/30 bg-[#00FF8B]/10 px-4 py-2 text-sm font-semibold text-[#00FF8B] hover:bg-[#00FF8B]/15\"\n                    >\n                      Ir para Flashcards\n                    </button>\n                    <button\n                      onClick={() => onNavigate?.(\"summary\")}\n                      className=\"rounded-xl border border-white/10 bg-white/5 px-4 py-2 text-sm hover:bg-white/10\"\n                    >\n                      Ir para Resumo\n                    </button>\n                  </>\n                ) : (\n                  <button\n                    onClick={regenerate}\n                    disabled={!selectedFile || isUploading || cooldownSec > 0}\n                    className=\"rounded-xl border border-white/10 bg-white/5 px-4 py-2 text-sm hover:bg-white/10 disabled:opacity-50\"\n                  >\n                    {cooldownSec > 0 ? `Tentar em ${cooldownSec}s` : \"Tentar novamente\"}\n                  </button>\n                )}\n              </div>\n            </div>\n          </div>\n        ) : null}\n\n        {/* File row */}\n        <div className=\"mt-5 flex flex-col sm:flex-row items-center justify-between gap-3\">\n          <div className=\"text-xs opacity-70\">\n            {selectedFile ? (\n              <>\n                Arquivo atual: <span className=\"opacity-90\">{selectedFile.name}</span> ‚Ä¢ {formatBytes(selectedFile.size)}\n              </>\n            ) : (\n              \"Nenhum arquivo selecionado ainda.\"\n            )}\n          </div>\n\n          <div className=\"flex items-center gap-2\">\n            <button\n              onClick={regenerate}\n              disabled={!selectedFile || isUploading || cooldownSec > 0}\n              className=\"rounded-xl border border-[#00FF8B]/30 bg-[#00FF8B]/10 px-4 py-2 text-sm font-semibold text-[#00FF8B] hover:bg-[#00FF8B]/15 disabled:opacity-50\"\n            >\n              Gerar novamente\n            </button>\n            <button\n              onClick={pickFile}\n              disabled={isUploading}\n              className=\"rounded-xl border border-white/10 bg-white/5 px-4 py-2 text-sm hover:bg-white/10 disabled:opacity-50\"\n            >\n              Trocar arquivo\n            </button>\n            <button\n              onClick={clearAll}\n              disabled={isUploading}\n              className=\"rounded-xl border border-white/10 bg-black/20 px-4 py-2 text-sm hover:bg-black/30 disabled:opacity-50\"\n            >\n              Limpar\n            </button>\n          </div>\n        </div>\n\n        {/* Debug opcional */}\n        {lastApiJson ? (\n          <details className=\"mt-4 text-xs opacity-80\">\n            <summary className=\"cursor-pointer\">Ver resposta da API (debug)</summary>\n            <pre className=\"mt-2 whitespace-pre-wrap break-words rounded-xl border border-white/10 bg-black/20 p-3\">\n              {JSON.stringify(lastApiJson, null, 2)}\n            </pre>\n          </details>\n        ) : null}\n      </div>\n\n      {/* Dropzone premium */}\n      <div\n        onDrop={onDrop}\n        onDragOver={onDragOver}\n        className=\"mt-6 w-full rounded-3xl border border-dashed border-white/15 bg-white/[0.03] p-10 text-center\"\n      >\n        <div className=\"text-lg font-semibold\">Arraste e solte seu arquivo aqui</div>\n        <div className=\"mt-2 text-sm opacity-70\">ou clique para selecionar</div>\n\n        <button\n          onClick={pickFile}\n          disabled={isUploading}\n          className=\"mt-6 inline-flex items-center justify-center rounded-2xl border border-white/10 bg-white/5 px-6 py-3 disabled:opacity-60 hover:bg-white/10\"\n        >\n          {isUploading ? \"Processando...\" : \"Selecionar arquivo\"}\n        </button>\n      </div>\n    </section>\n  );\n}\n\nfunction Box({ children }: { children: any }) {\n  return <div className=\"rounded-xl border border-white/10 bg-black/15 p-3\">{children}</div>;\n}\n\nfunction Chip({ label, tone }: { label: string; tone: \"green\" | \"red\" | \"neutral\" }) {\n  const cls =\n    tone === \"green\"\n      ? \"border-[#00FF8B]/25 bg-[#00FF8B]/10 text-[#00FF8B]\"\n      : tone === \"red\"\n      ? \"border-red-500/25 bg-red-500/10 text-red-200\"\n      : \"border-white/10 bg-black/20 text-white/70\";\n  return <span className={cn(\"text-xs px-3 py-1 rounded-full border\", cls)}>{label}</span>;\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 883, "column": 0}, "map": {"version":3,"sources":["file:///Users/ruangalvao/ProjetosVS/Projetos%20Pessoais/stud.ai-app/app-stud.ai/src/lib/studyProgressStore.ts"],"sourcesContent":["export type StudyProgress = {\n  knownIds: number[];\n  reviewIds: number[];\n  updatedAt?: string;\n};\n\nconst PREFIX_LEGACY = \"studai:progress:v1:\";\nconst PREFIX_DOC = \"studai:progress:v2:doc:\";\nconst listeners = new Set<() => void>();\n\nfunction emit() {\n  for (const fn of listeners) {\n    try {\n      fn();\n    } catch {}\n  }\n}\n\nfunction safeParse<T>(raw: string | null): T | null {\n  if (!raw) return null;\n  try {\n    return JSON.parse(raw) as T;\n  } catch {\n    return null;\n  }\n}\n\nfunction slugify(input: string) {\n  return (input || \"\")\n    .toLowerCase()\n    .normalize(\"NFD\")\n    .replace(/[\\u0300-\\u036f]/g, \"\")\n    .replace(/[^a-z0-9]+/g, \"-\")\n    .replace(/(^-|-$)/g, \"\")\n    .slice(0, 60);\n}\n\n// legado (n√£o quebra imports antigos)\nexport function makeProgressKey(topic: string, count: number) {\n  const t = slugify(topic || \"deck\");\n  const c = Number.isFinite(count) ? Math.trunc(count) : 0;\n  return `${PREFIX_LEGACY}${t}:${c}`;\n}\n\n// novo (por doc)\nexport function makeProgressKeyForDoc(docId: string) {\n  return `${PREFIX_DOC}${docId}`;\n}\n\nexport function loadProgress(key: string): StudyProgress | null {\n  if (typeof window === \"undefined\") return null;\n  return safeParse<StudyProgress>(localStorage.getItem(key));\n}\n\nexport function saveProgress(key: string, progress: StudyProgress) {\n  if (typeof window === \"undefined\") return;\n  localStorage.setItem(key, JSON.stringify(progress));\n  emit();\n}\n\nexport function clearProgress(key?: string) {\n  if (typeof window === \"undefined\") return;\n\n  if (key) {\n    localStorage.removeItem(key);\n    emit();\n    return;\n  }\n\n  const keys: string[] = [];\n  for (let i = 0; i < localStorage.length; i++) {\n    const k = localStorage.key(i);\n    if (!k) continue;\n    if (k.startsWith(PREFIX_LEGACY) || k.startsWith(PREFIX_DOC)) keys.push(k);\n  }\n  keys.forEach((k) => localStorage.removeItem(k));\n  emit();\n}\n\nexport function onProgressUpdated(cb: () => void) {\n  listeners.add(cb);\n  return () => listeners.delete(cb);\n}\n"],"names":[],"mappings":";;;;;;;;AAMA,MAAM,gBAAgB;AACtB,MAAM,aAAa;AACnB,MAAM,YAAY,IAAI;AAEtB,SAAS;IACP,KAAK,MAAM,MAAM,UAAW;QAC1B,IAAI;YACF;QACF,EAAE,OAAM,CAAC;IACX;AACF;AAEA,SAAS,UAAa,GAAkB;IACtC,IAAI,CAAC,KAAK,OAAO;IACjB,IAAI;QACF,OAAO,KAAK,KAAK,CAAC;IACpB,EAAE,OAAM;QACN,OAAO;IACT;AACF;AAEA,SAAS,QAAQ,KAAa;IAC5B,OAAO,CAAC,SAAS,EAAE,EAChB,WAAW,GACX,SAAS,CAAC,OACV,OAAO,CAAC,oBAAoB,IAC5B,OAAO,CAAC,eAAe,KACvB,OAAO,CAAC,YAAY,IACpB,KAAK,CAAC,GAAG;AACd;AAGO,SAAS,gBAAgB,KAAa,EAAE,KAAa;IAC1D,MAAM,IAAI,QAAQ,SAAS;IAC3B,MAAM,IAAI,OAAO,QAAQ,CAAC,SAAS,KAAK,KAAK,CAAC,SAAS;IACvD,OAAO,GAAG,gBAAgB,EAAE,CAAC,EAAE,GAAG;AACpC;AAGO,SAAS,sBAAsB,KAAa;IACjD,OAAO,GAAG,aAAa,OAAO;AAChC;AAEO,SAAS,aAAa,GAAW;IACtC,wCAAmC,OAAO;;;AAE5C;AAEO,SAAS,aAAa,GAAW,EAAE,QAAuB;IAC/D,wCAAmC;;;AAGrC;AAEO,SAAS,cAAc,GAAY;IACxC,wCAAmC;;;IAQnC,MAAM;IACD,IAAI;AAOX;AAEO,SAAS,kBAAkB,EAAc;IAC9C,UAAU,GAAG,CAAC;IACd,OAAO,IAAM,UAAU,MAAM,CAAC;AAChC","debugId":null}},
    {"offset": {"line": 945, "column": 0}, "map": {"version":3,"sources":["file:///Users/ruangalvao/ProjetosVS/Projetos%20Pessoais/stud.ai-app/app-stud.ai/src/lib/studySessionStore.ts"],"sourcesContent":["export type SessionAction = \"known\" | \"review\";\n\nexport type StudySession = {\n  id: string;\n  docId: string;\n\n  startedAt: string;\n  endedAt?: string;\n\n  mode: \"session\" | \"deck\";\n  sessionSize: number;\n\n  // m√©tricas\n  knownCount: number;\n  reviewCount: number;\n  answeredCount: number;\n\n  durationSec?: number;\n  accuracyPct?: number; // known / (known+review)\n};\n\nconst KEY = \"studai:sessions:v1\";\nconst listeners = new Set<() => void>();\n\nfunction emit() {\n  for (const fn of listeners) {\n    try {\n      fn();\n    } catch {}\n  }\n}\n\nfunction safeParse<T>(raw: string | null): T | null {\n  if (!raw) return null;\n  try {\n    return JSON.parse(raw) as T;\n  } catch {\n    return null;\n  }\n}\n\nfunction uid() {\n  // browser + fallback\n  // @ts-ignore\n  return (typeof crypto !== \"undefined\" && crypto.randomUUID) ? crypto.randomUUID() : `sess_${Date.now()}_${Math.random().toString(16).slice(2)}`;\n}\n\nfunction readAll(): StudySession[] {\n  if (typeof window === \"undefined\") return [];\n  return safeParse<StudySession[]>(localStorage.getItem(KEY)) ?? [];\n}\n\nfunction writeAll(list: StudySession[]) {\n  if (typeof window === \"undefined\") return;\n  localStorage.setItem(KEY, JSON.stringify(list));\n  emit();\n}\n\nexport function startSession(params: {\n  docId: string;\n  mode: \"session\" | \"deck\";\n  sessionSize: number;\n}) {\n  const s: StudySession = {\n    id: uid(),\n    docId: params.docId,\n    startedAt: new Date().toISOString(),\n    mode: params.mode,\n    sessionSize: params.sessionSize,\n    knownCount: 0,\n    reviewCount: 0,\n    answeredCount: 0,\n  };\n\n  const all = readAll();\n  all.unshift(s);\n  writeAll(all);\n  return s.id;\n}\n\nexport function recordSessionAction(sessionId: string, action: SessionAction) {\n  const all = readAll();\n  const i = all.findIndex((x) => x.id === sessionId);\n  if (i < 0) return;\n\n  const s = all[i];\n  const next: StudySession = {\n    ...s,\n    knownCount: action === \"known\" ? s.knownCount + 1 : s.knownCount,\n    reviewCount: action === \"review\" ? s.reviewCount + 1 : s.reviewCount,\n    answeredCount: s.answeredCount + 1,\n  };\n\n  all[i] = next;\n  writeAll(all);\n}\n\nexport function endSession(sessionId: string) {\n  const all = readAll();\n  const i = all.findIndex((x) => x.id === sessionId);\n  if (i < 0) return;\n\n  const s = all[i];\n  const endedAt = new Date().toISOString();\n  const durationSec = Math.max(\n    0,\n    Math.round((new Date(endedAt).getTime() - new Date(s.startedAt).getTime()) / 1000)\n  );\n  const denom = s.knownCount + s.reviewCount;\n  const accuracyPct = denom > 0 ? Math.round((s.knownCount / denom) * 100) : 0;\n\n  all[i] = { ...s, endedAt, durationSec, accuracyPct };\n  writeAll(all);\n}\n\nexport function listSessions(docId?: string) {\n  const all = readAll();\n  const filtered = docId ? all.filter((s) => s.docId === docId) : all;\n  // ordena mais recente primeiro\n  return filtered.sort((a, b) => (b.startedAt || \"\").localeCompare(a.startedAt || \"\"));\n}\n\nexport function onSessionsUpdated(cb: () => void) {\n  listeners.add(cb);\n  return () => listeners.delete(cb);\n}\n\nexport function clearSessions(docId?: string) {\n  const all = readAll();\n  if (!docId) {\n    writeAll([]);\n    return;\n  }\n  writeAll(all.filter((s) => s.docId !== docId));\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1054, "column": 0}, "map": {"version":3,"sources":["file:///Users/ruangalvao/ProjetosVS/Projetos%20Pessoais/stud.ai-app/app-stud.ai/src/app/components/FlashcardsSection.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useMemo, useState, useCallback } from \"react\";\nimport {\n  Flashcard,\n  loadMaterial,\n  onMaterialUpdated,\n} from \"@/lib/studyMaterialStore\";\nimport {\n  loadProgress,\n  saveProgress,\n  makeProgressKey,\n  makeProgressKeyForDoc,\n  clearProgress,\n} from \"@/lib/studyProgressStore\";\nimport {\n  startSession,\n  recordSessionAction,\n  endSession,\n} from \"@/lib/studySessionStore\";\nimport {\n  Check,\n  X,\n  ChevronLeft,\n  ChevronRight,\n  Play,\n  StopCircle,\n  RotateCcw,\n  SlidersHorizontal,\n} from \"lucide-react\";\n\ntype Filter = \"all\" | \"review\" | \"known\";\ntype Mode = \"deck\" | \"session\";\n\nfunction cn(...s: Array<string | false | null | undefined>) {\n  return s.filter(Boolean).join(\" \");\n}\nfunction pct(n: number) {\n  return Math.max(0, Math.min(100, Math.round(n)));\n}\nfunction shuffle<T>(arr: T[]) {\n  const a = [...arr];\n  for (let i = a.length - 1; i > 0; i--) {\n    const j = Math.floor(Math.random() * (i + 1));\n    [a[i], a[j]] = [a[j], a[i]];\n  }\n  return a;\n}\n\nexport default function FlashcardsSection(_props: { data?: any }) {\n  const [topic, setTopic] = useState(\"\");\n  const [cards, setCards] = useState<Flashcard[]>([]);\n  const [docId, setDocId] = useState<string>(\"\");\n\n  const [filter, setFilter] = useState<Filter>(\"all\");\n  const [mode, setMode] = useState<Mode>(\"deck\");\n\n  const [isFlipped, setIsFlipped] = useState(false);\n  const [index, setIndex] = useState(0);\n\n  const [knownIds, setKnownIds] = useState<number[]>([]);\n  const [reviewIds, setReviewIds] = useState<number[]>([]);\n\n  const [sessionSize, setSessionSize] = useState<number>(10);\n  const [sessionActive, setSessionActive] = useState(false);\n  const [sessionQueue, setSessionQueue] = useState<Flashcard[]>([]);\n  const [sessionIndex, setSessionIndex] = useState(0);\n  const [sessionId, setSessionId] = useState<string | null>(null);\n\n  // ---------- Progress keys (doc + legacy) ----------\n  const legacyKey = useMemo(() => makeProgressKey(topic || \"deck\", cards.length || 0), [topic, cards.length]);\n  const docKey = useMemo(() => (docId ? makeProgressKeyForDoc(docId) : \"\"), [docId]);\n\n  // ---------- Load material + progress ----------\n  useEffect(() => {\n    const refresh = () => {\n      const m = loadMaterial();\n      setTopic(m?.topic ?? \"\");\n      setCards(m?.flashcards ?? []);\n      setDocId(m?.docId ?? \"\");\n\n      // carrega progresso: primeiro por docId, depois fallback legacy\n      const pDoc = m?.docId ? loadProgress(makeProgressKeyForDoc(m.docId)) : null;\n      const pLegacy = loadProgress(makeProgressKey(m?.topic ?? \"deck\", m?.flashcards?.length ?? 0));\n\n      const p = pDoc ?? pLegacy;\n\n      setKnownIds(p?.knownIds ?? []);\n      setReviewIds(p?.reviewIds ?? []);\n\n      setFilter(\"all\");\n      setMode(\"deck\");\n      setIndex(0);\n      setIsFlipped(false);\n\n      setSessionActive(false);\n      setSessionQueue([]);\n      setSessionIndex(0);\n      setSessionId(null);\n    };\n\n    refresh();\n    return onMaterialUpdated(refresh);\n  }, []);\n\n  const knownSet = useMemo(() => new Set(knownIds), [knownIds]);\n  const reviewSet = useMemo(() => new Set(reviewIds), [reviewIds]);\n\n  // ---------- Filtered deck (deck mode) ----------\n  const filteredCards = useMemo(() => {\n    if (filter === \"known\") return cards.filter((c) => knownSet.has(c.id));\n    if (filter === \"review\") return cards.filter((c) => reviewSet.has(c.id));\n    return cards;\n  }, [cards, filter, knownSet, reviewSet]);\n\n  // ---------- Active list (deck or session) ----------\n  const activeList = sessionActive ? sessionQueue : filteredCards;\n  const activeIndex = sessionActive ? sessionIndex : index;\n  const current = activeList[activeIndex] ?? null;\n\n  // ---------- Overall progress ----------\n  const doneCount = useMemo(() => {\n    const s = new Set<number>([...knownIds, ...reviewIds]);\n    return s.size;\n  }, [knownIds, reviewIds]);\n\n  const progressPct = useMemo(() => {\n    const total = cards.length || 0;\n    return total ? pct((doneCount / total) * 100) : 0;\n  }, [doneCount, cards.length]);\n\n  const accuracyPct = useMemo(() => {\n    const k = knownIds.length;\n    const r = reviewIds.length;\n    return (k + r) ? pct((k / (k + r)) * 100) : 0;\n  }, [knownIds.length, reviewIds.length]);\n\n  // ---------- Save progress (doc + legacy) ----------\n  const persistProgress = useCallback(\n    (nextKnown: number[], nextReview: number[]) => {\n      const payload = {\n        knownIds: nextKnown,\n        reviewIds: nextReview,\n        updatedAt: new Date().toISOString(),\n      };\n\n      // salva por docId (novo)\n      if (docKey) saveProgress(docKey, payload);\n\n      // salva tamb√©m no legacy para compatibilidade com telas antigas\n      if (legacyKey) saveProgress(legacyKey, payload);\n    },\n    [docKey, legacyKey]\n  );\n\n  // ---------- Helpers ----------\n  function safeSetDeckIndex(next: number) {\n    const total = filteredCards.length;\n    if (!total) return setIndex(0);\n    const clamped = Math.max(0, Math.min(total - 1, next));\n    setIndex(clamped);\n  }\n\n  function safeSetSessionIndex(next: number) {\n    const total = sessionQueue.length;\n    if (!total) return setSessionIndex(0);\n    const clamped = Math.max(0, Math.min(total - 1, next));\n    setSessionIndex(clamped);\n  }\n\n  function goNext() {\n    setIsFlipped(false);\n    if (sessionActive) safeSetSessionIndex(sessionIndex + 1);\n    else safeSetDeckIndex(index + 1);\n  }\n\n  function goPrev() {\n    setIsFlipped(false);\n    if (sessionActive) safeSetSessionIndex(sessionIndex - 1);\n    else safeSetDeckIndex(index - 1);\n  }\n\n  // ---------- Session build ----------\n  function buildSessionDeck(size: number) {\n    const total = cards.length;\n    const want = Math.max(1, Math.min(total || 1, Math.trunc(size || 10)));\n\n    // prioridade: n√£o respondidos -> review -> resto\n    const notDone = cards.filter((c) => !knownSet.has(c.id) && !reviewSet.has(c.id));\n    const review = cards.filter((c) => reviewSet.has(c.id));\n    const rest = cards.filter((c) => knownSet.has(c.id));\n\n    const pool = [...shuffle(notDone), ...shuffle(review), ...shuffle(rest)];\n    return pool.slice(0, want);\n  }\n\n  function startNewSession() {\n    if (!cards.length || !docId) return;\n\n    const deck = buildSessionDeck(sessionSize);\n    setMode(\"session\");\n    setSessionQueue(deck);\n    setSessionIndex(0);\n    setIsFlipped(false);\n    setSessionActive(true);\n\n    const sid = startSession({\n      docId,\n      mode: \"session\",\n      sessionSize: deck.length,\n    });\n    setSessionId(sid);\n  }\n\n  function stopSession() {\n    if (sessionId) endSession(sessionId);\n    setSessionActive(false);\n    setSessionQueue([]);\n    setSessionIndex(0);\n    setSessionId(null);\n    setIsFlipped(false);\n    setMode(\"deck\");\n  }\n\n  // ---------- Mark actions ----------\n  const markKnown = useCallback(() => {\n    if (!current) return;\n\n    const nextKnownSet = new Set(knownIds);\n    const nextReviewSet = new Set(reviewIds);\n\n    nextKnownSet.add(current.id);\n    nextReviewSet.delete(current.id);\n\n    const nextKnown = Array.from(nextKnownSet);\n    const nextReview = Array.from(nextReviewSet);\n\n    setKnownIds(nextKnown);\n    setReviewIds(nextReview);\n    persistProgress(nextKnown, nextReview);\n\n    if (sessionActive && sessionId) recordSessionAction(sessionId, \"known\");\n\n    // fim de sess√£o?\n    if (sessionActive && sessionQueue.length && sessionIndex >= sessionQueue.length - 1) {\n      if (sessionId) endSession(sessionId);\n      stopSession();\n      return;\n    }\n\n    goNext();\n  }, [\n    current,\n    knownIds,\n    reviewIds,\n    persistProgress,\n    sessionActive,\n    sessionId,\n    sessionQueue.length,\n    sessionIndex,\n  ]);\n\n  const markReview = useCallback(() => {\n    if (!current) return;\n\n    const nextKnownSet = new Set(knownIds);\n    const nextReviewSet = new Set(reviewIds);\n\n    nextReviewSet.add(current.id);\n    nextKnownSet.delete(current.id);\n\n    const nextKnown = Array.from(nextKnownSet);\n    const nextReview = Array.from(nextReviewSet);\n\n    setKnownIds(nextKnown);\n    setReviewIds(nextReview);\n    persistProgress(nextKnown, nextReview);\n\n    if (sessionActive && sessionId) recordSessionAction(sessionId, \"review\");\n\n    if (sessionActive && sessionQueue.length && sessionIndex >= sessionQueue.length - 1) {\n      if (sessionId) endSession(sessionId);\n      stopSession();\n      return;\n    }\n\n    goNext();\n  }, [\n    current,\n    knownIds,\n    reviewIds,\n    persistProgress,\n    sessionActive,\n    sessionId,\n    sessionQueue.length,\n    sessionIndex,\n  ]);\n\n  // ---------- Keyboard shortcuts ----------\n  useEffect(() => {\n    function onKey(e: KeyboardEvent) {\n      if (!current) return;\n\n      if (e.key === \" \" || e.key.toLowerCase() === \"enter\") {\n        e.preventDefault();\n        setIsFlipped((v) => !v);\n      }\n      if (e.key === \"ArrowLeft\") {\n        e.preventDefault();\n        markReview();\n      }\n      if (e.key === \"ArrowRight\") {\n        e.preventDefault();\n        markKnown();\n      }\n    }\n    window.addEventListener(\"keydown\", onKey);\n    return () => window.removeEventListener(\"keydown\", onKey);\n  }, [current, markKnown, markReview]);\n\n  // ---------- Empty state ----------\n  if (!cards.length) {\n    return (\n      <section className=\"w-full max-w-5xl mx-auto mt-10 rounded-2xl border border-white/10 bg-white/5 p-8 text-center\">\n        <h2 className=\"text-2xl font-semibold\">Flashcards</h2>\n        <p className=\"mt-2 opacity-70\">Fa√ßa um upload para gerar flashcards automaticamente.</p>\n      </section>\n    );\n  }\n\n  // ---------- If filter results empty ----------\n  const hasActive = !!current;\n\n  return (\n    <section className=\"w-full max-w-5xl mx-auto mt-10\">\n      {/* Header premium */}\n      <div className=\"rounded-2xl border border-white/10 bg-white/5 p-6\">\n        <div className=\"flex flex-col md:flex-row md:items-start md:justify-between gap-4\">\n          <div>\n            <div className=\"text-xs opacity-70\">Flashcards</div>\n            <h2 className=\"text-2xl font-semibold mt-1\">{topic || \"Seu deck\"}</h2>\n            <div className=\"mt-2 text-sm opacity-70\">\n              Atalhos: <b>Enter/Espa√ßo</b> vira ‚Ä¢ <b>‚Üê</b> revisar ‚Ä¢ <b>‚Üí</b> acertei\n            </div>\n          </div>\n\n          <div className=\"flex flex-wrap gap-2\">\n            <Chip tone=\"neutral\" label={`üìö Cards: ${cards.length}`} />\n            <Chip tone=\"neutral\" label={`‚úÖ Feitos: ${doneCount}`} />\n            <Chip tone=\"green\" label={`üéØ Aproveitamento: ${accuracyPct}%`} />\n          </div>\n        </div>\n\n        {/* Progress bar */}\n        <div className=\"mt-5\">\n          <div className=\"flex items-center justify-between text-xs opacity-70\">\n            <span>Progresso geral</span>\n            <span>{progressPct}%</span>\n          </div>\n          <div className=\"mt-2 h-2 w-full rounded-full bg-black/30 overflow-hidden border border-white/10\">\n            <div className=\"h-full rounded-full bg-[#00FF8B]/70\" style={{ width: `${progressPct}%` }} />\n          </div>\n        </div>\n\n        {/* Controls row */}\n        <div className=\"mt-5 flex flex-col lg:flex-row lg:items-center justify-between gap-3\">\n          {/* Filters */}\n          <div className=\"flex flex-wrap items-center gap-2\">\n            <div className=\"inline-flex items-center gap-2 text-xs opacity-70 mr-2\">\n              <SlidersHorizontal className=\"w-4 h-4\" />\n              Filtro:\n            </div>\n            <Pill active={filter === \"all\"} onClick={() => { setFilter(\"all\"); setIsFlipped(false); setIndex(0); }}>\n              Todos\n            </Pill>\n            <Pill active={filter === \"review\"} onClick={() => { setFilter(\"review\"); setIsFlipped(false); setIndex(0); }}>\n              Revisar\n            </Pill>\n            <Pill active={filter === \"known\"} onClick={() => { setFilter(\"known\"); setIsFlipped(false); setIndex(0); }}>\n              Conhecidos\n            </Pill>\n          </div>\n\n          {/* Session controls */}\n          <div className=\"flex flex-wrap items-center gap-2\">\n            {!sessionActive ? (\n              <>\n                <div className=\"text-xs opacity-70 mr-1\">Sess√£o:</div>\n                <input\n                  type=\"number\"\n                  min={1}\n                  max={50}\n                  value={sessionSize}\n                  onChange={(e) => setSessionSize(Math.max(1, Math.min(50, Math.trunc(Number(e.target.value) || 10))))}\n                  className=\"w-24 rounded-xl border border-white/10 bg-black/20 px-3 py-2 text-sm outline-none\"\n                />\n                <button\n                  onClick={startNewSession}\n                  className=\"rounded-2xl border border-[#00FF8B]/30 bg-[#00FF8B]/10 px-4 py-2 text-sm font-semibold text-[#00FF8B] hover:bg-[#00FF8B]/15 inline-flex items-center gap-2\"\n                >\n                  <Play className=\"w-4 h-4\" /> Iniciar\n                </button>\n              </>\n            ) : (\n              <button\n                onClick={stopSession}\n                className=\"rounded-2xl border border-white/10 bg-black/20 px-4 py-2 text-sm hover:bg-black/30 inline-flex items-center gap-2\"\n              >\n                <StopCircle className=\"w-4 h-4\" /> Encerrar sess√£o\n              </button>\n            )}\n\n            <button\n              onClick={() => {\n                // reset s√≥ do deck ativo\n                if (docKey) clearProgress(docKey);\n                if (legacyKey) clearProgress(legacyKey);\n                setKnownIds([]);\n                setReviewIds([]);\n                setIsFlipped(false);\n              }}\n              className=\"rounded-2xl border border-white/10 bg-white/5 px-4 py-2 text-sm hover:bg-white/10 inline-flex items-center gap-2\"\n            >\n              <RotateCcw className=\"w-4 h-4\" /> Reset progresso\n            </button>\n          </div>\n        </div>\n      </div>\n\n      {/* If filtered list empty */}\n      {!hasActive ? (\n        <div className=\"mt-6 rounded-2xl border border-white/10 bg-white/5 p-10 text-center\">\n          <div className=\"text-xl font-semibold\">Nada aqui ainda</div>\n          <div className=\"mt-2 opacity-70\">\n            Esse filtro n√£o tem cards. Tente ‚ÄúTodos‚Äù ou fa√ßa uma sess√£o.\n          </div>\n          <button\n            onClick={() => setFilter(\"all\")}\n            className=\"mt-6 rounded-2xl border border-[#00FF8B]/30 bg-[#00FF8B]/10 px-6 py-3 font-semibold text-[#00FF8B] hover:bg-[#00FF8B]/15\"\n          >\n            Voltar para Todos\n          </button>\n        </div>\n      ) : (\n        <>\n          {/* Card index line */}\n          <div className=\"mt-6 flex items-center justify-between text-sm opacity-80\">\n            <div>\n              {sessionActive ? (\n                <span>\n                  Sess√£o ‚Ä¢ Card <b>{sessionIndex + 1}</b>/<b>{sessionQueue.length}</b>\n                </span>\n              ) : (\n                <span>\n                  Deck ‚Ä¢ Card <b>{index + 1}</b>/<b>{filteredCards.length}</b>\n                </span>\n              )}\n            </div>\n\n            <div className=\"flex items-center gap-2 text-xs opacity-70\">\n              <span className=\"inline-flex items-center gap-1\">\n                ‚úÖ {knownIds.length}\n              </span>\n              <span className=\"inline-flex items-center gap-1\">\n                ‚ùå {reviewIds.length}\n              </span>\n            </div>\n          </div>\n\n          {/* Flip card */}\n          <div className=\"mt-3 rounded-3xl border border-white/10 bg-white/5 p-5\">\n            <div className=\"relative [perspective:1200px]\">\n              <div\n                className={cn(\n                  \"relative w-full min-h-[260px] transition-transform duration-500 [transform-style:preserve-3d]\",\n                  isFlipped ? \"[transform:rotateY(180deg)]\" : \"\"\n                )}\n              >\n                {/* FRONT */}\n                <button\n                  type=\"button\"\n                  onClick={() => setIsFlipped(true)}\n                  className=\"absolute inset-0 rounded-2xl border border-white/10 bg-black/20 p-6 text-left [backface-visibility:hidden] hover:bg-black/25\"\n                >\n                  <div className=\"text-xs opacity-70\">Pergunta</div>\n                  <div className=\"mt-2 text-xl font-semibold leading-relaxed\">\n                    {current!.question}\n                  </div>\n\n                  <div className=\"mt-6 text-sm opacity-70\">\n                    Clique para ver a resposta\n                  </div>\n\n                  <div className=\"mt-3 flex flex-wrap gap-2\">\n                    {knownSet.has(current!.id) ? <Chip tone=\"green\" label=\"‚úÖ Conhecido\" /> : null}\n                    {reviewSet.has(current!.id) ? <Chip tone=\"red\" label=\"‚ùå Revisar\" /> : null}\n                    {current!.difficulty ? <Chip tone=\"neutral\" label={`‚ö° ${current!.difficulty}`} /> : null}\n                  </div>\n                </button>\n\n                {/* BACK */}\n                <button\n                  type=\"button\"\n                  onClick={() => setIsFlipped(false)}\n                  className=\"absolute inset-0 rounded-2xl border border-white/10 bg-black/20 p-6 text-left [transform:rotateY(180deg)] [backface-visibility:hidden] hover:bg-black/25\"\n                >\n                  <div className=\"text-xs opacity-70\">Resposta</div>\n                  <div className=\"mt-2 text-lg leading-relaxed whitespace-pre-wrap opacity-95\">\n                    {current!.answer}\n                  </div>\n\n                  <div className=\"mt-6 text-sm opacity-70\">\n                    Clique para voltar √† pergunta\n                  </div>\n                </button>\n              </div>\n            </div>\n\n            {/* Actions */}\n            <div className=\"mt-5 flex flex-col sm:flex-row items-stretch sm:items-center justify-between gap-3\">\n              <div className=\"flex items-center gap-2\">\n                <button\n                  onClick={goPrev}\n                  disabled={activeIndex <= 0}\n                  className=\"rounded-2xl border border-white/10 bg-white/5 px-4 py-3 text-sm hover:bg-white/10 disabled:opacity-40 inline-flex items-center gap-2\"\n                >\n                  <ChevronLeft className=\"w-4 h-4\" /> Anterior\n                </button>\n\n                <button\n                  onClick={goNext}\n                  disabled={activeIndex >= activeList.length - 1}\n                  className=\"rounded-2xl border border-white/10 bg-white/5 px-4 py-3 text-sm hover:bg-white/10 disabled:opacity-40 inline-flex items-center gap-2\"\n                >\n                  Pr√≥ximo <ChevronRight className=\"w-4 h-4\" />\n                </button>\n              </div>\n\n              <div className=\"flex items-center gap-2\">\n                <button\n                  onClick={markReview}\n                  className=\"rounded-2xl border border-red-500/25 bg-red-500/10 px-5 py-3 text-sm font-semibold text-red-200 hover:bg-red-500/15 inline-flex items-center gap-2\"\n                >\n                  <X className=\"w-4 h-4\" /> Revisar\n                </button>\n\n                <button\n                  onClick={markKnown}\n                  className=\"rounded-2xl border border-[#00FF8B]/30 bg-[#00FF8B]/10 px-5 py-3 text-sm font-semibold text-[#00FF8B] hover:bg-[#00FF8B]/15 inline-flex items-center gap-2\"\n                >\n                  <Check className=\"w-4 h-4\" /> Acertei\n                </button>\n              </div>\n            </div>\n          </div>\n        </>\n      )}\n    </section>\n  );\n}\n\nfunction Pill({\n  active,\n  onClick,\n  children,\n}: {\n  active?: boolean;\n  onClick?: () => void;\n  children: any;\n}) {\n  return (\n    <button\n      onClick={onClick}\n      className={cn(\n        \"rounded-full px-4 py-2 text-sm border transition\",\n        active\n          ? \"border-[#00FF8B]/30 bg-[#00FF8B]/10 text-[#00FF8B]\"\n          : \"border-white/10 bg-white/5 text-white/70 hover:bg-white/10\"\n      )}\n    >\n      {children}\n    </button>\n  );\n}\n\nfunction Chip({ label, tone }: { label: string; tone: \"green\" | \"red\" | \"neutral\" }) {\n  const cls =\n    tone === \"green\"\n      ? \"border-[#00FF8B]/25 bg-[#00FF8B]/10 text-[#00FF8B]\"\n      : tone === \"red\"\n      ? \"border-red-500/25 bg-red-500/10 text-red-200\"\n      : \"border-white/10 bg-black/20 text-white/70\";\n  return <span className={cn(\"text-xs px-3 py-1 rounded-full border\", cls)}>{label}</span>;\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 2103, "column": 0}, "map": {"version":3,"sources":["file:///Users/ruangalvao/ProjetosVS/Projetos%20Pessoais/stud.ai-app/app-stud.ai/src/app/components/SummarySection.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useMemo, useState } from \"react\";\nimport { loadMaterial, onMaterialUpdated } from \"@/lib/studyMaterialStore\";\n\nfunction cn(...s: Array<string | false | null | undefined>) {\n  return s.filter(Boolean).join(\" \");\n}\n\nfunction lengthLabel(l?: string) {\n  if (l === \"short\") return \"Curto\";\n  if (l === \"long\") return \"Longo\";\n  if (l === \"medium\") return \"M√©dio\";\n  return \"‚Äî\";\n}\n\nexport default function SummarySection(_props: { data?: any }) {\n  const [topic, setTopic] = useState<string>(\"\");\n  const [tags, setTags] = useState<string[]>([]);\n  const [summary, setSummary] = useState<any>(null);\n  const [openId, setOpenId] = useState<number | null>(null);\n\n  useEffect(() => {\n    const refresh = () => {\n      const m = loadMaterial();\n      setTopic(m?.topic ?? \"\");\n      setTags(m?.tags ?? []);\n      setSummary(m?.summary ?? null);\n      setOpenId(m?.summary?.mainTopics?.[0]?.id ?? null);\n    };\n\n    refresh();\n    return onMaterialUpdated(refresh);\n  }, []);\n\n  const hasQuotes = useMemo(() => (summary?.sourceQuotes?.length ?? 0) > 0, [summary]);\n  const length = lengthLabel(summary?.length);\n\n  if (!summary) {\n    return (\n      <section className=\"w-full max-w-5xl mx-auto mt-10 rounded-2xl border border-white/10 bg-white/5 p-8 text-center\">\n        <h2 className=\"text-2xl font-semibold\">Resumos</h2>\n        <p className=\"mt-2 opacity-70\">Fa√ßa um upload para gerar um resumo automaticamente.</p>\n      </section>\n    );\n  }\n\n  return (\n    <section className=\"w-full max-w-5xl mx-auto mt-10\">\n      {/* Header premium */}\n      <div className=\"rounded-2xl border border-white/10 bg-white/5 p-6\">\n        <div className=\"flex flex-col md:flex-row md:items-start md:justify-between gap-4\">\n          <div>\n            <div className=\"text-xs opacity-70\">Resumo</div>\n            <h2 className=\"text-2xl font-semibold mt-1\">\n              {topic ? `${topic} ‚Äî ${summary.title}` : summary.title}\n            </h2>\n            <div className=\"mt-2 text-sm opacity-70\">\n              Leitura r√°pida + t√≥picos principais no padr√£o do app.\n            </div>\n          </div>\n\n          <div className=\"flex flex-wrap gap-2\">\n            <Chip tone=\"green\" label={`üìù ${length}`} />\n            <Chip tone=\"neutral\" label={`üìå ${summary?.mainTopics?.length ?? 0} t√≥picos`} />\n            <Chip\n              tone=\"neutral\"\n              label={hasQuotes ? `üîé ${summary.sourceQuotes.length} trechos` : \"üîé sem trechos\"}\n            />\n          </div>\n        </div>\n\n        {tags?.length ? (\n          <div className=\"mt-4 flex flex-wrap gap-2\">\n            {tags.slice(0, 12).map((t: string) => (\n              <span\n                key={t}\n                className=\"text-xs px-3 py-1 rounded-full border border-white/10 bg-black/20 text-white/70\"\n              >\n                #{t}\n              </span>\n            ))}\n          </div>\n        ) : null}\n      </div>\n\n      {/* T√≥picos (accordion premium) */}\n      <div className=\"mt-6 space-y-3\">\n        {(summary.mainTopics || []).map((t: any) => {\n          const opened = openId === t.id;\n          return (\n            <div key={t.id} className=\"rounded-2xl border border-white/10 bg-white/5 overflow-hidden\">\n              <button\n                onClick={() => setOpenId(opened ? null : t.id)}\n                className=\"w-full flex items-center justify-between gap-3 p-5 hover:bg-white/5\"\n              >\n                <div className=\"flex items-center gap-3 text-left\">\n                  <div className=\"text-xl\">{t.icon || \"üìò\"}</div>\n                  <div>\n                    <div className=\"font-semibold\">{t.title}</div>\n                    {Array.isArray(t.tags) && t.tags.length ? (\n                      <div className=\"mt-1 text-xs opacity-70\">\n                        {t.tags.slice(0, 4).map((x: string) => `#${x}`).join(\"  \")}\n                      </div>\n                    ) : (\n                      <div className=\"mt-1 text-xs opacity-60\">Clique para expandir</div>\n                    )}\n                  </div>\n                </div>\n\n                <div className={cn(\"text-xs opacity-70\", opened && \"opacity-100\")}>\n                  {opened ? \"Fechar\" : \"Abrir\"}\n                </div>\n              </button>\n\n              {opened ? (\n                <div className=\"px-5 pb-5\">\n                  <div className=\"rounded-2xl border border-white/10 bg-black/20 p-5\">\n                    <p className=\"opacity-90 leading-relaxed whitespace-pre-wrap\">{t.content}</p>\n                  </div>\n                </div>\n              ) : null}\n            </div>\n          );\n        })}\n      </div>\n\n      {/* Pontos-chave (cards) */}\n      {summary.keyPoints?.length ? (\n        <div className=\"mt-6 rounded-2xl border border-white/10 bg-white/5 p-6\">\n          <div className=\"flex items-center justify-between gap-3 flex-wrap\">\n            <h3 className=\"text-lg font-semibold\">Pontos-chave</h3>\n            <span className=\"text-xs opacity-70\">{summary.keyPoints.length} itens</span>\n          </div>\n\n          <ul className=\"mt-4 space-y-2\">\n            {summary.keyPoints.map((k: string, i: number) => (\n              <li key={i} className=\"rounded-xl border border-white/10 bg-black/20 p-3 opacity-90\">\n                {k}\n              </li>\n            ))}\n          </ul>\n        </div>\n      ) : null}\n\n      {/* Trechos/Evid√™ncias */}\n      <div className=\"mt-6 rounded-2xl border border-white/10 bg-white/5 p-6\">\n        <div className=\"flex items-center justify-between flex-wrap gap-3\">\n          <h3 className=\"text-lg font-semibold\">Trechos do material</h3>\n          <div className=\"text-xs opacity-70\">\n            {hasQuotes ? `${summary.sourceQuotes.length} trecho(s)` : \"Sem trechos dispon√≠veis\"}\n          </div>\n        </div>\n\n        {!hasQuotes ? (\n          <p className=\"mt-3 opacity-70\">\n            Se o arquivo for imagem com texto pouco leg√≠vel ou PDF sem extra√ß√£o, a IA pode n√£o conseguir citar.\n          </p>\n        ) : (\n          <div className=\"mt-5 grid grid-cols-1 md:grid-cols-2 gap-4\">\n            {summary.sourceQuotes.map((q: any, i: number) => (\n              <div key={i} className=\"rounded-2xl border border-white/10 bg-black/20 p-5\">\n                <div className=\"text-xs opacity-70\">Trecho</div>\n                <p className=\"mt-2 italic opacity-90\">‚Äú{q.quote}‚Äù</p>\n                <div className=\"mt-4 text-xs opacity-70\">Por que importa</div>\n                <p className=\"mt-2 opacity-85\">{q.whyItMatters}</p>\n              </div>\n            ))}\n          </div>\n        )}\n      </div>\n    </section>\n  );\n}\n\nfunction Chip({ label, tone }: { label: string; tone: \"green\" | \"red\" | \"neutral\" }) {\n  const cls =\n    tone === \"green\"\n      ? \"border-[#00FF8B]/25 bg-[#00FF8B]/10 text-[#00FF8B]\"\n      : tone === \"red\"\n      ? \"border-red-500/25 bg-red-500/10 text-red-200\"\n      : \"border-white/10 bg-black/20 text-white/70\";\n  return <span className={cn(\"text-xs px-3 py-1 rounded-full border\", cls)}>{label}</span>;\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 2547, "column": 0}, "map": {"version":3,"sources":["file:///Users/ruangalvao/ProjetosVS/Projetos%20Pessoais/stud.ai-app/app-stud.ai/src/app/components/ProgressSection.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useMemo, useState } from \"react\";\nimport { loadMaterial, onMaterialUpdated } from \"@/lib/studyMaterialStore\";\nimport { makeProgressKey, loadProgress, onProgressUpdated, clearProgress } from \"@/lib/studyProgressStore\";\n\nfunction cn(...s: Array<string | false | null | undefined>) {\n  return s.filter(Boolean).join(\" \");\n}\nfunction pct(n: number) {\n  return Math.max(0, Math.min(100, Math.round(n)));\n}\nfunction uniq(arr: number[]) {\n  return Array.from(new Set(arr));\n}\n\nexport default function ProgressSection() {\n  const [topic, setTopic] = useState<string>(\"\");\n  const [totalCards, setTotalCards] = useState<number>(0);\n  const [progressKey, setProgressKey] = useState<string>(\"\");\n\n  const [knownIds, setKnownIds] = useState<number[]>([]);\n  const [reviewIds, setReviewIds] = useState<number[]>([]);\n  const [updatedAt, setUpdatedAt] = useState<string | null>(null);\n\n  useEffect(() => {\n    const refresh = () => {\n      const m = loadMaterial();\n      const count = m?.flashcards?.length ?? 0;\n\n      setTopic(m?.topic ?? \"\");\n      setTotalCards(count);\n\n      const key = makeProgressKey(m?.topic ?? \"deck\", count);\n      setProgressKey(key);\n\n      const p = loadProgress(key);\n      setKnownIds(p?.knownIds ?? []);\n      setReviewIds(p?.reviewIds ?? []);\n      setUpdatedAt(p?.updatedAt ?? null);\n    };\n\n    refresh();\n    const off1 = onMaterialUpdated(refresh);\n    const off2 = onProgressUpdated(refresh);\n    return () => {\n      off1?.();\n      off2?.();\n    };\n  }, []);\n\n  const known = useMemo(() => new Set(knownIds), [knownIds]);\n  const review = useMemo(() => new Set(reviewIds), [reviewIds]);\n\n  const doneCount = uniq([...knownIds, ...reviewIds]).length;\n  const donePct = totalCards ? pct((doneCount / totalCards) * 100) : 0;\n\n  const knownCount = known.size;\n  const reviewCount = review.size;\n  const remainingCount = Math.max(0, totalCards - doneCount);\n\n  if (!totalCards) {\n    return (\n      <section className=\"w-full max-w-5xl mx-auto mt-10 rounded-2xl border border-white/10 bg-white/5 p-8 text-center\">\n        <h2 className=\"text-2xl font-semibold\">Progresso</h2>\n        <p className=\"mt-2 opacity-70\">Gere um material (upload) para acompanhar seu progresso.</p>\n      </section>\n    );\n  }\n\n  return (\n    <section className=\"w-full max-w-5xl mx-auto mt-10\">\n      {/* Header premium */}\n      <div className=\"rounded-2xl border border-white/10 bg-white/5 p-6\">\n        <div className=\"flex flex-col md:flex-row md:items-start md:justify-between gap-4\">\n          <div>\n            <div className=\"text-xs opacity-70\">Progresso</div>\n            <h2 className=\"text-2xl font-semibold mt-1\">{topic || \"Seu deck\"}</h2>\n            <div className=\"mt-2 text-sm opacity-70\">\n              Acompanhe seu avan√ßo no mesmo padr√£o visual do Flashcards.\n            </div>\n          </div>\n\n          <div className=\"flex flex-wrap gap-2\">\n            <Chip tone=\"green\" label={`‚úÖ Conhecidos: ${knownCount}`} />\n            <Chip tone=\"red\" label={`‚ùå Revisar: ${reviewCount}`} />\n            <Chip tone=\"neutral\" label={`‚è≥ Restantes: ${remainingCount}`} />\n          </div>\n        </div>\n\n        {/* Progress bar */}\n        <div className=\"mt-5\">\n          <div className=\"flex items-center justify-between text-xs opacity-70\">\n            <span>Progresso geral</span>\n            <span>{donePct}%</span>\n          </div>\n          <div className=\"mt-2 h-2 w-full rounded-full bg-black/30 overflow-hidden border border-white/10\">\n            <div className=\"h-full rounded-full bg-[#00FF8B]/70\" style={{ width: `${donePct}%` }} />\n          </div>\n\n          <div className=\"mt-3 text-xs opacity-60\">\n            {updatedAt ? `√öltima atualiza√ß√£o: ${new Date(updatedAt).toLocaleString()}` : \"Ainda sem atualiza√ß√µes\"}\n          </div>\n        </div>\n\n        {/* Action row */}\n        <div className=\"mt-5 flex flex-col sm:flex-row items-center justify-between gap-3\">\n          <div className=\"text-sm opacity-70\">\n            Total de cards: <b className=\"opacity-90\">{totalCards}</b> ‚Ä¢ Conclu√≠dos:{\" \"}\n            <b className=\"opacity-90\">{doneCount}</b>\n          </div>\n\n          <button\n            onClick={() => {\n              if (!progressKey) return;\n              clearProgress(progressKey);\n            }}\n            className=\"rounded-2xl border border-white/10 bg-white/5 px-5 py-3 text-sm hover:bg-white/10\"\n          >\n            Limpar progresso deste deck\n          </button>\n        </div>\n      </div>\n\n      {/* Breakdown premium */}\n      <div className=\"mt-6 grid grid-cols-1 md:grid-cols-3 gap-4\">\n        <StatCard title=\"Conhecidos\" value={knownCount} subtitle=\"Voc√™ marcou como acertei\" tone=\"green\" />\n        <StatCard title=\"Revisar\" value={reviewCount} subtitle=\"Precisa refor√ßar\" tone=\"red\" />\n        <StatCard title=\"Restantes\" value={remainingCount} subtitle=\"Ainda n√£o avaliados\" tone=\"neutral\" />\n      </div>\n\n      {/* Dica */}\n      <div className=\"mt-6 rounded-2xl border border-white/10 bg-white/5 p-6\">\n        <div className=\"font-semibold\">Dica de estudo</div>\n        <p className=\"mt-2 opacity-70 leading-relaxed\">\n          Use sess√µes curtas (10‚Äì20 cards) e marque ‚ÄúRevisar‚Äù sem medo. O ideal √© voltar nesses cards no dia seguinte.\n        </p>\n      </div>\n    </section>\n  );\n}\n\nfunction Chip({ label, tone }: { label: string; tone: \"green\" | \"red\" | \"neutral\" }) {\n  const cls =\n    tone === \"green\"\n      ? \"border-[#00FF8B]/25 bg-[#00FF8B]/10 text-[#00FF8B]\"\n      : tone === \"red\"\n      ? \"border-red-500/25 bg-red-500/10 text-red-200\"\n      : \"border-white/10 bg-black/20 text-white/70\";\n  return <span className={cn(\"text-xs px-3 py-1 rounded-full border\", cls)}>{label}</span>;\n}\n\nfunction StatCard({\n  title,\n  value,\n  subtitle,\n  tone,\n}: {\n  title: string;\n  value: number;\n  subtitle: string;\n  tone: \"green\" | \"red\" | \"neutral\";\n}) {\n  const border =\n    tone === \"green\"\n      ? \"border-[#00FF8B]/20\"\n      : tone === \"red\"\n      ? \"border-red-500/20\"\n      : \"border-white/10\";\n\n  const bg =\n    tone === \"green\"\n      ? \"bg-[#00FF8B]/10\"\n      : tone === \"red\"\n      ? \"bg-red-500/10\"\n      : \"bg-black/20\";\n\n  const text =\n    tone === \"green\" ? \"text-[#00FF8B]\" : tone === \"red\" ? \"text-red-200\" : \"text-white/80\";\n\n  return (\n    <div className={cn(\"rounded-2xl border bg-white/5 p-6\", border)}>\n      <div className=\"text-xs opacity-70\">{title}</div>\n      <div className={cn(\"mt-2 text-3xl font-bold\", text)}>{value}</div>\n      <div className={cn(\"mt-3 rounded-xl border p-3 text-sm opacity-90\", border, bg)}>{subtitle}</div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 2956, "column": 0}, "map": {"version":3,"sources":["file:///Users/ruangalvao/ProjetosVS/Projetos%20Pessoais/stud.ai-app/app-stud.ai/src/app/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useState } from \"react\";\nimport Link from \"next/link\";\nimport { useRouter } from \"next/navigation\";\nimport {\n  Upload,\n  Sparkles,\n  BookOpen,\n  TrendingUp,\n  Trophy,\n  Users,\n  LogIn,\n  LogOut,\n  Shield,\n} from \"lucide-react\";\n\nimport UploadSection from \"./components/UploadSection\";\nimport FlashcardsSection from \"./components/FlashcardsSection\";\nimport SummarySection from \"./components/SummarySection\";\nimport ProgressSection from \"./components/ProgressSection\";\n\ntype Section = \"upload\" | \"flashcards\" | \"summary\" | \"progress\";\ntype User = { id: string; name: string | null; email: string; role: \"USER\" | \"ADMIN\" };\n\nexport default function Home() {\n  const router = useRouter();\n  const [activeSection, setActiveSection] = useState<Section>(\"upload\");\n  const [studyData, setStudyData] = useState<any>(null);\n\n  const [me, setMe] = useState<User | null>(null);\n  const [authLoading, setAuthLoading] = useState(true);\n  const [logoutLoading, setLogoutLoading] = useState(false);\n\n  async function loadMe() {\n    setAuthLoading(true);\n    try {\n      const res = await fetch(\"/api/auth/me\", { cache: \"no-store\" });\n      const json = await res.json();\n      setMe(json?.user || null);\n    } catch {\n      setMe(null);\n    } finally {\n      setAuthLoading(false);\n    }\n  }\n\n  useEffect(() => {\n    loadMe();\n  }, []);\n\n  async function logout() {\n    setLogoutLoading(true);\n    try {\n      await fetch(\"/api/auth/logout\", { method: \"POST\" });\n      setMe(null);\n      router.refresh();\n      // opcional: voltar pro upload\n      setActiveSection(\"upload\");\n    } finally {\n      setLogoutLoading(false);\n    }\n  }\n\n  return (\n    <div className=\"min-h-screen bg-[#0D0D0D]\">\n      {/* Header */}\n      <header className=\"border-b border-[#1A1A1A] backdrop-blur-sm bg-[#0D0D0D]/80 sticky top-0 z-50\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <div className=\"flex items-center justify-between h-16\">\n            <div className=\"flex items-center gap-2\">\n              <div className=\"w-8 h-8 rounded-lg bg-gradient-to-br from-[#00FF8B] to-[#007B5F] flex items-center justify-center\">\n                <Sparkles className=\"w-5 h-5 text-[#0D0D0D]\" />\n              </div>\n              <h1 className=\"text-xl sm:text-2xl font-bold bg-gradient-to-r from-[#00FF8B] to-[#007B5F] bg-clip-text text-transparent\">\n                Stud.ai\n              </h1>\n\n              {/* Badge ADMIN */}\n              {me?.role === \"ADMIN\" ? (\n                <span className=\"ml-2 hidden sm:inline-flex items-center gap-1 rounded-full px-3 py-1 text-xs font-semibold border border-[#00FF8B]/30 bg-[#00FF8B]/10 text-[#00FF8B]\">\n                  <Shield className=\"w-3.5 h-3.5\" />\n                  ADMIN\n                </span>\n              ) : null}\n            </div>\n\n            {/* Desktop Navigation */}\n            <nav className=\"hidden md:flex items-center gap-1\">\n              <NavButton\n                icon={Upload}\n                label=\"Upload\"\n                active={activeSection === \"upload\"}\n                onClick={() => setActiveSection(\"upload\")}\n              />\n              <NavButton\n                icon={BookOpen}\n                label=\"FlashCards\"\n                active={activeSection === \"flashcards\"}\n                onClick={() => setActiveSection(\"flashcards\")}\n              />\n              <NavButton\n                icon={Sparkles}\n                label=\"Resumos\"\n                active={activeSection === \"summary\"}\n                onClick={() => setActiveSection(\"summary\")}\n              />\n              <NavButton\n                icon={TrendingUp}\n                label=\"Progresso\"\n                active={activeSection === \"progress\"}\n                onClick={() => setActiveSection(\"progress\")}\n              />\n            </nav>\n\n            {/* Right side: N√≠vel + Auth */}\n            <div className=\"hidden sm:flex items-center gap-2\">\n              {/* User Badge */}\n              <div className=\"flex items-center gap-2 px-3 py-1.5 rounded-full bg-[#1A1A1A] border border-[#00FF8B]/20\">\n                <Trophy className=\"w-4 h-4 text-[#00FF8B]\" />\n                <span className=\"text-sm font-medium\">N√≠vel 5</span>\n              </div>\n\n              {/* Auth */}\n              {authLoading ? (\n                <div className=\"px-3 py-1.5 rounded-full border border-[#2A2A2A] text-xs text-gray-400\">\n                  Carregando‚Ä¶\n                </div>\n              ) : me ? (\n                <button\n                  onClick={logout}\n                  disabled={logoutLoading}\n                  className=\"inline-flex items-center gap-2 px-3 py-1.5 rounded-full border border-[#2A2A2A] text-gray-200 hover:bg-[#151515] disabled:opacity-60\"\n                >\n                  <LogOut className=\"w-4 h-4\" />\n                  {logoutLoading ? \"Saindo...\" : \"Sair\"}\n                </button>\n              ) : (\n                <Link\n                  href=\"/login\"\n                  className=\"inline-flex items-center gap-2 px-3 py-1.5 rounded-full bg-[#00FF8B] text-black font-semibold hover:opacity-90\"\n                >\n                  <LogIn className=\"w-4 h-4\" />\n                  Entrar\n                </Link>\n              )}\n            </div>\n          </div>\n\n          {/* Mobile Navigation */}\n          <div className=\"md:hidden flex items-center justify-between gap-2 pb-3\">\n            <div className=\"flex items-center gap-1 overflow-x-auto\">\n              <NavButton\n                icon={Upload}\n                label=\"Upload\"\n                active={activeSection === \"upload\"}\n                onClick={() => setActiveSection(\"upload\")}\n                mobile\n              />\n              <NavButton\n                icon={BookOpen}\n                label=\"Cards\"\n                active={activeSection === \"flashcards\"}\n                onClick={() => setActiveSection(\"flashcards\")}\n                mobile\n              />\n              <NavButton\n                icon={Sparkles}\n                label=\"Resumos\"\n                active={activeSection === \"summary\"}\n                onClick={() => setActiveSection(\"summary\")}\n                mobile\n              />\n              <NavButton\n                icon={TrendingUp}\n                label=\"Progresso\"\n                active={activeSection === \"progress\"}\n                onClick={() => setActiveSection(\"progress\")}\n                mobile\n              />\n            </div>\n\n            {/* Mobile Auth */}\n            <div className=\"flex items-center gap-2\">\n              {me?.role === \"ADMIN\" ? (\n                <span className=\"inline-flex items-center gap-1 rounded-full px-2 py-1 text-[11px] font-semibold border border-[#00FF8B]/30 bg-[#00FF8B]/10 text-[#00FF8B]\">\n                  <Shield className=\"w-3.5 h-3.5\" />\n                  ADMIN\n                </span>\n              ) : null}\n\n              {authLoading ? null : me ? (\n                <button\n                  onClick={logout}\n                  disabled={logoutLoading}\n                  className=\"inline-flex items-center gap-2 px-3 py-2 rounded-lg border border-[#2A2A2A] text-gray-200 hover:bg-[#151515] disabled:opacity-60 text-xs\"\n                >\n                  <LogOut className=\"w-4 h-4\" />\n                  Sair\n                </button>\n              ) : (\n                <Link\n                  href=\"/login\"\n                  className=\"inline-flex items-center gap-2 px-3 py-2 rounded-lg bg-[#00FF8B] text-black font-semibold hover:opacity-90 text-xs\"\n                >\n                  <LogIn className=\"w-4 h-4\" />\n                  Entrar\n                </Link>\n              )}\n            </div>\n          </div>\n        </div>\n      </header>\n\n      {/* Main Content */}\n      <main className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6 sm:py-8\">\n        {activeSection === \"upload\" && <UploadSection onDataProcessed={setStudyData} />}\n        {activeSection === \"flashcards\" && <FlashcardsSection data={studyData} />}\n        {activeSection === \"summary\" && <SummarySection data={studyData} />}\n        {activeSection === \"progress\" && <ProgressSection />}\n      </main>\n\n      {/* Footer */}\n      <footer className=\"border-t border-[#1A1A1A] mt-12 py-8\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <div className=\"flex flex-col sm:flex-row items-center justify-between gap-4\">\n            <div className=\"flex items-center gap-2 text-sm text-gray-400\">\n              <Users className=\"w-4 h-4 text-[#00FF8B]\" />\n              <span>+1.2k estudantes ativos hoje</span>\n            </div>\n            <div className=\"text-sm text-gray-500\">Feito com üíö para estudantes</div>\n          </div>\n        </div>\n      </footer>\n    </div>\n  );\n}\n\nfunction NavButton({\n  icon: Icon,\n  label,\n  active,\n  onClick,\n  mobile = false,\n}: {\n  icon: any;\n  label: string;\n  active: boolean;\n  onClick: () => void;\n  mobile?: boolean;\n}) {\n  return (\n    <button\n      onClick={onClick}\n      className={`\n        flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition-all duration-300\n        ${mobile ? \"text-xs whitespace-nowrap\" : \"text-sm\"}\n        ${\n          active\n            ? \"bg-[#00FF8B]/10 text-[#00FF8B] border border-[#00FF8B]/30\"\n            : \"text-gray-400 hover:text-white hover:bg-[#1A1A1A]\"\n        }\n      `}\n    >\n      <Icon className=\"w-4 h-4\" />\n      <span>{label}</span>\n    </button>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}