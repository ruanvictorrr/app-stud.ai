{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 29, "column": 0}, "map": {"version":3,"sources":["file:///Users/ruangalvao/ProjetosVS/Projetos%20Pessoais/stud.ai-app/app-stud.ai/src/app/reset-password/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useMemo, useState } from \"react\";\nimport Link from \"next/link\";\nimport { useSearchParams, useRouter } from \"next/navigation\";\nimport { toast } from \"sonner\";\nimport { Lock, ArrowLeft, CheckCircle2 } from \"lucide-react\";\n\nexport default function ResetPasswordPage() {\n  const router = useRouter();\n  const searchParams = useSearchParams();\n\n  const token = useMemo(() => {\n    return (searchParams.get(\"token\") || \"\").trim();\n  }, [searchParams]);\n\n  const [password, setPassword] = useState(\"\");\n  const [confirm, setConfirm] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n  const [done, setDone] = useState(false);\n\n  const tokenLooksOk = token.length >= 20; // token hex grande\n\n  useEffect(() => {\n    if (!token) {\n      toast.error(\"Token não encontrado. Abra o link enviado para você.\");\n    }\n  }, [token]);\n\n  function validate() {\n    if (!tokenLooksOk) return \"Token inválido ou ausente.\";\n    if (!password || password.length < 6) return \"A senha deve ter pelo menos 6 caracteres.\";\n    if (password !== confirm) return \"As senhas não conferem.\";\n    return null;\n  }\n\n  async function onSubmit(e: React.FormEvent) {\n    e.preventDefault();\n\n    const err = validate();\n    if (err) {\n      toast.error(err);\n      return;\n    }\n\n    setLoading(true);\n    try {\n      const res = await fetch(\"/api/auth/reset-password\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({ token, password }),\n      });\n\n      const json = await res.json().catch(() => ({}));\n\n      if (!res.ok || !json?.success) {\n        throw new Error(json?.error || json?.details || \"Falha ao redefinir senha.\");\n      }\n\n      setDone(true);\n      toast.success(\"Senha redefinida com sucesso!\");\n\n      // opcional: volta pro login automaticamente\n      setTimeout(() => router.push(\"/login\"), 1200);\n    } catch (e: any) {\n      toast.error(e?.message || \"Erro ao redefinir senha.\");\n    } finally {\n      setLoading(false);\n    }\n  }\n\n  return (\n    <main className=\"min-h-screen w-full flex items-center justify-center px-4\">\n      <div className=\"w-full max-w-md rounded-2xl border border-white/10 bg-[#121212] p-8 shadow-xl\">\n        <div className=\"mb-6 text-center\">\n          <div className=\"mx-auto w-10 h-10 rounded-xl bg-gradient-to-br from-[#00FF8B] to-[#007B5F] flex items-center justify-center\">\n            <Lock className=\"w-5 h-5 text-black\" />\n          </div>\n\n          <h1 className=\"mt-4 text-2xl font-semibold\">Redefinir senha</h1>\n\n          <p className=\"mt-2 text-sm text-zinc-400\">\n            Crie uma nova senha para sua conta.\n          </p>\n        </div>\n\n        {!tokenLooksOk ? (\n          <div className=\"rounded-xl border border-red-500/20 bg-[#0D0D0D] p-4\">\n            <p className=\"text-sm text-zinc-200\">\n              Token inválido ou ausente.\n            </p>\n            <p className=\"mt-2 text-xs text-zinc-400\">\n              Abra o link que foi gerado no terminal (ou recebido por email).\n            </p>\n\n            <Link\n              href=\"/forgot-password\"\n              className=\"mt-4 inline-flex w-full items-center justify-center rounded-lg bg-[#1A1A1A] border border-white/10 py-2 text-sm hover:bg-[#252525] transition\"\n            >\n              Solicitar novo link\n            </Link>\n          </div>\n        ) : done ? (\n          <div className=\"rounded-xl border border-[#00FF8B]/20 bg-[#0D0D0D] p-4 text-center\">\n            <div className=\"flex items-center justify-center gap-2 text-[#00FF8B]\">\n              <CheckCircle2 className=\"w-5 h-5\" />\n              <span className=\"font-medium\">Senha atualizada!</span>\n            </div>\n            <p className=\"mt-2 text-xs text-zinc-400\">\n              Redirecionando para o login...\n            </p>\n\n            <Link\n              href=\"/login\"\n              className=\"mt-4 inline-flex w-full items-center justify-center rounded-lg bg-[#00FF8B] text-black py-2 text-sm font-medium hover:opacity-90 transition\"\n            >\n              Ir para login\n            </Link>\n          </div>\n        ) : (\n          <form onSubmit={onSubmit} className=\"space-y-4\">\n            <div>\n              <label className=\"text-sm text-zinc-300\">Nova senha</label>\n              <input\n                type=\"password\"\n                value={password}\n                onChange={(e) => setPassword(e.target.value)}\n                placeholder=\"••••••••\"\n                className=\"mt-2 w-full h-11 rounded-lg bg-[#1A1A1A] border border-white/10 px-4 text-sm focus:outline-none focus:ring-2 focus:ring-[#00FF8B]\"\n              />\n            </div>\n\n            <div>\n              <label className=\"text-sm text-zinc-300\">Confirmar senha</label>\n              <input\n                type=\"password\"\n                value={confirm}\n                onChange={(e) => setConfirm(e.target.value)}\n                placeholder=\"••••••••\"\n                className=\"mt-2 w-full h-11 rounded-lg bg-[#1A1A1A] border border-white/10 px-4 text-sm focus:outline-none focus:ring-2 focus:ring-[#00FF8B]\"\n              />\n            </div>\n\n            <button\n              type=\"submit\"\n              disabled={loading}\n              className=\"w-full h-11 rounded-lg bg-[#00FF8B] text-black font-medium hover:opacity-90 transition disabled:opacity-60\"\n            >\n              {loading ? \"Salvando...\" : \"Redefinir senha\"}\n            </button>\n\n            <Link\n              href=\"/login\"\n              className=\"inline-flex w-full items-center justify-center gap-2 text-sm text-[#00FF8B] hover:underline\"\n            >\n              <ArrowLeft className=\"w-4 h-4\" />\n              Voltar para login\n            </Link>\n          </form>\n        )}\n      </div>\n    </main>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}