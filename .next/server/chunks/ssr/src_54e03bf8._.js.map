{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 5, "column": 0}, "map": {"version":3,"sources":["file:///Users/ruangalvao/ProjetosVS/Projetos%20Pessoais/stud.ai-app/app-stud.ai/src/app/components/UploadSection.tsx"],"sourcesContent":["\"use client\";\n\nimport { useMemo, useRef, useState } from \"react\";\n\ntype SummaryStyle = \"bullet\" | \"explained\";\ntype Difficulty = \"easy\" | \"medium\" | \"hard\";\n\ntype ApiOk = {\n  success: true;\n  data: any;\n  meta?: {\n    materialId?: string;\n    usage?: {\n      plan?: \"FREE\" | \"PRO\" | \"ADMIN\";\n      monthlyUsed?: number | null;\n      limit?: number | null;\n    };\n    options?: {\n      flashcardsCount?: number;\n      topicsCount?: number;\n      summaryStyle?: SummaryStyle;\n      flashcardDifficulty?: Difficulty;\n    };\n  };\n};\n\ntype ApiErr = {\n  success: false;\n  error?: string;\n  details?: string;\n  code?: string;\n  meta?: any;\n};\n\ntype Props = {\n  onDataProcessed?: (data: any) => void; // mant√©m compatibilidade\n};\n\nfunction goToSection(section: \"upload\" | \"flashcards\" | \"summary\" | \"progress\") {\n  // avisa para a Home trocar de aba\n  window.dispatchEvent(new CustomEvent(\"studai:navigate\", { detail: { section } }));\n}\n\nexport default function UploadSection({ onDataProcessed }: Props) {\n  const inputRef = useRef<HTMLInputElement | null>(null);\n\n  const [isUploading, setIsUploading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n\n  // op√ß√µes\n  const [summaryStyle, setSummaryStyle] = useState<SummaryStyle>(\"explained\");\n  const [difficulty, setDifficulty] = useState<Difficulty>(\"medium\");\n  const [flashcardsCount, setFlashcardsCount] = useState<number>(10);\n\n  // sucesso + navega√ß√£o\n  const [success, setSuccess] = useState(false);\n  const [lastMaterialId, setLastMaterialId] = useState<string | null>(null);\n  const [lastFilename, setLastFilename] = useState<string | null>(null);\n\n  const flashcardsHint = useMemo(() => {\n    if (difficulty === \"easy\") return \"F√°cil (conceitos b√°sicos)\";\n    if (difficulty === \"hard\") return \"Dif√≠cil (aplica√ß√£o e pegadinhas)\";\n    return \"M√©dio (conceitos e rela√ß√µes)\";\n  }, [difficulty]);\n\n  function onPickFile() {\n    inputRef.current?.click();\n  }\n\n  async function onFileChange(e: React.ChangeEvent<HTMLInputElement>) {\n    const file = e.target.files?.[0];\n    if (!file) return;\n    await handleUpload(file);\n    e.target.value = \"\";\n  }\n\n  async function onDrop(e: React.DragEvent<HTMLDivElement>) {\n    e.preventDefault();\n    const file = e.dataTransfer.files?.[0];\n    if (!file) return;\n    await handleUpload(file);\n  }\n\n  function onDragOver(e: React.DragEvent<HTMLDivElement>) {\n    e.preventDefault();\n  }\n\n  async function handleUpload(file: File) {\n    setError(null);\n    setSuccess(false);\n    setIsUploading(true);\n    setLastFilename(file.name);\n\n    try {\n      const formData = new FormData();\n      formData.append(\"file\", file);\n\n      // manda op√ß√µes para a API\n      formData.append(\"summaryStyle\", summaryStyle);\n      formData.append(\"flashcardDifficulty\", difficulty);\n      formData.append(\"flashcardsCount\", String(flashcardsCount));\n      formData.append(\"topicsCount\", \"4\");\n\n      const response = await fetch(\"/api/process-study-material\", {\n        method: \"POST\",\n        body: formData,\n      });\n\n      const json = (await response.json()) as ApiOk | ApiErr;\n\n      if (!response.ok || !(json as any)?.success) {\n        const j = json as ApiErr;\n\n        if (response.status === 402 && j.code === \"LIMIT_REACHED\") {\n          setError(\"Voc√™ atingiu o limite mensal do plano gr√°tis. Assine para continuar.\");\n          return;\n        }\n\n        throw new Error(j.details || j.error || \"Falha ao processar arquivo\");\n      }\n\n      const ok = json as ApiOk;\n\n      // salva no state do app\n      onDataProcessed?.(ok.data);\n\n      // persist√™ncia local\n      const materialId = ok.meta?.materialId || null;\n      setLastMaterialId(materialId);\n      setSuccess(true);\n\n      try {\n        localStorage.setItem(\"studai:lastMaterialId:v1\", materialId || \"\");\n        localStorage.setItem(\"studai:lastMaterialData:v1\", JSON.stringify(ok.data));\n        localStorage.setItem(\"studai:lastMaterialFilename:v1\", file.name);\n      } catch {\n        // ignore\n      }\n    } catch (e: any) {\n      setError(e?.message || \"Erro inesperado\");\n    } finally {\n      setIsUploading(false);\n    }\n  }\n\n  return (\n    <section className=\"w-full\">\n      {/* op√ß√µes */}\n      <div className=\"mb-6 grid grid-cols-1 md:grid-cols-3 gap-4\">\n        <div className=\"rounded-2xl border border-[#1A1A1A] bg-[#0D0D0D] p-4\">\n          <div className=\"text-sm font-semibold text-white mb-2\">Tipo de resumo</div>\n\n          <div className=\"flex gap-2\">\n            <button\n              type=\"button\"\n              onClick={() => setSummaryStyle(\"bullet\")}\n              className={`px-3 py-2 rounded-xl border text-sm transition\n              ${\n                summaryStyle === \"bullet\"\n                  ? \"border-[#00FF8B]/40 bg-[#00FF8B]/10 text-[#00FF8B]\"\n                  : \"border-[#1A1A1A] text-gray-300 hover:bg-[#1A1A1A]\"\n              }`}\n            >\n              Bullet\n            </button>\n\n            <button\n              type=\"button\"\n              onClick={() => setSummaryStyle(\"explained\")}\n              className={`px-3 py-2 rounded-xl border text-sm transition\n              ${\n                summaryStyle === \"explained\"\n                  ? \"border-[#00FF8B]/40 bg-[#00FF8B]/10 text-[#00FF8B]\"\n                  : \"border-[#1A1A1A] text-gray-300 hover:bg-[#1A1A1A]\"\n              }`}\n            >\n              Explicado\n            </button>\n          </div>\n\n          <div className=\"mt-2 text-xs text-gray-400\">\n            {summaryStyle === \"bullet\"\n              ? \"Resumo objetivo em t√≥picos.\"\n              : \"Resumo detalhado em texto explicado.\"}\n          </div>\n        </div>\n\n        <div className=\"rounded-2xl border border-[#1A1A1A] bg-[#0D0D0D] p-4\">\n          <div className=\"text-sm font-semibold text-white mb-2\">Dificuldade dos flashcards</div>\n\n          <div className=\"flex gap-2 flex-wrap\">\n            {([\"easy\", \"medium\", \"hard\"] as Difficulty[]).map((d) => (\n              <button\n                key={d}\n                type=\"button\"\n                onClick={() => setDifficulty(d)}\n                className={`px-3 py-2 rounded-xl border text-sm transition\n                ${\n                  difficulty === d\n                    ? \"border-[#00FF8B]/40 bg-[#00FF8B]/10 text-[#00FF8B]\"\n                    : \"border-[#1A1A1A] text-gray-300 hover:bg-[#1A1A1A]\"\n                }`}\n              >\n                {d === \"easy\" ? \"F√°cil\" : d === \"medium\" ? \"M√©dio\" : \"Dif√≠cil\"}\n              </button>\n            ))}\n          </div>\n\n          <div className=\"mt-2 text-xs text-gray-400\">{flashcardsHint}</div>\n        </div>\n\n        <div className=\"rounded-2xl border border-[#1A1A1A] bg-[#0D0D0D] p-4\">\n          <div className=\"text-sm font-semibold text-white mb-2\">Quantidade de flashcards</div>\n\n          <div className=\"flex items-center gap-3\">\n            <input\n              type=\"range\"\n              min={5}\n              max={30}\n              value={flashcardsCount}\n              onChange={(e) => setFlashcardsCount(Number(e.target.value))}\n              className=\"w-full accent-[#00FF8B]\"\n            />\n            <div className=\"w-10 text-right text-sm text-gray-200\">{flashcardsCount}</div>\n          </div>\n\n          <div className=\"mt-2 text-xs text-gray-400\">Entre 5 e 30</div>\n        </div>\n      </div>\n\n      {/* upload */}\n      <input\n        ref={inputRef}\n        type=\"file\"\n        className=\"hidden\"\n        onChange={onFileChange}\n        accept=\"image/*,application/pdf,text/plain\"\n      />\n\n      <div\n        onDrop={onDrop}\n        onDragOver={onDragOver}\n        className=\"w-full rounded-2xl border border-dashed border-[#00FF8B]/25 bg-[#0D0D0D] p-10 text-center\"\n      >\n        <div className=\"text-lg font-semibold text-white\">Arraste e solte seu arquivo aqui</div>\n        <div className=\"mt-2 text-sm text-gray-400\">ou clique para selecionar</div>\n\n        <button\n          type=\"button\"\n          onClick={onPickFile}\n          disabled={isUploading}\n          className=\"mt-6 inline-flex items-center justify-center rounded-xl border border-[#1A1A1A] px-5 py-2 text-sm text-gray-200 hover:bg-[#1A1A1A] disabled:opacity-60\"\n        >\n          {isUploading ? \"Processando...\" : \"Selecionar arquivo\"}\n        </button>\n\n        {lastFilename ? (\n          <div className=\"mt-4 text-xs text-gray-500\">Arquivo: {lastFilename}</div>\n        ) : null}\n\n        {error ? <div className=\"mt-4 text-sm text-red-400\">{error}</div> : null}\n\n        {success ? (\n          <div className=\"mt-6 w-full max-w-2xl mx-auto rounded-2xl border border-[#00FF8B]/25 bg-[#00FF8B]/10 p-5 text-left\">\n            <div className=\"flex items-start gap-3\">\n              <div className=\"mt-0.5 flex h-8 w-8 items-center justify-center rounded-xl bg-[#00FF8B]/15 border border-[#00FF8B]/25\">\n                <span className=\"text-[#00FF8B] text-lg leading-none\">‚úÖ</span>\n              </div>\n\n              <div className=\"flex-1 min-w-0\">\n                <div className=\"text-base font-semibold text-[#00FF8B]\">Conclu√≠do!</div>\n                <div className=\"mt-1 text-sm text-gray-200\">\n                  Material gerado com sucesso. Voc√™ pode ir direto para Flashcards ou Resumo.\n                </div>\n\n                <div className=\"mt-4 flex flex-col sm:flex-row gap-2\">\n                  <button\n                    type=\"button\"\n                    onClick={() => goToSection(\"flashcards\")}\n                    className=\"w-full sm:w-auto rounded-xl bg-[#00FF8B] text-[#0D0D0D] px-4 py-2 text-sm font-semibold hover:opacity-90\"\n                  >\n                    Ir para Flashcards\n                  </button>\n\n                  <button\n                    type=\"button\"\n                    onClick={() => goToSection(\"summary\")}\n                    className=\"w-full sm:w-auto rounded-xl border border-[#00FF8B]/35 bg-transparent text-[#00FF8B] px-4 py-2 text-sm font-semibold hover:bg-[#00FF8B]/10\"\n                  >\n                    Ir para Resumo\n                  </button>\n                </div>\n\n                {lastMaterialId ? (\n                  <div className=\"mt-3 text-[11px] text-gray-400 break-all\">\n                    materialId: <span className=\"font-mono\">{lastMaterialId}</span>\n                  </div>\n                ) : null}\n              </div>\n            </div>\n          </div>\n        ) : null}\n      </div>\n    </section>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 455, "column": 0}, "map": {"version":3,"sources":["file:///Users/ruangalvao/ProjetosVS/Projetos%20Pessoais/stud.ai-app/app-stud.ai/src/lib/studyProgressStore.ts"],"sourcesContent":["\"use client\";\n\n/**\n * Store simples de progresso (localStorage) + \"events\" para atualizar UI.\n * Compat√≠vel com:\n * - makeProgressKey\n * - makeProgressKeyForDoc\n * - loadProgress\n * - saveProgress\n * - clearProgress\n * - onProgressUpdated\n */\n\ntype ProgressItem = {\n  knownIds: number[];   // ids marcados como \"sei\"\n  reviewIds: number[];  // ids marcados como \"n√£o sei\"\n  currentIndex: number; // √≠ndice atual no deck\n  updatedAt: number;    // timestamp\n};\n\nconst LS_PREFIX = \"studai:progress:v1:\";\n\nfunction safeParse<T>(s: string | null): T | null {\n  if (!s) return null;\n  try {\n    return JSON.parse(s) as T;\n  } catch {\n    return null;\n  }\n}\n\nfunction emit(key: string) {\n  // evento custom local + evento nativo storage\n  window.dispatchEvent(new CustomEvent(\"studai:progress-updated\", { detail: { key } }));\n}\n\nexport function makeProgressKey(userId: string, materialId: string) {\n  return `${LS_PREFIX}${userId}:${materialId}`;\n}\n\n/**\n * Caso seu app trate material como \"docId\" (ou slug/uuid),\n * esse helper mant√©m compatibilidade com imports antigos.\n */\nexport function makeProgressKeyForDoc(userId: string, docId: string) {\n  return `${LS_PREFIX}${userId}:doc:${docId}`;\n}\n\nexport function loadProgress(key: string): ProgressItem | null {\n  if (typeof window === \"undefined\") return null;\n  return safeParse<ProgressItem>(localStorage.getItem(key));\n}\n\nexport function saveProgress(key: string, progress: ProgressItem) {\n  if (typeof window === \"undefined\") return;\n  localStorage.setItem(\n    key,\n    JSON.stringify({\n      knownIds: Array.from(new Set(progress.knownIds || [])),\n      reviewIds: Array.from(new Set(progress.reviewIds || [])),\n      currentIndex: Number.isFinite(progress.currentIndex) ? progress.currentIndex : 0,\n      updatedAt: Date.now(),\n    } satisfies ProgressItem)\n  );\n  emit(key);\n}\n\nexport function clearProgress(key: string) {\n  if (typeof window === \"undefined\") return;\n  localStorage.removeItem(key);\n  emit(key);\n}\n\n/**\n * Listener para componentes reagirem a mudan√ßas de progresso.\n * Retorna um \"unsubscribe\".\n */\nexport function onProgressUpdated(cb: (key: string) => void) {\n  if (typeof window === \"undefined\") return () => {};\n\n  const handler = (ev: Event) => {\n    const anyEv = ev as any;\n    const key = anyEv?.detail?.key;\n    if (typeof key === \"string\") cb(key);\n  };\n\n  window.addEventListener(\"studai:progress-updated\", handler as any);\n\n  // tamb√©m escuta mudan√ßas do localStorage (outra aba)\n  const storageHandler = (ev: StorageEvent) => {\n    if (!ev.key) return;\n    if (ev.key.startsWith(LS_PREFIX)) cb(ev.key);\n  };\n  window.addEventListener(\"storage\", storageHandler);\n\n  return () => {\n    window.removeEventListener(\"studai:progress-updated\", handler as any);\n    window.removeEventListener(\"storage\", storageHandler);\n  };\n}\n"],"names":[],"mappings":";;;;;;;;AAAA;AAoBA,MAAM,YAAY;AAElB,SAAS,UAAa,CAAgB;IACpC,IAAI,CAAC,GAAG,OAAO;IACf,IAAI;QACF,OAAO,KAAK,KAAK,CAAC;IACpB,EAAE,OAAM;QACN,OAAO;IACT;AACF;AAEA,SAAS,KAAK,GAAW;IACvB,8CAA8C;IAC9C,OAAO,aAAa,CAAC,IAAI,YAAY,2BAA2B;QAAE,QAAQ;YAAE;QAAI;IAAE;AACpF;AAEO,SAAS,gBAAgB,MAAc,EAAE,UAAkB;IAChE,OAAO,GAAG,YAAY,OAAO,CAAC,EAAE,YAAY;AAC9C;AAMO,SAAS,sBAAsB,MAAc,EAAE,KAAa;IACjE,OAAO,GAAG,YAAY,OAAO,KAAK,EAAE,OAAO;AAC7C;AAEO,SAAS,aAAa,GAAW;IACtC,wCAAmC,OAAO;;;AAE5C;AAEO,SAAS,aAAa,GAAW,EAAE,QAAsB;IAC9D,wCAAmC;;;AAWrC;AAEO,SAAS,cAAc,GAAW;IACvC,wCAAmC;;;AAGrC;AAMO,SAAS,kBAAkB,EAAyB;IACzD,wCAAmC,OAAO,KAAO;;;IAEjD,MAAM;IAQN,qDAAqD;IACrD,MAAM;AAUR","debugId":null}},
    {"offset": {"line": 514, "column": 0}, "map": {"version":3,"sources":["file:///Users/ruangalvao/ProjetosVS/Projetos%20Pessoais/stud.ai-app/app-stud.ai/src/app/components/FlashcardsSection.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useMemo, useState } from \"react\";\nimport { CheckCircle2, XCircle, ChevronLeft, ChevronRight } from \"lucide-react\";\nimport {\n  loadProgress,\n  saveProgress,\n  makeProgressKey,\n  onProgressUpdated,\n} from \"@/lib/studyProgressStore\";\n\ntype Props = {\n  data?: any | null;\n};\n\ntype Material = {\n  materialId?: string;\n  topic?: string;\n  flashcards?: Array<{ id: number; question: string; answer: string }>;\n  summary?: any;\n};\n\nfunction cn(...s: Array<string | false | null | undefined>) {\n  return s.filter(Boolean).join(\" \");\n}\n\nasync function fetchLatestMaterial(): Promise<Material | null> {\n  const res = await fetch(\"/api/materials/latest\", { method: \"GET\" });\n  const json = await res.json();\n\n  if (!res.ok || !json?.success) return null;\n  const latest = json?.data;\n  if (!latest) return null;\n\n  // latest.data √© o Json com topic/flashcards/summary\n  const payload = latest?.data && typeof latest.data === \"object\" ? latest.data : null;\n  if (!payload) return null;\n\n  const material: Material = {\n    ...payload,\n    materialId: latest.id,\n    topic: payload.topic || latest.topic || \"Material\",\n  };\n\n  // salva espelho no localStorage (ajuda quando navegar)\n  try {\n    localStorage.setItem(\"studai:lastMaterialData:v1\", JSON.stringify(material));\n  } catch {}\n\n  return material;\n}\n\nasync function fetchMeId(): Promise<string | null> {\n  try {\n    const res = await fetch(\"/api/auth/me\");\n    const json = await res.json();\n    if (!res.ok || !json?.success) return null;\n    return json?.data?.id || null;\n  } catch {\n    return null;\n  }\n}\n\nexport default function FlashcardsSection({ data }: Props) {\n  const [material, setMaterial] = useState<Material | null>(data || null);\n  const [loading, setLoading] = useState<boolean>(!data);\n  const [error, setError] = useState<string | null>(null);\n\n  const [userId, setUserId] = useState<string | null>(null);\n\n  const [index, setIndex] = useState<number>(0);\n  const [flipped, setFlipped] = useState<boolean>(false);\n  const [knownIds, setKnownIds] = useState<Set<number>>(new Set());\n  const [reviewIds, setReviewIds] = useState<Set<number>>(new Set());\n\n  // 1) pega userId (pra chave do progresso)\n  useEffect(() => {\n    fetchMeId().then(setUserId);\n  }, []);\n\n  // 2) se n√£o veio data por prop, busca do DB\n  useEffect(() => {\n    let alive = true;\n\n    async function load() {\n      if (data) {\n        setMaterial(data);\n        setLoading(false);\n        return;\n      }\n\n      setLoading(true);\n      const latest = await fetchLatestMaterial();\n      if (!alive) return;\n\n      if (!latest) {\n        setError(\"Nenhum material encontrado. Fa√ßa um upload primeiro.\");\n        setMaterial(null);\n      } else {\n        setError(null);\n        setMaterial(latest);\n      }\n\n      setLoading(false);\n    }\n\n    load();\n    return () => {\n      alive = false;\n    };\n  }, [data]);\n\n  const cards = useMemo(() => {\n    const list = material?.flashcards || [];\n    return Array.isArray(list) ? list : [];\n  }, [material]);\n\n  const materialId = material?.materialId || \"latest\";\n  const progressKey = useMemo(() => {\n    // se n√£o tiver userId ainda, usa \"me\" pra n√£o quebrar\n    return makeProgressKey(userId || \"me\", materialId);\n  }, [userId, materialId]);\n\n  // 3) carrega progresso quando tiver cards\n  useEffect(() => {\n    if (!cards.length) return;\n\n    const p = loadProgress(progressKey);\n    if (p) {\n      setIndex(Math.min(p.currentIndex || 0, Math.max(0, cards.length - 1)));\n      setKnownIds(new Set(p.knownIds || []));\n      setReviewIds(new Set(p.reviewIds || []));\n    } else {\n      setIndex(0);\n      setKnownIds(new Set());\n      setReviewIds(new Set());\n    }\n\n    // escuta atualiza√ß√µes do progresso\n    const unsub = onProgressUpdated((key) => {\n      if (key !== progressKey) return;\n      const next = loadProgress(progressKey);\n      if (!next) return;\n\n      setIndex(Math.min(next.currentIndex || 0, Math.max(0, cards.length - 1)));\n      setKnownIds(new Set(next.knownIds || []));\n      setReviewIds(new Set(next.reviewIds || []));\n    });\n\n    return () => unsub();\n  }, [cards.length, progressKey]);\n\n  function persist(nextIndex: number, nextKnown: Set<number>, nextReview: Set<number>) {\n    saveProgress(progressKey, {\n      currentIndex: nextIndex,\n      knownIds: Array.from(nextKnown),\n      reviewIds: Array.from(nextReview),\n      updatedAt: Date.now(),\n    });\n  }\n\n  function prev() {\n    const next = Math.max(0, index - 1);\n    setIndex(next);\n    setFlipped(false);\n    persist(next, knownIds, reviewIds);\n  }\n\n  function next() {\n    const next = Math.min(cards.length - 1, index + 1);\n    setIndex(next);\n    setFlipped(false);\n    persist(next, knownIds, reviewIds);\n  }\n\n  function markKnown() {\n    const id = cards[index]?.id;\n    if (!id) return;\n\n    const k = new Set(knownIds);\n    const r = new Set(reviewIds);\n    k.add(id);\n    r.delete(id);\n\n    setKnownIds(k);\n    setReviewIds(r);\n\n    const nextIndex = Math.min(cards.length - 1, index + 1);\n    setIndex(nextIndex);\n    setFlipped(false);\n\n    persist(nextIndex, k, r);\n  }\n\n  function markReview() {\n    const id = cards[index]?.id;\n    if (!id) return;\n\n    const k = new Set(knownIds);\n    const r = new Set(reviewIds);\n    r.add(id);\n    k.delete(id);\n\n    setKnownIds(k);\n    setReviewIds(r);\n\n    const nextIndex = Math.min(cards.length - 1, index + 1);\n    setIndex(nextIndex);\n    setFlipped(false);\n\n    persist(nextIndex, k, r);\n  }\n\n  const total = cards.length;\n  const done = knownIds.size + reviewIds.size;\n  const pct = total > 0 ? Math.round((done / total) * 100) : 0;\n\n  if (loading) {\n    return (\n      <section className=\"w-full\">\n        <div className=\"rounded-2xl border border-[#1A1A1A] bg-[#0D0D0D] p-6 text-gray-300\">\n          Carregando flashcards...\n        </div>\n      </section>\n    );\n  }\n\n  if (error) {\n    return (\n      <section className=\"w-full\">\n        <div className=\"rounded-2xl border border-[#1A1A1A] bg-[#0D0D0D] p-6 text-red-300\">\n          {error}\n        </div>\n      </section>\n    );\n  }\n\n  if (!total) {\n    return (\n      <section className=\"w-full\">\n        <div className=\"rounded-2xl border border-[#1A1A1A] bg-[#0D0D0D] p-6 text-gray-300\">\n          Nenhum flashcard encontrado neste material.\n        </div>\n      </section>\n    );\n  }\n\n  const card = cards[index];\n\n  return (\n    <section className=\"w-full\">\n      <div className=\"mb-5 flex flex-col gap-3\">\n        <div className=\"flex items-end justify-between gap-3\">\n          <div>\n            <div className=\"text-2xl font-bold text-white\">FlashCards</div>\n            <div className=\"text-sm text-gray-400\">\n              {material?.topic || \"Material\"} ‚Ä¢ {done}/{total} estudados\n            </div>\n          </div>\n\n          <div className=\"text-sm text-gray-400\">{pct}%</div>\n        </div>\n\n        {/* Barra de progresso */}\n        <div className=\"h-2 w-full rounded-full bg-[#1A1A1A] overflow-hidden\">\n          <div\n            className=\"h-full bg-[#00FF8B]\"\n            style={{ width: `${pct}%` }}\n          />\n        </div>\n\n        {/* Contadores */}\n        <div className=\"grid grid-cols-2 gap-3\">\n          <div className=\"rounded-2xl border border-[#1A1A1A] bg-[#0D0D0D] p-4\">\n            <div className=\"text-xs text-gray-400\">Conhecidos</div>\n            <div className=\"text-2xl font-semibold text-white\">{knownIds.size}</div>\n          </div>\n          <div className=\"rounded-2xl border border-[#1A1A1A] bg-[#0D0D0D] p-4\">\n            <div className=\"text-xs text-gray-400\">Para revisar</div>\n            <div className=\"text-2xl font-semibold text-white\">{reviewIds.size}</div>\n          </div>\n        </div>\n      </div>\n\n      {/* Card (flip) */}\n      <div className=\"rounded-2xl border border-[#1A1A1A] bg-[#0D0D0D] p-5\">\n        <div className=\"mb-4 flex items-center justify-between text-sm text-gray-400\">\n          <span>\n            Pergunta {index + 1}/{total}\n          </span>\n          <button\n            onClick={() => setFlipped((v) => !v)}\n            className=\"rounded-lg border border-[#1A1A1A] px-3 py-1 hover:bg-[#1A1A1A]\"\n          >\n            {flipped ? \"Ver pergunta\" : \"Ver resposta\"}\n          </button>\n        </div>\n\n        <div\n          className=\"relative w-full\"\n          style={{ perspective: 1200 }}\n        >\n          <button\n            type=\"button\"\n            onClick={() => setFlipped((v) => !v)}\n            className=\"w-full text-left\"\n            aria-label=\"Virar flashcard\"\n          >\n            <div\n              className={cn(\n                \"relative w-full rounded-2xl border border-[#00FF8B]/25 bg-[#0D0D0D] p-6 transition-transform duration-500\",\n                \"shadow-[0_0_0_1px_rgba(0,255,139,0.08)]\",\n              )}\n              style={{\n                transformStyle: \"preserve-3d\",\n                transform: flipped ? \"rotateY(180deg)\" : \"rotateY(0deg)\",\n                minHeight: 220,\n              }}\n            >\n              {/* Frente */}\n              <div\n                className=\"absolute inset-0 p-6\"\n                style={{ backfaceVisibility: \"hidden\" }}\n              >\n                <div className=\"text-xs text-[#00FF8B] font-semibold\">PERGUNTA</div>\n                <div className=\"mt-3 text-lg sm:text-xl font-semibold text-white\">\n                  {card?.question}\n                </div>\n                <div className=\"mt-6 text-sm text-gray-400\">\n                  Clique no card para virar.\n                </div>\n              </div>\n\n              {/* Verso */}\n              <div\n                className=\"absolute inset-0 p-6\"\n                style={{\n                  backfaceVisibility: \"hidden\",\n                  transform: \"rotateY(180deg)\",\n                }}\n              >\n                <div className=\"text-xs text-[#00FF8B] font-semibold\">RESPOSTA</div>\n                <div className=\"mt-3 text-base sm:text-lg text-gray-100 whitespace-pre-wrap\">\n                  {card?.answer}\n                </div>\n                <div className=\"mt-6 text-sm text-gray-400\">\n                  Clique no card para voltar.\n                </div>\n              </div>\n            </div>\n          </button>\n        </div>\n\n        {/* A√ß√µes */}\n        <div className=\"mt-5 flex flex-col sm:flex-row items-center justify-between gap-3\">\n          <button\n            onClick={prev}\n            disabled={index === 0}\n            className=\"w-full sm:w-auto inline-flex items-center justify-center gap-2 rounded-xl border border-[#1A1A1A] px-4 py-2 text-sm text-gray-300 disabled:opacity-40 hover:bg-[#1A1A1A]\"\n          >\n            <ChevronLeft className=\"w-4 h-4\" />\n            Anterior\n          </button>\n\n          <div className=\"flex w-full sm:w-auto gap-2\">\n            <button\n              onClick={markReview}\n              className=\"flex-1 sm:flex-none inline-flex items-center justify-center gap-2 rounded-xl bg-red-600/15 border border-red-500/30 px-4 py-2 text-sm font-semibold text-red-200 hover:bg-red-600/20\"\n            >\n              <XCircle className=\"w-4 h-4\" />\n              N√£o sei\n            </button>\n\n            <button\n              onClick={markKnown}\n              className=\"flex-1 sm:flex-none inline-flex items-center justify-center gap-2 rounded-xl bg-[#00FF8B] px-4 py-2 text-sm font-semibold text-[#0D0D0D] hover:opacity-90\"\n            >\n              <CheckCircle2 className=\"w-4 h-4\" />\n              Sei\n            </button>\n          </div>\n\n          <button\n            onClick={next}\n            disabled={index >= total - 1}\n            className=\"w-full sm:w-auto inline-flex items-center justify-center gap-2 rounded-xl border border-[#1A1A1A] px-4 py-2 text-sm text-gray-300 disabled:opacity-40 hover:bg-[#1A1A1A]\"\n          >\n            Pr√≥ximo\n            <ChevronRight className=\"w-4 h-4\" />\n          </button>\n        </div>\n      </div>\n    </section>\n  );\n}\n"],"names":[],"mappings":";;;;AAEA;AACA;AAAA;AAAA;AAAA;AACA;AAJA;;;;;AAsBA,SAAS,GAAG,GAAG,CAA2C;IACxD,OAAO,EAAE,MAAM,CAAC,SAAS,IAAI,CAAC;AAChC;AAEA,eAAe;IACb,MAAM,MAAM,MAAM,MAAM,yBAAyB;QAAE,QAAQ;IAAM;IACjE,MAAM,OAAO,MAAM,IAAI,IAAI;IAE3B,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,MAAM,SAAS,OAAO;IACtC,MAAM,SAAS,MAAM;IACrB,IAAI,CAAC,QAAQ,OAAO;IAEpB,oDAAoD;IACpD,MAAM,UAAU,QAAQ,QAAQ,OAAO,OAAO,IAAI,KAAK,WAAW,OAAO,IAAI,GAAG;IAChF,IAAI,CAAC,SAAS,OAAO;IAErB,MAAM,WAAqB;QACzB,GAAG,OAAO;QACV,YAAY,OAAO,EAAE;QACrB,OAAO,QAAQ,KAAK,IAAI,OAAO,KAAK,IAAI;IAC1C;IAEA,uDAAuD;IACvD,IAAI;QACF,aAAa,OAAO,CAAC,8BAA8B,KAAK,SAAS,CAAC;IACpE,EAAE,OAAM,CAAC;IAET,OAAO;AACT;AAEA,eAAe;IACb,IAAI;QACF,MAAM,MAAM,MAAM,MAAM;QACxB,MAAM,OAAO,MAAM,IAAI,IAAI;QAC3B,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,MAAM,SAAS,OAAO;QACtC,OAAO,MAAM,MAAM,MAAM;IAC3B,EAAE,OAAM;QACN,OAAO;IACT;AACF;AAEe,SAAS,kBAAkB,EAAE,IAAI,EAAS;IACvD,MAAM,CAAC,UAAU,YAAY,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAmB,QAAQ;IAClE,MAAM,CAAC,SAAS,WAAW,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAW,CAAC;IACjD,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAiB;IAElD,MAAM,CAAC,QAAQ,UAAU,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAiB;IAEpD,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAU;IAC3C,MAAM,CAAC,SAAS,WAAW,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAW;IAChD,MAAM,CAAC,UAAU,YAAY,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAe,IAAI;IAC1D,MAAM,CAAC,WAAW,aAAa,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAe,IAAI;IAE5D,0CAA0C;IAC1C,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,YAAY,IAAI,CAAC;IACnB,GAAG,EAAE;IAEL,4CAA4C;IAC5C,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,IAAI,QAAQ;QAEZ,eAAe;YACb,IAAI,MAAM;gBACR,YAAY;gBACZ,WAAW;gBACX;YACF;YAEA,WAAW;YACX,MAAM,SAAS,MAAM;YACrB,IAAI,CAAC,OAAO;YAEZ,IAAI,CAAC,QAAQ;gBACX,SAAS;gBACT,YAAY;YACd,OAAO;gBACL,SAAS;gBACT,YAAY;YACd;YAEA,WAAW;QACb;QAEA;QACA,OAAO;YACL,QAAQ;QACV;IACF,GAAG;QAAC;KAAK;IAET,MAAM,QAAQ,CAAA,GAAA,qMAAA,CAAA,UAAO,AAAD,EAAE;QACpB,MAAM,OAAO,UAAU,cAAc,EAAE;QACvC,OAAO,MAAM,OAAO,CAAC,QAAQ,OAAO,EAAE;IACxC,GAAG;QAAC;KAAS;IAEb,MAAM,aAAa,UAAU,cAAc;IAC3C,MAAM,cAAc,CAAA,GAAA,qMAAA,CAAA,UAAO,AAAD,EAAE;QAC1B,sDAAsD;QACtD,OAAO,CAAA,GAAA,gIAAA,CAAA,kBAAe,AAAD,EAAE,UAAU,MAAM;IACzC,GAAG;QAAC;QAAQ;KAAW;IAEvB,0CAA0C;IAC1C,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,IAAI,CAAC,MAAM,MAAM,EAAE;QAEnB,MAAM,IAAI,CAAA,GAAA,gIAAA,CAAA,eAAY,AAAD,EAAE;QACvB,IAAI,GAAG;YACL,SAAS,KAAK,GAAG,CAAC,EAAE,YAAY,IAAI,GAAG,KAAK,GAAG,CAAC,GAAG,MAAM,MAAM,GAAG;YAClE,YAAY,IAAI,IAAI,EAAE,QAAQ,IAAI,EAAE;YACpC,aAAa,IAAI,IAAI,EAAE,SAAS,IAAI,EAAE;QACxC,OAAO;YACL,SAAS;YACT,YAAY,IAAI;YAChB,aAAa,IAAI;QACnB;QAEA,mCAAmC;QACnC,MAAM,QAAQ,CAAA,GAAA,gIAAA,CAAA,oBAAiB,AAAD,EAAE,CAAC;YAC/B,IAAI,QAAQ,aAAa;YACzB,MAAM,OAAO,CAAA,GAAA,gIAAA,CAAA,eAAY,AAAD,EAAE;YAC1B,IAAI,CAAC,MAAM;YAEX,SAAS,KAAK,GAAG,CAAC,KAAK,YAAY,IAAI,GAAG,KAAK,GAAG,CAAC,GAAG,MAAM,MAAM,GAAG;YACrE,YAAY,IAAI,IAAI,KAAK,QAAQ,IAAI,EAAE;YACvC,aAAa,IAAI,IAAI,KAAK,SAAS,IAAI,EAAE;QAC3C;QAEA,OAAO,IAAM;IACf,GAAG;QAAC,MAAM,MAAM;QAAE;KAAY;IAE9B,SAAS,QAAQ,SAAiB,EAAE,SAAsB,EAAE,UAAuB;QACjF,CAAA,GAAA,gIAAA,CAAA,eAAY,AAAD,EAAE,aAAa;YACxB,cAAc;YACd,UAAU,MAAM,IAAI,CAAC;YACrB,WAAW,MAAM,IAAI,CAAC;YACtB,WAAW,KAAK,GAAG;QACrB;IACF;IAEA,SAAS;QACP,MAAM,OAAO,KAAK,GAAG,CAAC,GAAG,QAAQ;QACjC,SAAS;QACT,WAAW;QACX,QAAQ,MAAM,UAAU;IAC1B;IAEA,SAAS;QACP,MAAM,OAAO,KAAK,GAAG,CAAC,MAAM,MAAM,GAAG,GAAG,QAAQ;QAChD,SAAS;QACT,WAAW;QACX,QAAQ,MAAM,UAAU;IAC1B;IAEA,SAAS;QACP,MAAM,KAAK,KAAK,CAAC,MAAM,EAAE;QACzB,IAAI,CAAC,IAAI;QAET,MAAM,IAAI,IAAI,IAAI;QAClB,MAAM,IAAI,IAAI,IAAI;QAClB,EAAE,GAAG,CAAC;QACN,EAAE,MAAM,CAAC;QAET,YAAY;QACZ,aAAa;QAEb,MAAM,YAAY,KAAK,GAAG,CAAC,MAAM,MAAM,GAAG,GAAG,QAAQ;QACrD,SAAS;QACT,WAAW;QAEX,QAAQ,WAAW,GAAG;IACxB;IAEA,SAAS;QACP,MAAM,KAAK,KAAK,CAAC,MAAM,EAAE;QACzB,IAAI,CAAC,IAAI;QAET,MAAM,IAAI,IAAI,IAAI;QAClB,MAAM,IAAI,IAAI,IAAI;QAClB,EAAE,GAAG,CAAC;QACN,EAAE,MAAM,CAAC;QAET,YAAY;QACZ,aAAa;QAEb,MAAM,YAAY,KAAK,GAAG,CAAC,MAAM,MAAM,GAAG,GAAG,QAAQ;QACrD,SAAS;QACT,WAAW;QAEX,QAAQ,WAAW,GAAG;IACxB;IAEA,MAAM,QAAQ,MAAM,MAAM;IAC1B,MAAM,OAAO,SAAS,IAAI,GAAG,UAAU,IAAI;IAC3C,MAAM,MAAM,QAAQ,IAAI,KAAK,KAAK,CAAC,AAAC,OAAO,QAAS,OAAO;IAE3D,IAAI,SAAS;QACX,qBACE,8OAAC;YAAQ,WAAU;sBACjB,cAAA,8OAAC;gBAAI,WAAU;0BAAqE;;;;;;;;;;;IAK1F;IAEA,IAAI,OAAO;QACT,qBACE,8OAAC;YAAQ,WAAU;sBACjB,cAAA,8OAAC;gBAAI,WAAU;0BACZ;;;;;;;;;;;IAIT;IAEA,IAAI,CAAC,OAAO;QACV,qBACE,8OAAC;YAAQ,WAAU;sBACjB,cAAA,8OAAC;gBAAI,WAAU;0BAAqE;;;;;;;;;;;IAK1F;IAEA,MAAM,OAAO,KAAK,CAAC,MAAM;IAEzB,qBACE,8OAAC;QAAQ,WAAU;;0BACjB,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;;kDACC,8OAAC;wCAAI,WAAU;kDAAgC;;;;;;kDAC/C,8OAAC;wCAAI,WAAU;;4CACZ,UAAU,SAAS;4CAAW;4CAAI;4CAAK;4CAAE;4CAAM;;;;;;;;;;;;;0CAIpD,8OAAC;gCAAI,WAAU;;oCAAyB;oCAAI;;;;;;;;;;;;;kCAI9C,8OAAC;wBAAI,WAAU;kCACb,cAAA,8OAAC;4BACC,WAAU;4BACV,OAAO;gCAAE,OAAO,GAAG,IAAI,CAAC,CAAC;4BAAC;;;;;;;;;;;kCAK9B,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAI,WAAU;;kDACb,8OAAC;wCAAI,WAAU;kDAAwB;;;;;;kDACvC,8OAAC;wCAAI,WAAU;kDAAqC,SAAS,IAAI;;;;;;;;;;;;0CAEnE,8OAAC;gCAAI,WAAU;;kDACb,8OAAC;wCAAI,WAAU;kDAAwB;;;;;;kDACvC,8OAAC;wCAAI,WAAU;kDAAqC,UAAU,IAAI;;;;;;;;;;;;;;;;;;;;;;;;0BAMxE,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;;oCAAK;oCACM,QAAQ;oCAAE;oCAAE;;;;;;;0CAExB,8OAAC;gCACC,SAAS,IAAM,WAAW,CAAC,IAAM,CAAC;gCAClC,WAAU;0CAET,UAAU,iBAAiB;;;;;;;;;;;;kCAIhC,8OAAC;wBACC,WAAU;wBACV,OAAO;4BAAE,aAAa;wBAAK;kCAE3B,cAAA,8OAAC;4BACC,MAAK;4BACL,SAAS,IAAM,WAAW,CAAC,IAAM,CAAC;4BAClC,WAAU;4BACV,cAAW;sCAEX,cAAA,8OAAC;gCACC,WAAW,GACT,6GACA;gCAEF,OAAO;oCACL,gBAAgB;oCAChB,WAAW,UAAU,oBAAoB;oCACzC,WAAW;gCACb;;kDAGA,8OAAC;wCACC,WAAU;wCACV,OAAO;4CAAE,oBAAoB;wCAAS;;0DAEtC,8OAAC;gDAAI,WAAU;0DAAuC;;;;;;0DACtD,8OAAC;gDAAI,WAAU;0DACZ,MAAM;;;;;;0DAET,8OAAC;gDAAI,WAAU;0DAA6B;;;;;;;;;;;;kDAM9C,8OAAC;wCACC,WAAU;wCACV,OAAO;4CACL,oBAAoB;4CACpB,WAAW;wCACb;;0DAEA,8OAAC;gDAAI,WAAU;0DAAuC;;;;;;0DACtD,8OAAC;gDAAI,WAAU;0DACZ,MAAM;;;;;;0DAET,8OAAC;gDAAI,WAAU;0DAA6B;;;;;;;;;;;;;;;;;;;;;;;;;;;;kCASpD,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCACC,SAAS;gCACT,UAAU,UAAU;gCACpB,WAAU;;kDAEV,8OAAC,oNAAA,CAAA,cAAW;wCAAC,WAAU;;;;;;oCAAY;;;;;;;0CAIrC,8OAAC;gCAAI,WAAU;;kDACb,8OAAC;wCACC,SAAS;wCACT,WAAU;;0DAEV,8OAAC,4MAAA,CAAA,UAAO;gDAAC,WAAU;;;;;;4CAAY;;;;;;;kDAIjC,8OAAC;wCACC,SAAS;wCACT,WAAU;;0DAEV,8OAAC,qNAAA,CAAA,eAAY;gDAAC,WAAU;;;;;;4CAAY;;;;;;;;;;;;;0CAKxC,8OAAC;gCACC,SAAS;gCACT,UAAU,SAAS,QAAQ;gCAC3B,WAAU;;oCACX;kDAEC,8OAAC,sNAAA,CAAA,eAAY;wCAAC,WAAU;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAMpC","debugId":null}},
    {"offset": {"line": 1137, "column": 0}, "map": {"version":3,"sources":["file:///Users/ruangalvao/ProjetosVS/Projetos%20Pessoais/stud.ai-app/app-stud.ai/src/app/components/SummarySection.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useMemo, useState } from \"react\";\nimport { Sparkles } from \"lucide-react\";\n\ntype Props = {\n  data?: any | null;\n};\n\ntype Material = {\n  materialId?: string;\n  topic?: string;\n  flashcards?: any[];\n  summary?: {\n    title?: string;\n    mainTopics?: Array<{ id: number; title: string; content: string; icon?: string }>;\n    keyPoints?: string[];\n    style?: \"bullet\" | \"explained\";\n  };\n};\n\nfunction cn(...s: Array<string | false | null | undefined>) {\n  return s.filter(Boolean).join(\" \");\n}\n\nasync function fetchLatestMaterial(): Promise<Material | null> {\n  const res = await fetch(\"/api/materials/latest\", { method: \"GET\" });\n  const json = await res.json();\n\n  if (!res.ok || !json?.success) return null;\n  const latest = json?.data;\n  if (!latest) return null;\n\n  const payload = latest?.data && typeof latest.data === \"object\" ? latest.data : null;\n  if (!payload) return null;\n\n  const material: Material = {\n    ...payload,\n    materialId: latest.id,\n    topic: payload.topic || latest.topic || \"Material\",\n  };\n\n  try {\n    localStorage.setItem(\"studai:lastMaterialData:v1\", JSON.stringify(material));\n  } catch {}\n\n  return material;\n}\n\nexport default function SummarySection({ data }: Props) {\n  const [material, setMaterial] = useState<Material | null>(data || null);\n  const [loading, setLoading] = useState<boolean>(!data);\n  const [error, setError] = useState<string | null>(null);\n\n  useEffect(() => {\n    let alive = true;\n\n    async function load() {\n      if (data) {\n        setMaterial(data);\n        setLoading(false);\n        return;\n      }\n\n      setLoading(true);\n      const latest = await fetchLatestMaterial();\n      if (!alive) return;\n\n      if (!latest) {\n        setError(\"Nenhum material encontrado. Fa√ßa um upload primeiro.\");\n        setMaterial(null);\n      } else {\n        setError(null);\n        setMaterial(latest);\n      }\n\n      setLoading(false);\n    }\n\n    load();\n    return () => {\n      alive = false;\n    };\n  }, [data]);\n\n  const summary = material?.summary || null;\n\n  const title = useMemo(() => {\n    if (summary?.title) return summary.title;\n    if (material?.topic) return `${material.topic} - Resumo`;\n    return \"Resumo\";\n  }, [summary?.title, material?.topic]);\n\n  const mainTopics = useMemo(() => {\n    const list = summary?.mainTopics || [];\n    return Array.isArray(list) ? list : [];\n  }, [summary?.mainTopics]);\n\n  const keyPoints = useMemo(() => {\n    const list = summary?.keyPoints || [];\n    return Array.isArray(list) ? list : [];\n  }, [summary?.keyPoints]);\n\n  if (loading) {\n    return (\n      <section className=\"w-full\">\n        <div className=\"rounded-2xl border border-[#1A1A1A] bg-[#0D0D0D] p-6 text-gray-300\">\n          Carregando resumo...\n        </div>\n      </section>\n    );\n  }\n\n  if (error) {\n    return (\n      <section className=\"w-full\">\n        <div className=\"rounded-2xl border border-[#1A1A1A] bg-[#0D0D0D] p-6 text-red-300\">\n          {error}\n        </div>\n      </section>\n    );\n  }\n\n  if (!summary) {\n    return (\n      <section className=\"w-full\">\n        <div className=\"rounded-2xl border border-[#1A1A1A] bg-[#0D0D0D] p-6 text-gray-300\">\n          Nenhum resumo encontrado neste material.\n        </div>\n      </section>\n    );\n  }\n\n  return (\n    <section className=\"w-full\">\n      <div className=\"mb-6 flex items-start justify-between gap-3\">\n        <div>\n          <div className=\"inline-flex items-center gap-2 rounded-full border border-[#00FF8B]/25 bg-[#00FF8B]/10 px-3 py-1 text-xs font-semibold text-[#00FF8B]\">\n            <Sparkles className=\"w-4 h-4\" />\n            Gerado por IA\n          </div>\n\n          <h2 className=\"mt-3 text-2xl sm:text-3xl font-bold text-white\">\n            {title}\n          </h2>\n\n          {material?.materialId ? (\n            <div className=\"mt-2 text-[11px] text-gray-500 break-all\">\n              materialId: <span className=\"font-mono\">{material.materialId}</span>\n            </div>\n          ) : null}\n        </div>\n      </div>\n\n      {/* Main topics */}\n      <div className=\"space-y-4\">\n        {mainTopics.map((t) => (\n          <div\n            key={t.id}\n            className={cn(\n              \"rounded-2xl border border-[#1A1A1A] bg-[#0D0D0D] p-5\",\n              \"shadow-[0_0_0_1px_rgba(0,255,139,0.06)]\"\n            )}\n          >\n            <div className=\"flex items-start gap-3\">\n              <div className=\"flex h-10 w-10 items-center justify-center rounded-xl bg-[#00FF8B]/10 border border-[#00FF8B]/15\">\n                <span className=\"text-lg\">{t.icon || \"üìå\"}</span>\n              </div>\n\n              <div className=\"flex-1 min-w-0\">\n                <div className=\"text-xs font-semibold text-[#00FF8B]\">\n                  T√ìPICO {t.id}\n                </div>\n                <div className=\"mt-1 text-lg font-semibold text-white\">\n                  {t.title}\n                </div>\n                <div className=\"mt-2 text-sm text-gray-200 whitespace-pre-wrap leading-relaxed\">\n                  {t.content}\n                </div>\n              </div>\n            </div>\n          </div>\n        ))}\n      </div>\n\n      {/* Key points */}\n      {keyPoints.length ? (\n        <div className=\"mt-6 rounded-2xl border border-[#1A1A1A] bg-[#0D0D0D] p-5\">\n          <div className=\"text-sm font-semibold text-white mb-3\">Pontos-chave</div>\n          <ul className=\"space-y-2\">\n            {keyPoints.map((k, i) => (\n              <li key={i} className=\"text-sm text-gray-200 flex gap-2\">\n                <span className=\"text-[#00FF8B]\">‚Ä¢</span>\n                <span className=\"whitespace-pre-wrap\">{k}</span>\n              </li>\n            ))}\n          </ul>\n        </div>\n      ) : null}\n    </section>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1468, "column": 0}, "map": {"version":3,"sources":["file:///Users/ruangalvao/ProjetosVS/Projetos%20Pessoais/stud.ai-app/app-stud.ai/src/lib/studyMaterialStore.ts"],"sourcesContent":["// src/lib/studyMaterialStore.ts\nexport type Flashcard = {\n  id: number;\n  question: string;\n  answer: string;\n};\n\nexport type SummaryTopic = {\n  id: number;\n  title: string;\n  content: string;\n  icon: string;\n};\n\nexport type StudySummary = {\n  title: string;\n  mainTopics: SummaryTopic[];\n  keyPoints: string[];\n};\n\nexport type StudyMaterial = {\n  topic: string;\n  flashcards: Flashcard[];\n  summary: StudySummary;\n  // opcionais (se voc√™ quiser usar depois)\n  materialId?: string;\n  createdAt?: string;\n};\n\nconst STORAGE_KEY = \"studai:lastMaterial:v1\";\nconst EVENT_NAME = \"studai:material_updated\";\n\nexport function normalizeFromApi(payload: any): StudyMaterial | null {\n  // aceita:\n  // - { success:true, data:{...} }\n  // - { topic, flashcards, summary }\n  const data = payload?.data ?? payload;\n\n  const topic = data?.topic;\n  const flashcards = data?.flashcards;\n  const summary = data?.summary;\n\n  if (!topic || !Array.isArray(flashcards) || !summary) return null;\n\n  if (\n    typeof summary?.title !== \"string\" ||\n    !Array.isArray(summary?.mainTopics) ||\n    !Array.isArray(summary?.keyPoints)\n  ) {\n    return null;\n  }\n\n  return {\n    topic,\n    flashcards,\n    summary,\n    materialId: payload?.meta?.materialId ?? payload?.materialId ?? data?.materialId,\n    createdAt: new Date().toISOString(),\n  };\n}\n\nexport function saveMaterial(material: StudyMaterial) {\n  if (typeof window === \"undefined\") return;\n  localStorage.setItem(STORAGE_KEY, JSON.stringify(material));\n  window.dispatchEvent(new Event(EVENT_NAME));\n}\n\nexport function loadMaterial(): StudyMaterial | null {\n  if (typeof window === \"undefined\") return null;\n  const raw = localStorage.getItem(STORAGE_KEY);\n  if (!raw) return null;\n\n  try {\n    return JSON.parse(raw) as StudyMaterial;\n  } catch {\n    return null;\n  }\n}\n\nexport function clearMaterial() {\n  if (typeof window === \"undefined\") return;\n  localStorage.removeItem(STORAGE_KEY);\n  window.dispatchEvent(new Event(EVENT_NAME));\n}\n\nexport function onMaterialUpdated(cb: () => void) {\n  if (typeof window === \"undefined\") return () => {};\n\n  const handler = () => cb();\n  window.addEventListener(EVENT_NAME, handler);\n\n  // tamb√©m reage quando outro tab atualiza\n  const storageHandler = (e: StorageEvent) => {\n    if (e.key === STORAGE_KEY) cb();\n  };\n  window.addEventListener(\"storage\", storageHandler);\n\n  return () => {\n    window.removeEventListener(EVENT_NAME, handler);\n    window.removeEventListener(\"storage\", storageHandler);\n  };\n}\n"],"names":[],"mappings":"AAAA,gCAAgC;;;;;;;;AA6BhC,MAAM,cAAc;AACpB,MAAM,aAAa;AAEZ,SAAS,iBAAiB,OAAY;IAC3C,UAAU;IACV,iCAAiC;IACjC,mCAAmC;IACnC,MAAM,OAAO,SAAS,QAAQ;IAE9B,MAAM,QAAQ,MAAM;IACpB,MAAM,aAAa,MAAM;IACzB,MAAM,UAAU,MAAM;IAEtB,IAAI,CAAC,SAAS,CAAC,MAAM,OAAO,CAAC,eAAe,CAAC,SAAS,OAAO;IAE7D,IACE,OAAO,SAAS,UAAU,YAC1B,CAAC,MAAM,OAAO,CAAC,SAAS,eACxB,CAAC,MAAM,OAAO,CAAC,SAAS,YACxB;QACA,OAAO;IACT;IAEA,OAAO;QACL;QACA;QACA;QACA,YAAY,SAAS,MAAM,cAAc,SAAS,cAAc,MAAM;QACtE,WAAW,IAAI,OAAO,WAAW;IACnC;AACF;AAEO,SAAS,aAAa,QAAuB;IAClD,wCAAmC;;;AAGrC;AAEO,SAAS;IACd,wCAAmC,OAAO;;;IAC1C,MAAM;AAQR;AAEO,SAAS;IACd,wCAAmC;;;AAGrC;AAEO,SAAS,kBAAkB,EAAc;IAC9C,wCAAmC,OAAO,KAAO;;;IAEjD,MAAM;IAGN,yCAAyC;IACzC,MAAM;AASR","debugId":null}},
    {"offset": {"line": 1526, "column": 0}, "map": {"version":3,"sources":["file:///Users/ruangalvao/ProjetosVS/Projetos%20Pessoais/stud.ai-app/app-stud.ai/src/app/components/ProgressSection.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useMemo, useState } from \"react\";\nimport { loadMaterial, onMaterialUpdated } from \"@/lib/studyMaterialStore\";\nimport { makeProgressKey, loadProgress, onProgressUpdated, clearProgress } from \"@/lib/studyProgressStore\";\n\nfunction cn(...s: Array<string | false | null | undefined>) {\n  return s.filter(Boolean).join(\" \");\n}\nfunction pct(n: number) {\n  return Math.max(0, Math.min(100, Math.round(n)));\n}\nfunction uniq(arr: number[]) {\n  return Array.from(new Set(arr));\n}\n\nexport default function ProgressSection() {\n  const [topic, setTopic] = useState<string>(\"\");\n  const [totalCards, setTotalCards] = useState<number>(0);\n  const [progressKey, setProgressKey] = useState<string>(\"\");\n\n  const [knownIds, setKnownIds] = useState<number[]>([]);\n  const [reviewIds, setReviewIds] = useState<number[]>([]);\n  const [updatedAt, setUpdatedAt] = useState<string | null>(null);\n\n  useEffect(() => {\n    const refresh = () => {\n      const m = loadMaterial();\n      const count = m?.flashcards?.length ?? 0;\n\n      setTopic(m?.topic ?? \"\");\n      setTotalCards(count);\n\n      const key = makeProgressKey(m?.topic ?? \"deck\", count);\n      setProgressKey(key);\n\n      const p = loadProgress(key);\n      setKnownIds(p?.knownIds ?? []);\n      setReviewIds(p?.reviewIds ?? []);\n      setUpdatedAt(p?.updatedAt ?? null);\n    };\n\n    refresh();\n    const off1 = onMaterialUpdated(refresh);\n    const off2 = onProgressUpdated(refresh);\n    return () => {\n      off1?.();\n      off2?.();\n    };\n  }, []);\n\n  const known = useMemo(() => new Set(knownIds), [knownIds]);\n  const review = useMemo(() => new Set(reviewIds), [reviewIds]);\n\n  const doneCount = uniq([...knownIds, ...reviewIds]).length;\n  const donePct = totalCards ? pct((doneCount / totalCards) * 100) : 0;\n\n  const knownCount = known.size;\n  const reviewCount = review.size;\n  const remainingCount = Math.max(0, totalCards - doneCount);\n\n  if (!totalCards) {\n    return (\n      <section className=\"w-full max-w-5xl mx-auto mt-10 rounded-2xl border border-white/10 bg-white/5 p-8 text-center\">\n        <h2 className=\"text-2xl font-semibold\">Progresso</h2>\n        <p className=\"mt-2 opacity-70\">Gere um material (upload) para acompanhar seu progresso.</p>\n      </section>\n    );\n  }\n\n  return (\n    <section className=\"w-full max-w-5xl mx-auto mt-10\">\n      {/* Header premium */}\n      <div className=\"rounded-2xl border border-white/10 bg-white/5 p-6\">\n        <div className=\"flex flex-col md:flex-row md:items-start md:justify-between gap-4\">\n          <div>\n            <div className=\"text-xs opacity-70\">Progresso</div>\n            <h2 className=\"text-2xl font-semibold mt-1\">{topic || \"Seu deck\"}</h2>\n            <div className=\"mt-2 text-sm opacity-70\">\n              Acompanhe seu avan√ßo no mesmo padr√£o visual do Flashcards.\n            </div>\n          </div>\n\n          <div className=\"flex flex-wrap gap-2\">\n            <Chip tone=\"green\" label={`‚úÖ Conhecidos: ${knownCount}`} />\n            <Chip tone=\"red\" label={`‚ùå Revisar: ${reviewCount}`} />\n            <Chip tone=\"neutral\" label={`‚è≥ Restantes: ${remainingCount}`} />\n          </div>\n        </div>\n\n        {/* Progress bar */}\n        <div className=\"mt-5\">\n          <div className=\"flex items-center justify-between text-xs opacity-70\">\n            <span>Progresso geral</span>\n            <span>{donePct}%</span>\n          </div>\n          <div className=\"mt-2 h-2 w-full rounded-full bg-black/30 overflow-hidden border border-white/10\">\n            <div className=\"h-full rounded-full bg-[#00FF8B]/70\" style={{ width: `${donePct}%` }} />\n          </div>\n\n          <div className=\"mt-3 text-xs opacity-60\">\n            {updatedAt ? `√öltima atualiza√ß√£o: ${new Date(updatedAt).toLocaleString()}` : \"Ainda sem atualiza√ß√µes\"}\n          </div>\n        </div>\n\n        {/* Action row */}\n        <div className=\"mt-5 flex flex-col sm:flex-row items-center justify-between gap-3\">\n          <div className=\"text-sm opacity-70\">\n            Total de cards: <b className=\"opacity-90\">{totalCards}</b> ‚Ä¢ Conclu√≠dos:{\" \"}\n            <b className=\"opacity-90\">{doneCount}</b>\n          </div>\n\n          <button\n            onClick={() => {\n              if (!progressKey) return;\n              clearProgress(progressKey);\n            }}\n            className=\"rounded-2xl border border-white/10 bg-white/5 px-5 py-3 text-sm hover:bg-white/10\"\n          >\n            Limpar progresso deste deck\n          </button>\n        </div>\n      </div>\n\n      {/* Breakdown premium */}\n      <div className=\"mt-6 grid grid-cols-1 md:grid-cols-3 gap-4\">\n        <StatCard title=\"Conhecidos\" value={knownCount} subtitle=\"Voc√™ marcou como acertei\" tone=\"green\" />\n        <StatCard title=\"Revisar\" value={reviewCount} subtitle=\"Precisa refor√ßar\" tone=\"red\" />\n        <StatCard title=\"Restantes\" value={remainingCount} subtitle=\"Ainda n√£o avaliados\" tone=\"neutral\" />\n      </div>\n\n      {/* Dica */}\n      <div className=\"mt-6 rounded-2xl border border-white/10 bg-white/5 p-6\">\n        <div className=\"font-semibold\">Dica de estudo</div>\n        <p className=\"mt-2 opacity-70 leading-relaxed\">\n          Use sess√µes curtas (10‚Äì20 cards) e marque ‚ÄúRevisar‚Äù sem medo. O ideal √© voltar nesses cards no dia seguinte.\n        </p>\n      </div>\n    </section>\n  );\n}\n\nfunction Chip({ label, tone }: { label: string; tone: \"green\" | \"red\" | \"neutral\" }) {\n  const cls =\n    tone === \"green\"\n      ? \"border-[#00FF8B]/25 bg-[#00FF8B]/10 text-[#00FF8B]\"\n      : tone === \"red\"\n      ? \"border-red-500/25 bg-red-500/10 text-red-200\"\n      : \"border-white/10 bg-black/20 text-white/70\";\n  return <span className={cn(\"text-xs px-3 py-1 rounded-full border\", cls)}>{label}</span>;\n}\n\nfunction StatCard({\n  title,\n  value,\n  subtitle,\n  tone,\n}: {\n  title: string;\n  value: number;\n  subtitle: string;\n  tone: \"green\" | \"red\" | \"neutral\";\n}) {\n  const border =\n    tone === \"green\"\n      ? \"border-[#00FF8B]/20\"\n      : tone === \"red\"\n      ? \"border-red-500/20\"\n      : \"border-white/10\";\n\n  const bg =\n    tone === \"green\"\n      ? \"bg-[#00FF8B]/10\"\n      : tone === \"red\"\n      ? \"bg-red-500/10\"\n      : \"bg-black/20\";\n\n  const text =\n    tone === \"green\" ? \"text-[#00FF8B]\" : tone === \"red\" ? \"text-red-200\" : \"text-white/80\";\n\n  return (\n    <div className={cn(\"rounded-2xl border bg-white/5 p-6\", border)}>\n      <div className=\"text-xs opacity-70\">{title}</div>\n      <div className={cn(\"mt-2 text-3xl font-bold\", text)}>{value}</div>\n      <div className={cn(\"mt-3 rounded-xl border p-3 text-sm opacity-90\", border, bg)}>{subtitle}</div>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AAJA;;;;;AAMA,SAAS,GAAG,GAAG,CAA2C;IACxD,OAAO,EAAE,MAAM,CAAC,SAAS,IAAI,CAAC;AAChC;AACA,SAAS,IAAI,CAAS;IACpB,OAAO,KAAK,GAAG,CAAC,GAAG,KAAK,GAAG,CAAC,KAAK,KAAK,KAAK,CAAC;AAC9C;AACA,SAAS,KAAK,GAAa;IACzB,OAAO,MAAM,IAAI,CAAC,IAAI,IAAI;AAC5B;AAEe,SAAS;IACtB,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAU;IAC3C,MAAM,CAAC,YAAY,cAAc,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAU;IACrD,MAAM,CAAC,aAAa,eAAe,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAU;IAEvD,MAAM,CAAC,UAAU,YAAY,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAY,EAAE;IACrD,MAAM,CAAC,WAAW,aAAa,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAY,EAAE;IACvD,MAAM,CAAC,WAAW,aAAa,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAiB;IAE1D,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,MAAM,UAAU;YACd,MAAM,IAAI,CAAA,GAAA,gIAAA,CAAA,eAAY,AAAD;YACrB,MAAM,QAAQ,GAAG,YAAY,UAAU;YAEvC,SAAS,GAAG,SAAS;YACrB,cAAc;YAEd,MAAM,MAAM,CAAA,GAAA,gIAAA,CAAA,kBAAe,AAAD,EAAE,GAAG,SAAS,QAAQ;YAChD,eAAe;YAEf,MAAM,IAAI,CAAA,GAAA,gIAAA,CAAA,eAAY,AAAD,EAAE;YACvB,YAAY,GAAG,YAAY,EAAE;YAC7B,aAAa,GAAG,aAAa,EAAE;YAC/B,aAAa,GAAG,aAAa;QAC/B;QAEA;QACA,MAAM,OAAO,CAAA,GAAA,gIAAA,CAAA,oBAAiB,AAAD,EAAE;QAC/B,MAAM,OAAO,CAAA,GAAA,gIAAA,CAAA,oBAAiB,AAAD,EAAE;QAC/B,OAAO;YACL;YACA;QACF;IACF,GAAG,EAAE;IAEL,MAAM,QAAQ,CAAA,GAAA,qMAAA,CAAA,UAAO,AAAD,EAAE,IAAM,IAAI,IAAI,WAAW;QAAC;KAAS;IACzD,MAAM,SAAS,CAAA,GAAA,qMAAA,CAAA,UAAO,AAAD,EAAE,IAAM,IAAI,IAAI,YAAY;QAAC;KAAU;IAE5D,MAAM,YAAY,KAAK;WAAI;WAAa;KAAU,EAAE,MAAM;IAC1D,MAAM,UAAU,aAAa,IAAI,AAAC,YAAY,aAAc,OAAO;IAEnE,MAAM,aAAa,MAAM,IAAI;IAC7B,MAAM,cAAc,OAAO,IAAI;IAC/B,MAAM,iBAAiB,KAAK,GAAG,CAAC,GAAG,aAAa;IAEhD,IAAI,CAAC,YAAY;QACf,qBACE,8OAAC;YAAQ,WAAU;;8BACjB,8OAAC;oBAAG,WAAU;8BAAyB;;;;;;8BACvC,8OAAC;oBAAE,WAAU;8BAAkB;;;;;;;;;;;;IAGrC;IAEA,qBACE,8OAAC;QAAQ,WAAU;;0BAEjB,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;;kDACC,8OAAC;wCAAI,WAAU;kDAAqB;;;;;;kDACpC,8OAAC;wCAAG,WAAU;kDAA+B,SAAS;;;;;;kDACtD,8OAAC;wCAAI,WAAU;kDAA0B;;;;;;;;;;;;0CAK3C,8OAAC;gCAAI,WAAU;;kDACb,8OAAC;wCAAK,MAAK;wCAAQ,OAAO,CAAC,cAAc,EAAE,YAAY;;;;;;kDACvD,8OAAC;wCAAK,MAAK;wCAAM,OAAO,CAAC,WAAW,EAAE,aAAa;;;;;;kDACnD,8OAAC;wCAAK,MAAK;wCAAU,OAAO,CAAC,aAAa,EAAE,gBAAgB;;;;;;;;;;;;;;;;;;kCAKhE,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAI,WAAU;;kDACb,8OAAC;kDAAK;;;;;;kDACN,8OAAC;;4CAAM;4CAAQ;;;;;;;;;;;;;0CAEjB,8OAAC;gCAAI,WAAU;0CACb,cAAA,8OAAC;oCAAI,WAAU;oCAAsC,OAAO;wCAAE,OAAO,GAAG,QAAQ,CAAC,CAAC;oCAAC;;;;;;;;;;;0CAGrF,8OAAC;gCAAI,WAAU;0CACZ,YAAY,CAAC,oBAAoB,EAAE,IAAI,KAAK,WAAW,cAAc,IAAI,GAAG;;;;;;;;;;;;kCAKjF,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAI,WAAU;;oCAAqB;kDAClB,8OAAC;wCAAE,WAAU;kDAAc;;;;;;oCAAe;oCAAe;kDACzE,8OAAC;wCAAE,WAAU;kDAAc;;;;;;;;;;;;0CAG7B,8OAAC;gCACC,SAAS;oCACP,IAAI,CAAC,aAAa;oCAClB,CAAA,GAAA,gIAAA,CAAA,gBAAa,AAAD,EAAE;gCAChB;gCACA,WAAU;0CACX;;;;;;;;;;;;;;;;;;0BAOL,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAS,OAAM;wBAAa,OAAO;wBAAY,UAAS;wBAA2B,MAAK;;;;;;kCACzF,8OAAC;wBAAS,OAAM;wBAAU,OAAO;wBAAa,UAAS;wBAAmB,MAAK;;;;;;kCAC/E,8OAAC;wBAAS,OAAM;wBAAY,OAAO;wBAAgB,UAAS;wBAAsB,MAAK;;;;;;;;;;;;0BAIzF,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAI,WAAU;kCAAgB;;;;;;kCAC/B,8OAAC;wBAAE,WAAU;kCAAkC;;;;;;;;;;;;;;;;;;AAMvD;AAEA,SAAS,KAAK,EAAE,KAAK,EAAE,IAAI,EAAwD;IACjF,MAAM,MACJ,SAAS,UACL,uDACA,SAAS,QACT,iDACA;IACN,qBAAO,8OAAC;QAAK,WAAW,GAAG,yCAAyC;kBAAO;;;;;;AAC7E;AAEA,SAAS,SAAS,EAChB,KAAK,EACL,KAAK,EACL,QAAQ,EACR,IAAI,EAML;IACC,MAAM,SACJ,SAAS,UACL,wBACA,SAAS,QACT,sBACA;IAEN,MAAM,KACJ,SAAS,UACL,oBACA,SAAS,QACT,kBACA;IAEN,MAAM,OACJ,SAAS,UAAU,mBAAmB,SAAS,QAAQ,iBAAiB;IAE1E,qBACE,8OAAC;QAAI,WAAW,GAAG,qCAAqC;;0BACtD,8OAAC;gBAAI,WAAU;0BAAsB;;;;;;0BACrC,8OAAC;gBAAI,WAAW,GAAG,2BAA2B;0BAAQ;;;;;;0BACtD,8OAAC;gBAAI,WAAW,GAAG,iDAAiD,QAAQ;0BAAM;;;;;;;;;;;;AAGxF","debugId":null}},
    {"offset": {"line": 1935, "column": 0}, "map": {"version":3,"sources":["file:///Users/ruangalvao/ProjetosVS/Projetos%20Pessoais/stud.ai-app/app-stud.ai/src/app/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useState } from \"react\";\nimport { Upload, Sparkles, BookOpen, TrendingUp, Trophy, Users } from \"lucide-react\";\nimport UploadSection from \"./components/UploadSection\";\nimport FlashcardsSection from \"./components/FlashcardsSection\";\nimport SummarySection from \"./components/SummarySection\";\nimport ProgressSection from \"./components/ProgressSection\";\n\ntype Section = \"upload\" | \"flashcards\" | \"summary\" | \"progress\";\n\nfunction safeParse<T>(s: string | null): T | null {\n  if (!s) return null;\n  try {\n    return JSON.parse(s) as T;\n  } catch {\n    return null;\n  }\n}\n\nexport default function Home() {\n  const [activeSection, setActiveSection] = useState<Section>(\"upload\");\n  const [studyData, setStudyData] = useState<any>(null);\n\n  // ‚úÖ carrega do localStorage ao abrir e mant√©m atualizado\n  useEffect(() => {\n    const stored = safeParse<any>(localStorage.getItem(\"studai:lastMaterialData:v1\"));\n    if (stored) setStudyData(stored);\n\n    // listener de navega√ß√£o (bot√µes do UploadSection)\n    const navHandler = (ev: Event) => {\n      const anyEv = ev as any;\n      const section = anyEv?.detail?.section as Section | undefined;\n      if (!section) return;\n      setActiveSection(section);\n    };\n\n    window.addEventListener(\"studai:navigate\", navHandler as any);\n\n    // se algum lugar atualizar o material em localStorage\n    const storageHandler = (e: StorageEvent) => {\n      if (e.key === \"studai:lastMaterialData:v1\") {\n        const latest = safeParse<any>(e.newValue);\n        setStudyData(latest);\n      }\n    };\n\n    window.addEventListener(\"storage\", storageHandler);\n\n    return () => {\n      window.removeEventListener(\"studai:navigate\", navHandler as any);\n      window.removeEventListener(\"storage\", storageHandler);\n    };\n  }, []);\n\n  return (\n    <div className=\"min-h-screen bg-[#0D0D0D]\">\n      {/* Header */}\n      <header className=\"border-b border-[#1A1A1A] backdrop-blur-sm bg-[#0D0D0D]/80 sticky top-0 z-50\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <div className=\"flex items-center justify-between h-16\">\n            <div className=\"flex items-center gap-2\">\n              <div className=\"w-8 h-8 rounded-lg bg-gradient-to-br from-[#00FF8B] to-[#007B5F] flex items-center justify-center\">\n                <Sparkles className=\"w-5 h-5 text-[#0D0D0D]\" />\n              </div>\n              <h1 className=\"text-xl sm:text-2xl font-bold bg-gradient-to-r from-[#00FF8B] to-[#007B5F] bg-clip-text text-transparent\">\n                Stud.ai\n              </h1>\n            </div>\n\n            {/* Desktop Navigation */}\n            <nav className=\"hidden md:flex items-center gap-1\">\n              <NavButton\n                icon={Upload}\n                label=\"Upload\"\n                active={activeSection === \"upload\"}\n                onClick={() => setActiveSection(\"upload\")}\n              />\n              <NavButton\n                icon={BookOpen}\n                label=\"FlashCards\"\n                active={activeSection === \"flashcards\"}\n                onClick={() => setActiveSection(\"flashcards\")}\n              />\n              <NavButton\n                icon={Sparkles}\n                label=\"Resumos\"\n                active={activeSection === \"summary\"}\n                onClick={() => setActiveSection(\"summary\")}\n              />\n              <NavButton\n                icon={TrendingUp}\n                label=\"Progresso\"\n                active={activeSection === \"progress\"}\n                onClick={() => setActiveSection(\"progress\")}\n              />\n            </nav>\n\n            {/* User Badge */}\n            <div className=\"hidden sm:flex items-center gap-2 px-3 py-1.5 rounded-full bg-[#1A1A1A] border border-[#00FF8B]/20\">\n              <Trophy className=\"w-4 h-4 text-[#00FF8B]\" />\n              <span className=\"text-sm font-medium\">N√≠vel 5</span>\n            </div>\n          </div>\n\n          {/* Mobile Navigation */}\n          <div className=\"md:hidden flex items-center gap-1 pb-3 overflow-x-auto\">\n            <NavButton\n              icon={Upload}\n              label=\"Upload\"\n              active={activeSection === \"upload\"}\n              onClick={() => setActiveSection(\"upload\")}\n              mobile\n            />\n            <NavButton\n              icon={BookOpen}\n              label=\"Cards\"\n              active={activeSection === \"flashcards\"}\n              onClick={() => setActiveSection(\"flashcards\")}\n              mobile\n            />\n            <NavButton\n              icon={Sparkles}\n              label=\"Resumos\"\n              active={activeSection === \"summary\"}\n              onClick={() => setActiveSection(\"summary\")}\n              mobile\n            />\n            <NavButton\n              icon={TrendingUp}\n              label=\"Progresso\"\n              active={activeSection === \"progress\"}\n              onClick={() => setActiveSection(\"progress\")}\n              mobile\n            />\n          </div>\n        </div>\n      </header>\n\n      {/* Main Content */}\n      <main className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6 sm:py-8\">\n        {activeSection === \"upload\" && <UploadSection onDataProcessed={setStudyData} />}\n        {activeSection === \"flashcards\" && <FlashcardsSection data={studyData} />}\n        {activeSection === \"summary\" && <SummarySection data={studyData} />}\n        {activeSection === \"progress\" && <ProgressSection />}\n      </main>\n\n      {/* Footer */}\n      <footer className=\"border-t border-[#1A1A1A] mt-12 py-8\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <div className=\"flex flex-col sm:flex-row items-center justify-between gap-4\">\n            <div className=\"flex items-center gap-2 text-sm text-gray-400\">\n              <Users className=\"w-4 h-4 text-[#00FF8B]\" />\n              <span>+1.2k estudantes ativos hoje</span>\n            </div>\n            <div className=\"text-sm text-gray-500\">Feito com üíö para estudantes</div>\n          </div>\n        </div>\n      </footer>\n    </div>\n  );\n}\n\nfunction NavButton({\n  icon: Icon,\n  label,\n  active,\n  onClick,\n  mobile = false,\n}: {\n  icon: any;\n  label: string;\n  active: boolean;\n  onClick: () => void;\n  mobile?: boolean;\n}) {\n  return (\n    <button\n      onClick={onClick}\n      className={`\n        flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition-all duration-300\n        ${mobile ? \"text-xs whitespace-nowrap\" : \"text-sm\"}\n        ${\n          active\n            ? \"bg-[#00FF8B]/10 text-[#00FF8B] border border-[#00FF8B]/30\"\n            : \"text-gray-400 hover:text-white hover:bg-[#1A1A1A]\"\n        }\n      `}\n    >\n      <Icon className=\"w-4 h-4\" />\n      <span>{label}</span>\n    </button>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}