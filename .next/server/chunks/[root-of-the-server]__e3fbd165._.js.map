{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 6, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 250, "column": 0}, "map": {"version":3,"sources":["file:///Users/ruangalvao/ProjetosVS/Projetos%20Pessoais/stud.ai-app/app-stud.ai/src/app/api/process-study-material/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from \"next/server\";\nimport OpenAI from \"openai\";\nimport { GoogleGenAI } from \"@google/genai\";\n\nexport const runtime = \"nodejs\";\n\ntype Provider = \"openai\" | \"gemini\";\ntype Difficulty = \"easy\" | \"medium\" | \"hard\" | \"random\";\ntype SummaryStyle = \"bullets\" | \"detailed\";\n\nfunction clampInt(n: number, min: number, max: number) {\n  if (!Number.isFinite(n)) return min;\n  return Math.max(min, Math.min(max, Math.trunc(n)));\n}\n\nfunction sleep(ms: number) {\n  return new Promise((r) => setTimeout(r, ms));\n}\n\nfunction getGeminiKey() {\n  return process.env.GEMINI_API_KEY || process.env.GOOGLE_API_KEY || \"\";\n}\n\nfunction pickProvider(): Provider {\n  const forced = (process.env.AI_PROVIDER || \"auto\").toLowerCase();\n  if (forced === \"openai\") return \"openai\";\n  if (forced === \"gemini\") return \"gemini\";\n\n  // auto\n  if (process.env.OPENAI_API_KEY && process.env.OPENAI_API_KEY.trim()) return \"openai\";\n  if (getGeminiKey().trim()) return \"gemini\";\n\n  throw new Error(\n    \"Nenhuma chave encontrada. Defina OPENAI_API_KEY ou GEMINI_API_KEY/GOOGLE_API_KEY no .env.local e reinicie o servidor.\"\n  );\n}\n\nfunction getStudySchema() {\n  // Schema ‚Äúflex√≠vel‚Äù (n√£o trava por campos extras)\n  return {\n    type: \"object\",\n    required: [\"topic\", \"flashcards\", \"summary\"],\n    properties: {\n      topic: { type: \"string\" },\n      tags: { type: \"array\", items: { type: \"string\" } },\n\n      flashcards: {\n        type: \"array\",\n        items: {\n          type: \"object\",\n          required: [\"id\", \"question\", \"answer\"],\n          properties: {\n            id: { type: \"integer\" },\n            question: { type: \"string\" },\n            answer: { type: \"string\" },\n            difficulty: { type: \"string\" }, // \"easy\"|\"medium\"|\"hard\"\n            tags: { type: \"array\", items: { type: \"string\" } },\n          },\n        },\n      },\n\n      summary: {\n        type: \"object\",\n        required: [\"title\", \"mainTopics\", \"keyPoints\"],\n        properties: {\n          title: { type: \"string\" },\n          length: { type: \"string\" }, // \"short\"|\"medium\"|\"long\" (opcional)\n          mainTopics: {\n            type: \"array\",\n            items: {\n              type: \"object\",\n              required: [\"id\", \"title\", \"content\", \"icon\"],\n              properties: {\n                id: { type: \"integer\" },\n                title: { type: \"string\" },\n                content: { type: \"string\" },\n                icon: { type: \"string\" },\n                tags: { type: \"array\", items: { type: \"string\" } },\n              },\n            },\n          },\n          keyPoints: { type: \"array\", items: { type: \"string\" } },\n\n          // opcional (se voc√™ quiser usar na UI)\n          sourceQuotes: {\n            type: \"array\",\n            items: {\n              type: \"object\",\n              required: [\"quote\", \"whyItMatters\"],\n              properties: {\n                quote: { type: \"string\" },\n                whyItMatters: { type: \"string\" },\n              },\n            },\n          },\n        },\n      },\n    },\n  };\n}\n\nfunction buildPromptText(params: {\n  flashcardsCount: number;\n  difficulty: Difficulty;\n  summaryStyle: SummaryStyle;\n  isImage: boolean;\n  isPdf: boolean;\n  textSnippet?: string;\n}) {\n  const diffText =\n    params.difficulty === \"random\"\n      ? \"Misture dificuldades (easy/medium/hard) e preencha o campo difficulty em cada flashcard.\"\n      : `Use difficulty=\"${params.difficulty}\" em todos os flashcards.`;\n\n  const summaryText =\n    params.summaryStyle === \"bullets\"\n      ? \"No resumo, escreva de forma objetiva (bullets curtos e diretos).\"\n      : \"No resumo, escreva de forma mais elaborada e explicativa (par√°grafos claros, exemplos r√°pidos quando √∫til).\";\n\n  const base = `Voc√™ √© um assistente educacional. Analise o material de estudo e gere um JSON ESTRITAMENTE v√°lido (apenas JSON, sem markdown, sem texto fora do JSON).\n\nRegras:\n- Crie EXATAMENTE ${params.flashcardsCount} flashcards.\n- ${diffText}\n- ${summaryText}\n- Inclua tags relevantes no n√≠vel raiz (tags) se fizer sentido.\n- Use emojis apropriados no campo icon de cada t√≥pico do resumo.\n- Preencha summary.length com \"short\", \"medium\" ou \"long\" (estimativa).\n- N√£o invente fatos: se algo n√£o estiver no material, deixe mais gen√©rico.\n\nFormato obrigat√≥rio do JSON:\n{\n  \"topic\": \"T√≥pico principal do material\",\n  \"tags\": [\"tag1\", \"tag2\"],\n  \"flashcards\": [\n    { \"id\": 1, \"question\": \"...\", \"answer\": \"...\", \"difficulty\": \"easy\" }\n  ],\n  \"summary\": {\n    \"title\": \"T√≠tulo do resumo\",\n    \"length\": \"short|medium|long\",\n    \"mainTopics\": [\n      { \"id\": 1, \"title\": \"...\", \"content\": \"...\", \"icon\": \"üìå\" }\n    ],\n    \"keyPoints\": [\"ponto-chave 1\", \"ponto-chave 2\"],\n    \"sourceQuotes\": [\n      { \"quote\": \"...\", \"whyItMatters\": \"...\" }\n    ]\n  }\n}`;\n\n  // Para texto puro, anexamos snippet (at√© 4000 chars)\n  if (!params.isImage && !params.isPdf) {\n    const snippet = (params.textSnippet || \"\").slice(0, 4000);\n    return `Material (trecho):\n${snippet}\n\n${base}`;\n  }\n\n  // Para imagem/PDF: o arquivo vai junto no request (inlineData ou image_url)\n  return base;\n}\n\nasync function runWithOpenAI(params: { content: any[]; model: string }) {\n  const key = process.env.OPENAI_API_KEY || \"\";\n  if (!key.trim()) {\n    throw new Error(\"OPENAI_API_KEY ausente. Defina no .env.local ou use Gemini.\");\n  }\n\n  const openai = new OpenAI({ apiKey: key });\n\n  const completion = await openai.chat.completions.create({\n    model: params.model,\n    messages: [\n      {\n        role: \"system\",\n        content:\n          \"Voc√™ √© um assistente educacional especializado em criar materiais de estudo. Responda sempre em JSON v√°lido.\",\n      },\n      { role: \"user\", content: params.content },\n    ],\n    response_format: { type: \"json_object\" },\n    max_tokens: 2200,\n  });\n\n  const raw = completion.choices[0]?.message?.content || \"{}\";\n  try {\n    return JSON.parse(raw);\n  } catch {\n    throw new Error(\"OpenAI retornou JSON inv√°lido.\");\n  }\n}\n\nasync function runWithGeminiOnce(params: {\n  model: string;\n  prompt: string;\n  isImage: boolean;\n  isPdf: boolean;\n  mimeType: string;\n  base64: string;\n}) {\n  const apiKey = getGeminiKey();\n  if (!apiKey.trim()) {\n    throw new Error(\"GEMINI_API_KEY/GOOGLE_API_KEY ausente. Defina no .env.local ou use OpenAI.\");\n  }\n\n  const ai = new GoogleGenAI({ apiKey });\n\n  // ‚úÖ Formato oficial para inlineData (imagem) no JS SDK:\n  // contents = [{ inlineData:{mimeType,data} }, { text:\"...\" }]\n  // (funciona igual para PDF inline)\n  const contents = params.isImage || params.isPdf\n    ? [\n        {\n          inlineData: {\n            mimeType: params.mimeType,\n            data: params.base64,\n          },\n        },\n        { text: params.prompt },\n      ]\n    : [{ text: params.prompt }];\n\n  const resp = await ai.models.generateContent({\n    model: params.model,\n    contents,\n    config: {\n      systemInstruction:\n        \"Voc√™ √© um assistente educacional especializado em criar materiais de estudo. Responda seguindo o schema e apenas em JSON.\",\n      responseMimeType: \"application/json\",\n      responseJsonSchema: getStudySchema(),\n    },\n  });\n\n  const raw = resp.text || \"\";\n  if (!raw.trim()) throw new Error(\"Gemini retornou resposta vazia.\");\n  try {\n    return JSON.parse(raw);\n  } catch {\n    throw new Error(\"Gemini retornou JSON inv√°lido.\");\n  }\n}\n\nasync function runWithGeminiFallback(params: {\n  prompt: string;\n  isImage: boolean;\n  isPdf: boolean;\n  mimeType: string;\n  base64: string;\n}) {\n  const preferred = process.env.GEMINI_MODEL || \"gemini-2.5-flash\";\n\n  // ‚úÖ Lista segura (evita gemini-1.5-flash que est√° dando 404)\n  const models = [\n    preferred,\n    \"gemini-2.5-flash\",\n    \"gemini-2.5-flash-lite\",\n    \"gemini-2.0-flash\",\n    \"gemini-2.0-flash-lite\",\n    \"gemini-flash-latest\",\n  ].filter(Boolean);\n\n  let lastErr: any = null;\n\n  // retry para 503 (overloaded), e troca de modelo para 404 (not found)\n  for (const model of models) {\n    const retries = 2; // total 3 tentativas (0,1,2)\n    for (let attempt = 0; attempt <= retries; attempt++) {\n      try {\n        return await runWithGeminiOnce({ model, ...params });\n      } catch (e: any) {\n        lastErr = e;\n\n        const msg = String(e?.message || \"\");\n        const status = e?.status;\n\n        // 404: tenta o pr√≥ximo modelo\n        if (status === 404 || msg.includes(\"is not found\") || msg.includes(\"NOT_FOUND\")) {\n          break;\n        }\n\n        // 503: backoff e tenta de novo no mesmo modelo\n        if (status === 503 || msg.includes(\"overloaded\") || msg.includes(\"UNAVAILABLE\")) {\n          const backoff = 900 * Math.pow(2, attempt) + Math.floor(Math.random() * 250);\n          await sleep(backoff);\n          continue;\n        }\n\n        // outros erros: sobe\n        throw e;\n      }\n    }\n  }\n\n  throw lastErr || new Error(\"Falha ao chamar Gemini (todos os modelos falharam).\");\n}\n\nexport async function POST(request: NextRequest) {\n  try {\n    const provider = pickProvider();\n\n    const formData = await request.formData();\n    const file = formData.get(\"file\") as File | null;\n\n    if (!file) {\n      return NextResponse.json({ success: false, error: \"Nenhum arquivo foi enviado\" }, { status: 400 });\n    }\n\n    const flashcardsCount = clampInt(Number(formData.get(\"flashcardsCount\") || 10), 1, 50);\n    const difficulty = String(formData.get(\"flashcardsDifficulty\") || \"random\") as Difficulty;\n    const summaryStyle = String(formData.get(\"summaryStyle\") || \"bullets\") as SummaryStyle;\n\n    const bytes = await file.arrayBuffer();\n    const buffer = Buffer.from(bytes);\n\n    const mimeType = file.type || \"application/octet-stream\";\n    const base64 = buffer.toString(\"base64\");\n\n    const isImage = mimeType.startsWith(\"image/\");\n    const isPdf = mimeType === \"application/pdf\";\n\n    // Texto (apenas para text/plain etc). PDF a gente manda inline pro Gemini.\n    const textSnippet = !isImage && !isPdf ? buffer.toString(\"utf-8\") : undefined;\n\n    const prompt = buildPromptText({\n      flashcardsCount,\n      difficulty,\n      summaryStyle,\n      isImage,\n      isPdf,\n      textSnippet,\n    });\n\n    let parsedResult: any;\n\n    if (provider === \"openai\") {\n      const model = process.env.OPENAI_MODEL || \"gpt-4o\";\n\n      const content = isImage\n        ? [\n            { type: \"text\", text: prompt },\n            { type: \"image_url\", image_url: { url: `data:${mimeType};base64,${base64}` } },\n          ]\n        : [{ type: \"text\", text: prompt }];\n\n      parsedResult = await runWithOpenAI({ content, model });\n    } else {\n      // Gemini (recomendado p/ PDF e pra evitar OPENAI_API_KEY)\n      parsedResult = await runWithGeminiFallback({\n        prompt,\n        isImage,\n        isPdf,\n        mimeType,\n        base64,\n      });\n    }\n\n    return NextResponse.json({ success: true, data: parsedResult });\n  } catch (error: any) {\n    console.error(\"Erro ao processar arquivo:\", error);\n    const status = error?.status === 503 ? 503 : 500;\n    return NextResponse.json(\n      { success: false, error: \"Erro ao processar o arquivo\", details: error?.message || String(error) },\n      { status }\n    );\n  }\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}