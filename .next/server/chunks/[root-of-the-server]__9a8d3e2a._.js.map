{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 6, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 226, "column": 0}, "map": {"version":3,"sources":["file:///Users/ruangalvao/ProjetosVS/Projetos%20Pessoais/stud.ai-app/app-stud.ai/src/app/api/process-study-material/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from \"next/server\";\nimport { GoogleGenAI } from \"@google/genai\";\n\nexport const runtime = \"nodejs\";\n\ntype Difficulty = \"easy\" | \"medium\" | \"hard\" | \"random\";\ntype SummaryStyle = \"bullets\" | \"detailed\";\n\nfunction clampInt(n: number, min: number, max: number) {\n  if (!Number.isFinite(n)) return min;\n  return Math.max(min, Math.min(max, Math.trunc(n)));\n}\n\nfunction sleep(ms: number) {\n  return new Promise((r) => setTimeout(r, ms));\n}\n\nfunction getGeminiKey() {\n  return process.env.GEMINI_API_KEY || process.env.GOOGLE_API_KEY || \"\";\n}\n\n/** Pega status/code e retryDelay mesmo quando vem JSON dentro de message */\nfunction parseGeminiError(err: any): { status: number | null; message: string; retryAfterSeconds: number | null } {\n  const rawMsg = String(err?.message || err || \"\");\n  const statusFromObj =\n    (typeof err?.status === \"number\" && err.status) ||\n    (typeof err?.code === \"number\" && err.code) ||\n    null;\n\n  let status: number | null = statusFromObj;\n  let message = rawMsg;\n  let retryAfterSeconds: number | null = null;\n\n  // tenta extrair JSON dentro da mensagem\n  const start = rawMsg.indexOf(\"{\");\n  const end = rawMsg.lastIndexOf(\"}\");\n  if (start >= 0 && end > start) {\n    const slice = rawMsg.slice(start, end + 1);\n    try {\n      const parsed = JSON.parse(slice);\n      const apiErr = parsed?.error;\n      if (apiErr) {\n        if (typeof apiErr.code === \"number\") status = apiErr.code;\n        if (typeof apiErr.message === \"string\") message = apiErr.message;\n\n        const details = Array.isArray(apiErr.details) ? apiErr.details : [];\n        const retryInfo = details.find((d: any) => String(d?.[\"@type\"] || \"\").includes(\"RetryInfo\"));\n        const retryDelay = retryInfo?.retryDelay;\n        if (retryDelay) {\n          const m = String(retryDelay).match(/([0-9]+(?:\\.[0-9]+)?)\\s*s/i);\n          if (m) retryAfterSeconds = Math.ceil(Number(m[1]));\n        }\n      }\n    } catch {\n      // ignore\n    }\n  }\n\n  // fallback: \"Please retry in XXs\"\n  if (!retryAfterSeconds) {\n    const m2 = rawMsg.match(/retry in\\s+([0-9.]+)s/i);\n    if (m2) retryAfterSeconds = Math.ceil(Number(m2[1]));\n  }\n\n  return { status, message, retryAfterSeconds };\n}\n\nfunction isQuota429(err: any) {\n  const p = parseGeminiError(err);\n  if (p.status === 429) return true;\n  const msg = p.message.toLowerCase();\n  return msg.includes(\"quota exceeded\") || msg.includes(\"resource_exhausted\");\n}\n\nfunction isNotFound404(err: any) {\n  const p = parseGeminiError(err);\n  if (p.status === 404) return true;\n  return p.message.toLowerCase().includes(\"not found\");\n}\n\nfunction isOverloaded503(err: any) {\n  const p = parseGeminiError(err);\n  if (p.status === 503) return true;\n  const msg = p.message.toLowerCase();\n  return msg.includes(\"overloaded\") || msg.includes(\"unavailable\");\n}\n\nfunction getStudySchema() {\n  return {\n    type: \"object\",\n    required: [\"topic\", \"flashcards\", \"summary\"],\n    properties: {\n      topic: { type: \"string\" },\n      tags: { type: \"array\", items: { type: \"string\" } },\n      flashcards: {\n        type: \"array\",\n        items: {\n          type: \"object\",\n          required: [\"id\", \"question\", \"answer\"],\n          properties: {\n            id: { type: \"integer\" },\n            question: { type: \"string\" },\n            answer: { type: \"string\" },\n            difficulty: { type: \"string\" },\n            tags: { type: \"array\", items: { type: \"string\" } },\n          },\n        },\n      },\n      summary: {\n        type: \"object\",\n        required: [\"title\", \"mainTopics\", \"keyPoints\"],\n        properties: {\n          title: { type: \"string\" },\n          length: { type: \"string\" },\n          mainTopics: {\n            type: \"array\",\n            items: {\n              type: \"object\",\n              required: [\"id\", \"title\", \"content\", \"icon\"],\n              properties: {\n                id: { type: \"integer\" },\n                title: { type: \"string\" },\n                content: { type: \"string\" },\n                icon: { type: \"string\" },\n                tags: { type: \"array\", items: { type: \"string\" } },\n              },\n            },\n          },\n          keyPoints: { type: \"array\", items: { type: \"string\" } },\n          sourceQuotes: {\n            type: \"array\",\n            items: {\n              type: \"object\",\n              required: [\"quote\", \"whyItMatters\"],\n              properties: {\n                quote: { type: \"string\" },\n                whyItMatters: { type: \"string\" },\n              },\n            },\n          },\n        },\n      },\n    },\n  };\n}\n\nfunction buildPromptText(params: {\n  flashcardsCount: number;\n  difficulty: Difficulty;\n  summaryStyle: SummaryStyle;\n  isImage: boolean;\n  isPdf: boolean;\n  textSnippet?: string;\n}) {\n  const diffText =\n    params.difficulty === \"random\"\n      ? \"Misture dificuldades (easy/medium/hard) e preencha difficulty em cada flashcard.\"\n      : `Use difficulty=\"${params.difficulty}\" em todos os flashcards.`;\n\n  const summaryText =\n    params.summaryStyle === \"bullets\"\n      ? \"Resumo objetivo em bullets curtos.\"\n      : \"Resumo elaborado e explicativo (parÃ¡grafos didÃ¡ticos).\";\n\n  const base = `Gere APENAS JSON vÃ¡lido (sem markdown, sem texto fora do JSON).\n\nRegras:\n- Crie EXATAMENTE ${params.flashcardsCount} flashcards.\n- ${diffText}\n- ${summaryText}\n- Preencha summary.length com \"short\", \"medium\" ou \"long\".\n- Use emojis em icon.\n\nFormato:\n{\n  \"topic\": \"TÃ³pico principal\",\n  \"tags\": [\"tag1\"],\n  \"flashcards\": [{ \"id\": 1, \"question\": \"...\", \"answer\": \"...\", \"difficulty\": \"easy\" }],\n  \"summary\": {\n    \"title\": \"TÃ­tulo\",\n    \"length\": \"short|medium|long\",\n    \"mainTopics\": [{ \"id\": 1, \"title\": \"...\", \"content\": \"...\", \"icon\": \"ðŸ“Œ\" }],\n    \"keyPoints\": [\"...\"],\n    \"sourceQuotes\": [{ \"quote\": \"...\", \"whyItMatters\": \"...\" }]\n  }\n}`;\n\n  if (!params.isImage && !params.isPdf) {\n    const snippet = (params.textSnippet || \"\").slice(0, 4000);\n    return `Material (trecho):\\n${snippet}\\n\\n${base}`;\n  }\n  return base;\n}\n\nasync function runGeminiOnce(params: {\n  model: string;\n  prompt: string;\n  mimeType: string;\n  base64: string;\n  isImage: boolean;\n  isPdf: boolean;\n}) {\n  const apiKey = getGeminiKey();\n  if (!apiKey.trim()) throw new Error(\"GEMINI_API_KEY/GOOGLE_API_KEY ausente no .env.local.\");\n\n  const ai = new GoogleGenAI({ apiKey });\n\n  const contents =\n    params.isImage || params.isPdf\n      ? [\n          { inlineData: { mimeType: params.mimeType, data: params.base64 } },\n          { text: params.prompt },\n        ]\n      : [{ text: params.prompt }];\n\n  const resp = await ai.models.generateContent({\n    model: params.model,\n    contents,\n    config: {\n      systemInstruction: \"VocÃª Ã© um assistente educacional. Responda apenas em JSON conforme o schema.\",\n      responseMimeType: \"application/json\",\n      responseJsonSchema: getStudySchema(),\n    },\n  });\n\n  const raw = resp.text || \"\";\n  if (!raw.trim()) throw new Error(\"Gemini retornou resposta vazia.\");\n  return JSON.parse(raw);\n}\n\nasync function runGeminiWithFallback(params: {\n  prompt: string;\n  mimeType: string;\n  base64: string;\n  isImage: boolean;\n  isPdf: boolean;\n}) {\n  // âœ… Lite primeiro. Preferido vem do .env (recomendado: gemini-2.0-flash-lite)\n  const preferred = process.env.GEMINI_MODEL || \"gemini-2.0-flash-lite\";\n  const models = [\n    preferred,\n    \"gemini-2.0-flash-lite\",\n    \"gemini-2.5-flash-lite\",\n    \"gemini-2.0-flash\",\n    \"gemini-2.5-flash\",\n    \"gemini-flash-latest\",\n  ].filter(Boolean);\n\n  let lastErr: any = null;\n  let lastQuota: { retryAfterSeconds: number | null; message: string } | null = null;\n\n  for (const model of models) {\n    // retry sÃ³ para 503\n    const retries503 = 2;\n\n    for (let attempt = 0; attempt <= retries503; attempt++) {\n      try {\n        return await runGeminiOnce({ model, ...params });\n      } catch (e: any) {\n        lastErr = e;\n\n        // 404 => tenta prÃ³ximo modelo\n        if (isNotFound404(e)) break;\n\n        // 429 => guarda info e tenta prÃ³ximo modelo (SEM esperar 40s no backend)\n        if (isQuota429(e)) {\n          const p = parseGeminiError(e);\n          lastQuota = { retryAfterSeconds: p.retryAfterSeconds, message: p.message };\n          break;\n        }\n\n        // 503 => retry com backoff\n        if (isOverloaded503(e)) {\n          const backoff = 900 * Math.pow(2, attempt) + Math.floor(Math.random() * 250);\n          await sleep(backoff);\n          continue;\n        }\n\n        // outro erro => sobe\n        throw e;\n      }\n    }\n  }\n\n  // Se tudo caiu em quota, sobe um erro especial (pra virar 429 na resposta)\n  if (lastQuota) {\n    const err: any = new Error(lastQuota.message || \"Quota exceeded\");\n    err.status = 429;\n    err.retryAfterSeconds = lastQuota.retryAfterSeconds ?? 45;\n    throw err;\n  }\n\n  throw lastErr || new Error(\"Falha ao chamar Gemini (todos os modelos falharam).\");\n}\n\nexport async function POST(request: NextRequest) {\n  try {\n    // SÃ³ gemini aqui (vocÃª estÃ¡ usando a key do Google)\n    const apiKey = getGeminiKey();\n    if (!apiKey.trim()) {\n      return NextResponse.json(\n        { success: false, error: \"Defina GEMINI_API_KEY/GOOGLE_API_KEY no .env.local.\" },\n        { status: 500 }\n      );\n    }\n\n    const formData = await request.formData();\n    const file = formData.get(\"file\") as File | null;\n\n    if (!file) {\n      return NextResponse.json({ success: false, error: \"Nenhum arquivo foi enviado\" }, { status: 400 });\n    }\n\n    const flashcardsCount = clampInt(Number(formData.get(\"flashcardsCount\") || 10), 1, 50);\n    const difficulty = String(formData.get(\"flashcardsDifficulty\") || \"random\") as Difficulty;\n    const summaryStyle = String(formData.get(\"summaryStyle\") || \"bullets\") as SummaryStyle;\n\n    const bytes = await file.arrayBuffer();\n    const buffer = Buffer.from(bytes);\n    const mimeType = file.type || \"application/octet-stream\";\n    const base64 = buffer.toString(\"base64\");\n\n    const isImage = mimeType.startsWith(\"image/\");\n    const isPdf = mimeType === \"application/pdf\";\n    const textSnippet = !isImage && !isPdf ? buffer.toString(\"utf-8\") : undefined;\n\n    const prompt = buildPromptText({\n      flashcardsCount,\n      difficulty,\n      summaryStyle,\n      isImage,\n      isPdf,\n      textSnippet,\n    });\n\n    const data = await runGeminiWithFallback({ prompt, mimeType, base64, isImage, isPdf });\n    return NextResponse.json({ success: true, data });\n  } catch (error: any) {\n    console.error(\"Erro ao processar arquivo:\", error);\n\n    // âœ… Se for quota, responde 429 (NÃƒO 500)\n    if (error?.status === 429 || isQuota429(error)) {\n      const p = parseGeminiError(error);\n      const retrySec = error?.retryAfterSeconds ?? p.retryAfterSeconds ?? 45;\n\n      return NextResponse.json(\n        {\n          success: false,\n          error: \"Limite da cota do Gemini atingido (tier grÃ¡tis).\",\n          details: p.message,\n          retryAfterSeconds: retrySec,\n        },\n        { status: 429, headers: { \"Retry-After\": String(retrySec) } }\n      );\n    }\n\n    const p = parseGeminiError(error);\n    const status = p.status === 503 ? 503 : 500;\n\n    return NextResponse.json(\n      { success: false, error: \"Erro ao processar o arquivo\", details: p.message },\n      { status }\n    );\n  }\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}